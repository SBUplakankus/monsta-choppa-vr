{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Monsta Choppa VR","text":"<p>A VR roguelike arena combat game built with Unity's XR Interaction Toolkit. Fight waves of enemies, earn gold and experience, upgrade equipment, and progress through increasingly difficult challenges.</p>"},{"location":"#project-status","title":"Project Status","text":"<p>Project Shelved</p> <p>This portfolio project was shelved in January 2026. I started a new position working with Meta's native SDK rather than OpenXR, making context-switching between the two SDKs impractical for continued development.</p> <p>These Documents were also generated by Claude Opus 4.5 based off of my existing MD Files and the Code I made in the project. I don't usually do this but I wanted to clean up the documents before shelving and don't have the time to do it properly myself.    </p> <p>See Project Status for what was completed and what was planned next.</p>"},{"location":"#technical-highlights","title":"Technical Highlights","text":"<ul> <li> <p> Combat System</p> <p>Physics-based VR melee combat with velocity-based damage calculation, haptic feedback, and multiple weapon archetypes.</p> <p> Weapons</p> </li> <li> <p> Enemy System</p> <p>Component-based enemy architecture with NavMesh navigation, object pooling, and data-driven wave spawning.</p> <p> Enemies</p> </li> <li> <p> VR Performance</p> <p>Optimized for Quest 2/3 with 72+ FPS targets, priority-based update management, and Application SpaceWarp support.</p> <p> Performance</p> </li> <li> <p> Architecture</p> <p>ScriptableObject-driven design with decoupled event channels, generic database patterns, and factory systems.</p> <p> Architecture</p> </li> </ul>"},{"location":"#system-architecture","title":"System Architecture","text":"<p>The project uses a layered architecture separating presentation, gameplay, events, and data concerns.</p> <pre><code>graph TB\n    A[Presentation Layer&lt;br/&gt;UI Hosts, Views, Audio, VFX] --&gt; B[Gameplay Layer&lt;br/&gt;Weapons, Enemies, Combat, Arena]\n    B --&gt; C[Event Layer&lt;br/&gt;Event Channels, GameEvents Registry]\n    C --&gt; D[Data Layer&lt;br/&gt;ScriptableObject Databases, Pooling]\n    D --&gt; E[VR Template Layer&lt;br/&gt;XR Origin, Controllers, Locomotion]</code></pre>"},{"location":"#core-design-patterns","title":"Core Design Patterns","text":"Pattern Implementation ScriptableObject Database Generic <code>DatabaseBase&lt;T&gt;</code> with O(1) lookups Event Bus Type-safe ScriptableObject event channels Object Pool Unity ObjectPool with priority routing Factory UIToolkitFactory for consistent UI creation Component Modular enemy and weapon components"},{"location":"#dependencies","title":"Dependencies","text":"Asset Purpose PrimeTween Allocation-free animation ESave Save file serialization XR Interaction Toolkit VR input and interaction Synty Dungeon Realms Environment art"},{"location":"#documentation","title":"Documentation","text":"Section Description Architecture System design, event channels, database patterns Game Systems Weapons, enemies, UI, save data VR Development Performance optimization, comfort, SpaceWarp Future Plans Roadmap and project status"},{"location":"architecture/constants/","title":"Constants System","text":"<p>Centralized string keys and configuration values to eliminate magic strings and improve maintainability.</p>"},{"location":"architecture/constants/#overview","title":"Overview","text":"<p>All string literals used for lookups, save keys, and style classes are defined as constants. This provides compile-time checking and a single source of truth for values used across the codebase.</p> Benefit Explanation Compile-time checking Typos caught at build time, not runtime Refactoring safety Change value in one place Autocomplete support IDE suggests available constants Self-documenting Clear naming indicates purpose"},{"location":"architecture/constants/#constant-categories","title":"Constant Categories","text":""},{"location":"architecture/constants/#gameconstants","title":"GameConstants","text":"<p>Core game configuration and save data keys.</p> <pre><code>public static class GameConstants\n{\n    // Scene Names\n    public const string Bootstrapper = \"Bootstrapper\";\n    public const string StartMenu = \"StartMenu\";\n    public const string Hub = \"Hub\";\n\n    // Save Keys\n    public const string PlayerGoldKey = \"PlayerGold\";\n    public const string PlayerExperienceKey = \"PlayerExperience\";\n    public const string PlayerLevelKey = \"PlayerLevel\";\n    public const string MetaProgressionKey = \"MetaProgression\";\n\n    // Attribute Keys\n    public const string HealthAttribute = \"Health\";\n    public const string StaminaAttribute = \"Stamina\";\n}\n</code></pre>"},{"location":"architecture/constants/#audiokeys","title":"AudioKeys","text":"<p>Audio mixer groups and clip identifiers.</p> <pre><code>public static class AudioKeys\n{\n    // Mixer Groups\n    public const string MixerMaster = \"Master\";\n    public const string MixerMusic = \"Music\";\n    public const string MixerSfx = \"SFX\";\n    public const string MixerAmbience = \"Ambience\";\n\n    // Common Clips\n    public const string ButtonClick = \"button_click\";\n    public const string ButtonHover = \"button_hover\";\n    public const string MenuOpen = \"menu_open\";\n    public const string MenuClose = \"menu_close\";\n}\n</code></pre>"},{"location":"architecture/constants/#localizationkeys","title":"LocalizationKeys","text":"<p>UI text localization keys.</p> <pre><code>public static class LocalizationKeys\n{\n    // Main Menu\n    public const string Play = \"play\";\n    public const string Settings = \"settings\";\n    public const string Quit = \"quit\";\n    public const string Resume = \"resume\";\n\n    // Settings\n    public const string Audio = \"audio\";\n    public const string Video = \"video\";\n    public const string Controls = \"controls\";\n    public const string Language = \"language\";\n\n    // Stats\n    public const string Level = \"level\";\n    public const string Experience = \"experience\";\n    public const string Gold = \"gold\";\n    public const string Health = \"health\";\n}\n</code></pre>"},{"location":"architecture/constants/#uitoolkitstyles","title":"UIToolkitStyles","text":"<p>USS class names for UI Toolkit styling.</p> <pre><code>public static class UIToolkitStyles\n{\n    // Containers\n    public const string Container = \"container\";\n    public const string PanelBody = \"panel-body\";\n    public const string PanelHeader = \"panel-header\";\n\n    // Components\n    public const string MenuButton = \"menu-button\";\n    public const string SettingsSlider = \"settings-slider\";\n    public const string Tab = \"tab\";\n    public const string TabActive = \"tab-active\";\n\n    // Game UI\n    public const string HealthBar = \"health-bar\";\n    public const string HealthBarFill = \"health-bar-fill\";\n    public const string StatRow = \"stat-row\";\n    public const string StatValue = \"stat-value\";\n}\n</code></pre>"},{"location":"architecture/constants/#usage","title":"Usage","text":""},{"location":"architecture/constants/#scene-loading","title":"Scene Loading","text":"<pre><code>SceneManager.LoadScene(GameConstants.Hub);\n</code></pre>"},{"location":"architecture/constants/#save-data","title":"Save Data","text":"<pre><code>saveFile.AddOrUpdateData(GameConstants.PlayerGoldKey, goldValue);\nvar gold = saveFile.GetData&lt;int&gt;(GameConstants.PlayerGoldKey);\n</code></pre>"},{"location":"architecture/constants/#audio","title":"Audio","text":"<pre><code>GameEvents.OnSfxRequested.Raise(AudioKeys.ButtonClick);\naudioMixer.SetFloat(AudioKeys.MixerMaster, volume);\n</code></pre>"},{"location":"architecture/constants/#ui-styling","title":"UI Styling","text":"<pre><code>var button = UIToolkitFactory.CreateButton(\n    LocalizationKeys.Play,\n    HandlePlay,\n    UIToolkitStyles.MenuButton\n);\n</code></pre>"},{"location":"architecture/constants/#adding-new-constants","title":"Adding New Constants","text":"<ol> <li>Identify the category (Game, Audio, Localization, UI)</li> <li>Add to appropriate static class</li> <li>Use descriptive naming: <code>CategoryAction</code> or <code>CategoryItem</code></li> <li>Replace all magic string usages</li> </ol> <pre><code>public static class GameConstants\n{\n    // Existing keys...\n    public const string PlayerManaKey = \"PlayerMana\";  // New key\n}\n\n// Usage\nsaveFile.AddOrUpdateData(GameConstants.PlayerManaKey, manaValue);\n</code></pre>"},{"location":"architecture/database-pattern/","title":"Database Pattern","text":"<p>Generic ScriptableObject-based database pattern for storing and retrieving game data with O(1) lookups.</p>"},{"location":"architecture/database-pattern/#overview","title":"Overview","text":"<p>Databases provide centralized access to game content (weapons, enemies, audio, particles) without hard-coded references or scene dependencies.</p> <pre><code>GameDatabases (static access)\n    \u2502\n    \u251c\u2500\u2500 WeaponDatabase  \u2192  WeaponData[]\n    \u251c\u2500\u2500 EnemyDatabase   \u2192  EnemyData[]\n    \u251c\u2500\u2500 AudioClipDatabase \u2192 AudioClipData[]\n    \u251c\u2500\u2500 WorldAudioDatabase \u2192 WorldAudioData[]\n    \u2514\u2500\u2500 ParticleDatabase \u2192 ParticleData[]\n</code></pre>"},{"location":"architecture/database-pattern/#databasebaset","title":"DatabaseBase&lt;T&gt;","text":"<p>Generic base class for all databases.</p> <pre><code>public abstract class DatabaseBase&lt;T&gt; : ScriptableObject where T : ScriptableObject\n{\n    [SerializeField] private T[] entries;\n    private Dictionary&lt;string, T&gt; _lookup;\n\n    public bool TryGet(string id, out T entry)\n    {\n        BuildLookup();\n        var key = id?.ToLower().Trim() ?? string.Empty;\n        return _lookup.TryGetValue(key, out entry);\n    }\n\n    public T Get(string id)\n    {\n        return TryGet(id, out var entry) ? entry : null;\n    }\n\n    protected abstract string GetKey(T entry);\n\n    private void BuildLookup()\n    {\n        if (_lookup != null) return;\n\n        _lookup = new Dictionary&lt;string, T&gt;();\n        foreach (var entry in entries)\n        {\n            var key = GetKey(entry)?.ToLower().Trim();\n            if (!string.IsNullOrEmpty(key))\n                _lookup[key] = entry;\n        }\n    }\n}\n</code></pre>"},{"location":"architecture/database-pattern/#implementations","title":"Implementations","text":""},{"location":"architecture/database-pattern/#weapondatabase","title":"WeaponDatabase","text":"<pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Databases/Weapon Database\")]\npublic class WeaponDatabase : DatabaseBase&lt;WeaponData&gt;\n{\n    protected override string GetKey(WeaponData entry) =&gt; entry.WeaponID;\n}\n</code></pre>"},{"location":"architecture/database-pattern/#enemydatabase","title":"EnemyDatabase","text":"<pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Databases/Enemy Database\")]\npublic class EnemyDatabase : DatabaseBase&lt;EnemyData&gt;\n{\n    protected override string GetKey(EnemyData entry) =&gt; entry.EnemyId;\n}\n</code></pre>"},{"location":"architecture/database-pattern/#particledatabase","title":"ParticleDatabase","text":"<pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Databases/Particle Database\")]\npublic class ParticleDatabase : DatabaseBase&lt;ParticleData&gt;\n{\n    protected override string GetKey(ParticleData entry) =&gt; entry.ID;\n}\n</code></pre>"},{"location":"architecture/database-pattern/#gamedatabases-static-access","title":"GameDatabases Static Access","text":"<p>Global access point for all databases. Assigned during bootstrap.</p> <pre><code>public static class GameDatabases\n{\n    public static WeaponDatabase WeaponDatabase { get; set; }\n    public static EnemyDatabase EnemyDatabase { get; set; }\n    public static AudioClipDatabase AudioClipDatabase { get; set; }\n    public static WorldAudioDatabase WorldAudioDatabase { get; set; }\n    public static ParticleDatabase ParticleDatabase { get; set; }\n\n    public static void Clear()\n    {\n        WeaponDatabase = null;\n        EnemyDatabase = null;\n        // ... clear all references\n    }\n}\n</code></pre>"},{"location":"architecture/database-pattern/#usage","title":"Usage","text":""},{"location":"architecture/database-pattern/#safe-retrieval","title":"Safe Retrieval","text":"<pre><code>if (GameDatabases.WeaponDatabase.TryGet(\"sword_fire\", out var weapon))\n{\n    SpawnWeapon(weapon);\n}\n</code></pre>"},{"location":"architecture/database-pattern/#direct-retrieval","title":"Direct Retrieval","text":"<pre><code>var enemy = GameDatabases.EnemyDatabase.Get(\"goblin_melee\");\nif (enemy != null)\n{\n    SpawnEnemy(enemy);\n}\n</code></pre>"},{"location":"architecture/database-pattern/#with-pooling","title":"With Pooling","text":"<pre><code>var enemyData = GameDatabases.EnemyDatabase.Get(enemyId);\nvar instance = GamePoolManager.Instance.GetEnemyPrefab(enemyData, position, rotation);\n</code></pre>"},{"location":"architecture/database-pattern/#data-flow","title":"Data Flow","text":"<ol> <li>Designer creates ScriptableObject asset (e.g., WeaponData)</li> <li>Asset added to database entries array</li> <li>Database builds lookup dictionary on first access</li> <li>Runtime systems query via GameDatabases static class</li> <li>Retrieved data used to configure pooled instances</li> </ol>"},{"location":"architecture/database-pattern/#adding-new-database-types","title":"Adding New Database Types","text":""},{"location":"architecture/database-pattern/#step-1-create-data-scriptableobject","title":"Step 1: Create Data ScriptableObject","text":"<pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Abilities/Ability Data\")]\npublic class AbilityData : ScriptableObject\n{\n    public string abilityId;\n    public string displayName;\n    public float cooldown;\n    public GameObject effectPrefab;\n}\n</code></pre>"},{"location":"architecture/database-pattern/#step-2-create-database-class","title":"Step 2: Create Database Class","text":"<pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Databases/Ability Database\")]\npublic class AbilityDatabase : DatabaseBase&lt;AbilityData&gt;\n{\n    protected override string GetKey(AbilityData entry) =&gt; entry.abilityId;\n}\n</code></pre>"},{"location":"architecture/database-pattern/#step-3-add-to-gamedatabases","title":"Step 3: Add to GameDatabases","text":"<pre><code>public static AbilityDatabase AbilityDatabase { get; set; }\n</code></pre>"},{"location":"architecture/database-pattern/#best-practices","title":"Best Practices","text":"Practice Reason Use TryGet over Get Handles missing entries gracefully Normalize keys (lowercase, trimmed) Prevents lookup failures from formatting Keep databases read-only at runtime Maintains data consistency Assign databases during bootstrap Ensures availability before gameplay"},{"location":"architecture/event-system/","title":"Event System","text":"<p>ScriptableObject-based publish/subscribe system for decoupled communication between game systems.</p>"},{"location":"architecture/event-system/#overview","title":"Overview","text":"<p>Event channels allow systems to communicate without direct references. A sender raises an event, and any number of subscribers receive it.</p> <pre><code>Sender  \u2192  Event Channel (ScriptableObject)  \u2192  Subscribers\n</code></pre>"},{"location":"architecture/event-system/#base-classes","title":"Base Classes","text":""},{"location":"architecture/event-system/#typeeventchannelbaset","title":"TypeEventChannelBase&lt;T&gt;","text":"<p>Generic base class for typed events.</p> <pre><code>public abstract class TypeEventChannelBase&lt;T&gt; : ScriptableObject\n{\n    private event Action&lt;T&gt; _handlers;\n\n    public void Raise(T value)\n    {\n        _handlers?.Invoke(value);\n    }\n\n    public void Subscribe(Action&lt;T&gt; handler)\n    {\n        _handlers += handler;\n    }\n\n    public void Unsubscribe(Action&lt;T&gt; handler)\n    {\n        _handlers -= handler;\n    }\n\n    private void OnDisable()\n    {\n        _handlers = null;\n    }\n}\n</code></pre>"},{"location":"architecture/event-system/#voideventchannel","title":"VoidEventChannel","text":"<p>For events with no payload.</p> <pre><code>public class VoidEventChannel : ScriptableObject\n{\n    private event Action _handlers;\n\n    public void Raise() =&gt; _handlers?.Invoke();\n    public void Subscribe(Action handler) =&gt; _handlers += handler;\n    public void Unsubscribe(Action handler) =&gt; _handlers -= handler;\n}\n</code></pre>"},{"location":"architecture/event-system/#event-channel-types","title":"Event Channel Types","text":"Type Payload Example Usage VoidEventChannel None Pause requested, game over trigger IntEventChannel int Damage dealt, gold changed, experience gained FloatEventChannel float Volume changed, timer tick StringEventChannel string Audio clip request, message display EnemyEventChannel EnemyController Enemy spawned, enemy despawned ArenaStateEventChannel ArenaState Arena state transitions LocaleEventChannel Locale Language changed"},{"location":"architecture/event-system/#gameevents-registry","title":"GameEvents Registry","text":"<p>Static class providing global access to all event channels. Assigned during bootstrap.</p> <pre><code>public static class GameEvents\n{\n    // Player Events\n    public static IntEventChannel OnPlayerDamaged;\n    public static IntEventChannel OnGoldChanged;\n    public static IntEventChannel OnExperienceGained;\n    public static IntEventChannel OnLevelChanged;\n\n    // Audio Events\n    public static StringEventChannel OnMusicRequested;\n    public static StringEventChannel OnSfxRequested;\n\n    // Game Events\n    public static EnemyEventChannel OnEnemySpawned;\n    public static EnemyEventChannel OnEnemyDespawned;\n    public static ArenaStateEventChannel OnArenaStateChanged;\n    public static VoidEventChannel OnPauseRequested;\n    public static VoidEventChannel OnGameOverSequenceRequested;\n    public static VoidEventChannel OnGameWonSequenceRequested;\n}\n</code></pre>"},{"location":"architecture/event-system/#usage-examples","title":"Usage Examples","text":""},{"location":"architecture/event-system/#subscribing-to-events","title":"Subscribing to Events","text":"<pre><code>public class GoldDisplay : MonoBehaviour\n{\n    private void OnEnable()\n    {\n        GameEvents.OnGoldChanged.Subscribe(UpdateDisplay);\n    }\n\n    private void OnDisable()\n    {\n        GameEvents.OnGoldChanged.Unsubscribe(UpdateDisplay);\n    }\n\n    private void UpdateDisplay(int newGold)\n    {\n        goldLabel.text = newGold.ToString();\n    }\n}\n</code></pre>"},{"location":"architecture/event-system/#raising-events","title":"Raising Events","text":"<pre><code>public class EnemyHealth : MonoBehaviour\n{\n    public void TakeDamage(int damage)\n    {\n        currentHealth -= damage;\n\n        if (currentHealth &lt;= 0)\n        {\n            GameEvents.OnEnemyDespawned.Raise(controller);\n        }\n    }\n}\n</code></pre>"},{"location":"architecture/event-system/#requesting-audio","title":"Requesting Audio","text":"<pre><code>GameEvents.OnSfxRequested.Raise(\"sword_hit\");\nGameEvents.OnMusicRequested.Raise(\"combat_theme\");\n</code></pre>"},{"location":"architecture/event-system/#rules","title":"Rules","text":"Rule Reason Always unsubscribe in OnDisable Prevents memory leaks and null reference errors Keep handlers lightweight Long handlers block other subscribers Use null-conditional invoke Handlers may be null if no subscribers Match subscribe/unsubscribe methods Using different method references causes leaks"},{"location":"architecture/event-system/#correct-pattern-method-reference","title":"Correct Pattern: Method Reference","text":"<pre><code>// Correct - same method reference for subscribe and unsubscribe\nprivate void OnEnable() =&gt; GameEvents.OnGoldChanged.Subscribe(HandleGoldChanged);\nprivate void OnDisable() =&gt; GameEvents.OnGoldChanged.Unsubscribe(HandleGoldChanged);\nprivate void HandleGoldChanged(int gold) { /* ... */ }\n</code></pre>"},{"location":"architecture/event-system/#incorrect-pattern-memory-leak","title":"Incorrect Pattern (Memory Leak)","text":"<pre><code>// Lambda creates new delegate each time - cannot unsubscribe\nprivate void OnEnable() =&gt; GameEvents.OnGoldChanged.Subscribe(g =&gt; UpdateUI(g));\n// This will NOT work - different delegate instance\n</code></pre>"},{"location":"architecture/overview/","title":"Architecture Overview","text":"<p>This document describes the high-level architecture of the Monsta Choppa VR project. The system is built on Unity's XR Interaction Toolkit with custom layers for gameplay, data management, and UI.</p>"},{"location":"architecture/overview/#core-design-principles","title":"Core Design Principles","text":"Principle Implementation Decoupled Systems Event channels for communication, no direct references Data-Driven Design ScriptableObjects define all game content VR Performance Object pooling, priority updates, minimal allocations Extensibility Generic base classes, factory patterns"},{"location":"architecture/overview/#system-layers","title":"System Layers","text":"<pre><code>graph TB\n    subgraph Presentation[\"Presentation Layer\"]\n        A1[UI Hosts]\n        A2[Views]\n        A3[Audio]\n        A4[Visual Effects]\n    end\n\n    subgraph Gameplay[\"Gameplay Layer\"]\n        B1[Weapons]\n        B2[Enemies]\n        B3[Combat]\n        B4[Arena Management]\n    end\n\n    subgraph Events[\"Event Layer\"]\n        C1[Event Channels]\n        C2[GameEvents Registry]\n    end\n\n    subgraph Data[\"Data Layer\"]\n        D1[ScriptableObject Databases]\n        D2[Object Pooling]\n        D3[Constants]\n    end\n\n    subgraph VR[\"VR Template Layer\"]\n        E1[XR Origin]\n        E2[Controllers]\n        E3[Locomotion]\n        E4[Input Actions]\n    end\n\n    Presentation --&gt; Gameplay\n    Gameplay --&gt; Events\n    Events --&gt; Data\n    Data --&gt; VR</code></pre>"},{"location":"architecture/overview/#data-driven-scriptableobject-pattern","title":"Data-Driven ScriptableObject Pattern","text":"<p>The project uses a consistent pattern where ScriptableObjects define configuration and MonoBehaviours handle runtime logic.</p>"},{"location":"architecture/overview/#pattern-flow","title":"Pattern Flow","text":"<pre><code>ScriptableObject (Data)  \u2192  MonoBehaviour (Controller)  \u2192  Components (Behavior)\n       \u2193                            \u2193                            \u2193\n   WeaponData              XRWeaponBase               Rigidbody, Collider\n   EnemyData               EnemyController            EnemyHealth, EnemyMovement\n   ParticleData            ParticleController         ParticleSystem\n</code></pre>"},{"location":"architecture/overview/#benefits","title":"Benefits","text":"Benefit Explanation Designer-friendly Configure in Inspector without code changes Runtime immutable Data assets are read-only, no accidental modifications Easy balancing Tweak stats by editing assets, not code Pooling compatible Same data drives multiple pooled instances Serialization ready ScriptableObjects serialize naturally"},{"location":"architecture/overview/#data-class-structure","title":"Data Class Structure","text":"<p>All data ScriptableObjects follow this structure:</p> <pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Category/TypeData\")]\npublic class TypeData : ScriptableObject\n{\n    [Header(\"Identity\")]\n    public string id;\n    public string displayName;\n\n    [Header(\"Configuration\")]\n    // Type-specific fields...\n\n    [Header(\"References\")]\n    public GameObject prefab;\n\n    // Calculated properties\n    public int CalculatedValue =&gt; baseValue + modifier;\n}\n</code></pre>"},{"location":"architecture/overview/#key-system-relationships","title":"Key System Relationships","text":""},{"location":"architecture/overview/#weapon-system","title":"Weapon System","text":"<pre><code>WeaponData (ScriptableObject)\n    \u2502\n    \u251c\u2500\u2500 WeaponDatabase (lookup)\n    \u2502\n    \u2514\u2500\u2500 XRWeaponBase (MonoBehaviour)\n            \u2502\n            \u251c\u2500\u2500 MeleeXRWeapon / BowXRWeapon / StaffXRWeapon\n            \u2502\n            \u251c\u2500\u2500 WeaponHitbox (damage detection)\n            \u2502\n            \u2514\u2500\u2500 WeaponModifierData[] (stackable modifiers)\n</code></pre>"},{"location":"architecture/overview/#enemy-system","title":"Enemy System","text":"<pre><code>EnemyData (ScriptableObject)\n    \u2502\n    \u251c\u2500\u2500 EnemyDatabase (lookup)\n    \u2502\n    \u2514\u2500\u2500 EnemyController (MonoBehaviour coordinator)\n            \u2502\n            \u251c\u2500\u2500 EnemyHealth (IDamageable, health bar)\n            \u251c\u2500\u2500 EnemyMovement (NavMesh navigation)\n            \u251c\u2500\u2500 EnemyAnimator (state machine)\n            \u2514\u2500\u2500 EnemyAttack (WeaponData reference)\n</code></pre>"},{"location":"architecture/overview/#object-pooling","title":"Object Pooling","text":"<pre><code>GamePoolManager (Singleton)\n    \u2502\n    \u251c\u2500\u2500 Enemy Pools (keyed by EnemyData)\n    \u251c\u2500\u2500 Weapon Pools (keyed by WeaponData)\n    \u251c\u2500\u2500 Particle Pools (keyed by ParticleData)\n    \u2514\u2500\u2500 Audio Pools (keyed by WorldAudioData)\n</code></pre> <p>Usage: <pre><code>// Spawn\nGamePoolManager.Instance.GetEnemyPrefab(enemyData, position, rotation);\n\n// Return\nGamePoolManager.Instance.ReturnEnemyPrefab(enemyData, gameObject);\n</code></pre></p>"},{"location":"architecture/overview/#initialization","title":"Initialization","text":"<p>The GameBootstrap MonoBehaviour initializes all static references on startup:</p> <ol> <li>Event Channels - Assigned to GameEvents static fields</li> <li>Databases - Assigned to GameDatabases static fields</li> <li>Pool Manager - Pre-warms object pools</li> <li>Save System - Loads player data via ESave</li> </ol> <p>All systems are ready before any gameplay scene loads.</p>"},{"location":"architecture/overview/#static-access-layer","title":"Static Access Layer","text":"<p>Global access to databases and events through static classes:</p> <pre><code>// GameDatabases - centralized database access\nGameDatabases.WeaponDatabase.TryGet(\"sword_fire\", out var weapon);\nGameDatabases.EnemyDatabase.TryGet(\"goblin_melee\", out var enemy);\n\n// GameEvents - centralized event access\nGameEvents.OnPlayerDamaged.Raise(damage);\nGameEvents.OnEnemySpawned.Subscribe(HandleEnemySpawn);\n</code></pre>"},{"location":"architecture/overview/#best-practices","title":"Best Practices","text":"Rule Reason Always unsubscribe in OnDisable Prevents memory leaks and null references Never modify ScriptableObjects at runtime Breaks data consistency Use TryGet for database lookups Handles missing entries gracefully Pool all instantiated objects Avoids GC spikes in VR Keep Update logic minimal VR requires consistent 72+ FPS"},{"location":"architecture/overview/#file-organization","title":"File Organization","text":"<pre><code>Assets/Scripts/\n\u251c\u2500\u2500 Data/                   # ScriptableObject data classes\n\u2502   \u251c\u2500\u2500 Core/              # EnemyData, ParticleData\n\u2502   \u2514\u2500\u2500 Weapons/           # WeaponData, WeaponModifierData\n\u251c\u2500\u2500 Databases/             # DatabaseBase&lt;T&gt;, GameDatabases\n\u251c\u2500\u2500 Events/                # Event channels, GameEvents\n\u251c\u2500\u2500 Characters/            # Enemy components\n\u251c\u2500\u2500 Weapons/               # Weapon components\n\u251c\u2500\u2500 Pooling/               # GamePoolManager\n\u251c\u2500\u2500 Saves/                 # ESave integration\n\u251c\u2500\u2500 UI/                    # Views, Hosts, Controllers\n\u2514\u2500\u2500 Factories/             # UIToolkitFactory\n</code></pre>"},{"location":"development/game-design/","title":"Game Design","text":"<p>Overview of game flow, progression systems, and VR-specific design considerations.</p>"},{"location":"development/game-design/#game-loop","title":"Game Loop","text":"<pre><code>HUB WORLD\n  - Shop: Buy/sell items\n  - Armory: Equip weapons\n  - Portals: Select arena\n        |\n        v\nARENA\n  - Wave 1 -&gt; Wave 2 -&gt; ... -&gt; Boss\n  - Collect: Gold, Experience\n        |\n        v\nRESULTS\n  - Score, Rewards\n  - Save Progress\n  - Return to Hub\n</code></pre>"},{"location":"development/game-design/#game-states","title":"Game States","text":"State Description Transitions To StartMenu Initial menu Loading, Hub Hub Player base, shops, portals Arena, Settings Arena Active combat Victory, Defeat, Paused ArenaPaused Combat suspended Arena, Hub ArenaVictory Completed all waves Results, Hub ArenaDefeat Player died Results, Hub"},{"location":"development/game-design/#progression-systems","title":"Progression Systems","text":""},{"location":"development/game-design/#player-level","title":"Player Level","text":"<p>Experience earned from combat increases player level.</p> <p>Level thresholds use polynomial scaling:</p> <ul> <li>Level 1 to 2: 100 XP</li> <li>Level 2 to 3: 400 XP</li> <li>Level N to N+1: 100 * N\u00b2 XP</li> </ul> <p>Level rewards:</p> <ul> <li>Stat bonuses (health, damage)</li> <li>Unlock new arenas</li> <li>Unlock shop items</li> </ul>"},{"location":"development/game-design/#gold-economy","title":"Gold Economy","text":"<p>Sources:</p> <ul> <li>Basic enemy kill: 5-10 gold</li> <li>Elite enemy kill: 20-30 gold</li> <li>Boss kill: 100+ gold</li> <li>Wave completion: 25 gold</li> <li>Arena completion: 100-500 gold</li> </ul> <p>Expenses:</p> <ul> <li>Basic weapon: 100-300 gold</li> <li>Rare weapon: 500-1000 gold</li> <li>Stat upgrade: 50-200 gold</li> <li>Arena unlock: 200-500 gold</li> </ul>"},{"location":"development/game-design/#meta-progression","title":"Meta Progression","text":"<p>Permanent upgrades that persist across runs:</p> <ul> <li>Stat multipliers (health, damage, gold gain)</li> <li>Weapon unlocks</li> <li>Arena unlocks</li> <li>Starting loadout options</li> </ul>"},{"location":"development/game-design/#arena-design","title":"Arena Design","text":""},{"location":"development/game-design/#wave-structure","title":"Wave Structure","text":"<p>Each arena contains multiple waves of enemies, culminating in a boss wave.</p> <p>Wave configuration:</p> <ul> <li>Enemy types and counts</li> <li>Spawn delays</li> <li>Intermission time between waves</li> </ul>"},{"location":"development/game-design/#difficulty-scaling","title":"Difficulty Scaling","text":"Arena Enemies Health Recommended Level Tutorial 3-5 50% 1 Easy 5-8 100% 1-3 Normal 8-12 100% 4-6 Hard 12-15 125% 7-10 Nightmare 15-20 150% 11+"},{"location":"development/game-design/#save-system","title":"Save System","text":""},{"location":"development/game-design/#auto-save-triggers","title":"Auto-save Triggers","text":"<ul> <li>Arena completion</li> <li>Returning to hub</li> <li>Purchasing items</li> <li>Application pause</li> <li>Timer (every 5 minutes in hub)</li> </ul>"},{"location":"development/game-design/#saved-data","title":"Saved Data","text":"<ul> <li>Player level and experience</li> <li>Gold and currency</li> <li>Purchased upgrades</li> <li>Unlocked content</li> <li>Arena completion records</li> <li>Equipment loadout</li> <li>Settings</li> </ul>"},{"location":"development/game-design/#performance-targets","title":"Performance Targets","text":"Metric Target Maximum Frame Rate 72 FPS - Active Enemies 6 8 Draw Calls 100 150 Frame Budget 11ms 13.9ms"},{"location":"development/ui-toolkit/","title":"UI Toolkit Best Practices","text":"<p>Memory-safe patterns for creating UI panels in VR using Unity's UI Toolkit.</p>"},{"location":"development/ui-toolkit/#architecture-summary","title":"Architecture Summary","text":"<pre><code>Controller (game logic)\n    |\nHost (MonoBehaviour, lifecycle)\n    |\nView (element creation, layout)\n    |\nFactory (element builders)\n</code></pre> <p>See User Interface for full architecture details.</p>"},{"location":"development/ui-toolkit/#memory-leak-prevention","title":"Memory Leak Prevention","text":""},{"location":"development/ui-toolkit/#common-leak-sources","title":"Common Leak Sources","text":"Source Problem Solution Lambda event handlers Cannot unsubscribe Use method references Missing unsubscribe Handler keeps reference Always unsubscribe in OnDisable View not disposed Elements remain in tree Call Dispose before regenerate Data bindings Source holds reference Clear dataSource in Dispose"},{"location":"development/ui-toolkit/#correct-event-pattern","title":"Correct Event Pattern","text":"<pre><code>private EventCallback&lt;ChangeEvent&lt;float&gt;&gt; _sliderCallback;\n\nvoid Bind()\n{\n    _sliderCallback = evt =&gt; OnValueChanged(evt.newValue);\n    slider.RegisterValueChangedCallback(_sliderCallback);\n}\n\nvoid Unbind()\n{\n    slider.UnregisterValueChangedCallback(_sliderCallback);\n}\n</code></pre>"},{"location":"development/ui-toolkit/#incorrect-pattern-memory-leak","title":"Incorrect Pattern (Memory Leak)","text":"<pre><code>// Lambda creates new delegate - cannot unsubscribe\nslider.RegisterValueChangedCallback(evt =&gt; OnValueChanged(evt.newValue));\n</code></pre>"},{"location":"development/ui-toolkit/#cleanup-checklist","title":"Cleanup Checklist","text":"<p>In Host.Dispose() or OnDisable():</p> <ol> <li>Unsubscribe from View events</li> <li>Unsubscribe from external events (Event Channels)</li> <li>Unregister UI callbacks</li> <li>Dispose the View</li> <li>Null out references</li> </ol> <pre><code>protected override void Dispose()\n{\n    // External events\n    GameEvents.OnGoldChanged.Unsubscribe(HandleGoldChanged);\n\n    // View events\n    if (_view != null)\n        _view.OnButtonClicked -= HandleButton;\n\n    // UI callbacks\n    _unbindAll?.Invoke();\n\n    // View\n    _view?.Dispose();\n    _view = null;\n}\n</code></pre>"},{"location":"development/ui-toolkit/#unbind-pattern","title":"Unbind Pattern","text":"<p>Compose unbind actions for clean disposal:</p> <pre><code>private Action _unbindAll;\n\nvoid BindControls()\n{\n    _unbindAll = () =&gt; { };\n    _unbindAll += BindSlider(view.Volume, volumeAttribute);\n    _unbindAll += BindToggle(view.Mute, muteAttribute);\n}\n\nstatic Action BindSlider(Slider slider, FloatAttribute attr)\n{\n    EventCallback&lt;ChangeEvent&lt;float&gt;&gt; cb = e =&gt; attr.Value = e.newValue;\n    slider.RegisterValueChangedCallback(cb);\n    return () =&gt; slider.UnregisterValueChangedCallback(cb);\n}\n\nvoid Dispose()\n{\n    _unbindAll?.Invoke();\n    _unbindAll = null;\n}\n</code></pre>"},{"location":"development/ui-toolkit/#view-disposal","title":"View Disposal","text":"<p>Always dispose before regenerating:</p> <pre><code>public override void Generate()\n{\n    Dispose();\n\n    _view = new MyPanelView(root, styleSheet);\n    BindEvents();\n    Show();\n}\n</code></pre> <p>BasePanelView.Dispose():</p> <pre><code>public virtual void Dispose()\n{\n    Container?.Clear();\n    Container?.RemoveFromHierarchy();\n    Container = null;\n}\n</code></pre>"},{"location":"development/ui-toolkit/#vr-specific-ui","title":"VR-Specific UI","text":""},{"location":"development/ui-toolkit/#hit-targets","title":"Hit Targets","text":"<ul> <li>Minimum button size: 64x64 pixels</li> <li>Slider handle: 48x48 minimum</li> <li>Generous padding between controls</li> </ul>"},{"location":"development/ui-toolkit/#text-readability","title":"Text Readability","text":"<ul> <li>Headers: 24-32px</li> <li>Body: 16-20px</li> <li>Never smaller than 12px</li> <li>High contrast colors</li> </ul>"},{"location":"development/ui-toolkit/#world-space-setup","title":"World Space Setup","text":"<ul> <li>Scale: 0.001 (1 pixel = 1mm)</li> <li>Distance: 1-2 meters from player</li> <li>Avoid rapid animations</li> <li>Test on actual headset</li> </ul>"},{"location":"development/ui-toolkit/#common-mistakes","title":"Common Mistakes","text":"Mistake Fix View regenerated without Dispose Always Dispose first Double event subscription Unsubscribe before subscribe External events not cleaned Unsubscribe in OnDisable Controller references View elements Only communicate through Host Null check missing in callback Always check _view != null"},{"location":"development/ui-toolkit/#quick-reference","title":"Quick Reference","text":"<pre><code>private void OnEnable()\n{\n    GameEvents.OnGoldChanged.Subscribe(HandleGold);\n}\n\nprivate void OnDisable()\n{\n    GameEvents.OnGoldChanged.Unsubscribe(HandleGold);\n}\n\nprivate void HandleGold(int value)\n{\n    if (_view?.GoldLabel != null)\n        _view.GoldLabel.text = value.ToString();\n}\n</code></pre>"},{"location":"future/project-status/","title":"Project Status","text":"<p>This document explains the current state of the project, why development was paused, and what lessons were learned.</p>"},{"location":"future/project-status/#why-the-project-was-shelved","title":"Why the Project Was Shelved","text":"<p>In January 2026, I started a new position working with Meta's native SDK rather than OpenXR. The two SDKs have fundamentally different approaches:</p> Aspect OpenXR (This Project) Meta Native SDK (Work) Input System XR Interaction Toolkit OVRInput Controller Handling XRController + Action Maps OVRCameraRig Hand Tracking XR Hands OVRHand Passthrough OpenXR Extensions OVRPassthroughLayer Performance APIs Standard Unity OVRManager + OVRMetrics <p>Context-switching between these two paradigms became impractical. Rather than produce subpar work in both contexts, I chose to pause this portfolio project.</p>"},{"location":"future/project-status/#what-was-completed","title":"What Was Completed","text":""},{"location":"future/project-status/#architecture-complete","title":"Architecture (Complete)","text":"<ul> <li>ScriptableObject-driven data layer</li> <li>Generic database pattern with O(1) lookups</li> <li>Type-safe event channel system</li> <li>Centralized static access (GameEvents, GameDatabases)</li> <li>Object pooling with priority routing</li> </ul>"},{"location":"future/project-status/#vr-foundation-complete","title":"VR Foundation (Complete)","text":"<ul> <li>XR Rig setup with locomotion options</li> <li>Teleport, smooth locomotion, snap/smooth turn</li> <li>Controller input mappings</li> <li>Haptic feedback system</li> </ul>"},{"location":"future/project-status/#combat-system-75","title":"Combat System (75%)","text":"<ul> <li>Weapon base classes and inheritance hierarchy</li> <li>Melee, bow, staff, shield, throwable weapon types</li> <li>WeaponData ScriptableObjects</li> <li>WeaponHitbox collision detection</li> <li>XR grab integration</li> </ul> <p>Missing: Velocity-based damage calculation, hit feedback polish</p>"},{"location":"future/project-status/#enemy-system-70","title":"Enemy System (70%)","text":"<ul> <li>Component-based architecture (Controller, Health, Movement, Animator, Attack)</li> <li>EnemyData ScriptableObjects</li> <li>NavMesh navigation</li> <li>Wave spawning system</li> <li>Object pooling integration</li> </ul> <p>Missing: AI state machine, animation polish, variety</p>"},{"location":"future/project-status/#ui-system-60","title":"UI System (60%)","text":"<ul> <li>UI Toolkit integration</li> <li>Factory-View-Host architecture</li> <li>Start menu, settings panels</li> <li>Loading screen</li> <li>Enemy health bars</li> </ul> <p>Missing: Pause menu, arena HUD, results screen, wrist UI</p>"},{"location":"future/project-status/#save-system-85","title":"Save System (85%)","text":"<ul> <li>ESave integration</li> <li>MetaProgressionData structure</li> <li>Event-driven save/load</li> <li>Settings persistence</li> </ul> <p>Missing: Autosave triggers, save indicator UI</p>"},{"location":"future/project-status/#what-was-not-started","title":"What Was Not Started","text":"<ul> <li>Shop system</li> <li>Equipment selection UI</li> <li>Player levelling with progression curves</li> <li>Roguelike meta-progression loop</li> <li>Leaderboards</li> <li>Tutorial</li> </ul>"},{"location":"future/project-status/#technical-highlights","title":"Technical Highlights","text":""},{"location":"future/project-status/#strong-points","title":"Strong Points","text":"<p>The architecture demonstrates professional Unity development practices:</p> <ol> <li> <p>Decoupled Systems - Event channels allow systems to communicate without direct references, making the codebase modular and testable.</p> </li> <li> <p>Data-Driven Design - ScriptableObjects define all game content, enabling rapid iteration without code changes.</p> </li> <li> <p>VR Performance Awareness - Object pooling, priority-based updates, and non-allocating physics queries keep frame rates stable.</p> </li> <li> <p>Memory Safety - UI Toolkit patterns with proper subscription management prevent memory leaks.</p> </li> <li> <p>Clean Code Organization - Consistent folder structure, namespaces, and naming conventions.</p> </li> </ol>"},{"location":"future/project-status/#lessons-learned","title":"Lessons Learned","text":"<ol> <li> <p>Scope Management - The original scope was too ambitious for a solo portfolio project. Should have focused on a complete vertical slice rather than breadth.</p> </li> <li> <p>SDK Lock-in - Building on OpenXR was the right choice for portability, but made transitioning to Meta's ecosystem more difficult.</p> </li> <li> <p>Documentation First - Writing documentation while building forced clearer thinking about architecture decisions.</p> </li> <li> <p>VR Playtesting - More frequent on-device testing would have caught comfort and usability issues earlier.</p> </li> </ol>"},{"location":"future/project-status/#code-quality-assessment","title":"Code Quality Assessment","text":"<p>Based on self-review:</p> Category Grade Notes Architecture A Excellent layering, proper patterns Code Organization A- Great structure, minor namespace inconsistencies Documentation A XML docs, markdown documentation VR Best Practices A Non-allocating physics, pooling, update throttling Completeness C+ Many systems incomplete Ship Readiness C Core loop exists but incomplete"},{"location":"future/project-status/#if-development-resumed","title":"If Development Resumed","text":"<p>Priority order for completing the project:</p> <ol> <li>Game Flow Manager - Complete state machine to enable full gameplay loop</li> <li>Pause System - Critical for VR usability</li> <li>Results Screen - Provide player feedback after combat</li> <li>Player Health UI - Essential gameplay information</li> <li>Simplified Shop - Core progression mechanic</li> <li>Polish Pass - Combat feedback, animations, audio</li> </ol> <p>Estimated time to MVP: 4-6 weeks of focused development.</p>"},{"location":"future/project-status/#repository-contents","title":"Repository Contents","text":"<pre><code>Assets/\n\u251c\u2500\u2500 Scripts/           # C# source code (documented)\n\u251c\u2500\u2500 Data/              # ScriptableObject assets\n\u251c\u2500\u2500 Prefabs/           # Weapon, enemy, UI prefabs\n\u251c\u2500\u2500 Scenes/            # Bootstrapper, Hub, Arena scenes\n\u2514\u2500\u2500 UI/                # USS stylesheets\n\nDocs/                  # This documentation\n</code></pre> <p>The codebase is clean and well-documented, suitable for review or continuation by another developer.</p>"},{"location":"future/roadmap/","title":"Development Roadmap","text":"<p>Tasks that were planned for completion before the project was shelved in January 2026. Organized by priority and system.</p>"},{"location":"future/roadmap/#implementation-status","title":"Implementation Status","text":"System Completion Notes Weapon Grab/Select 90% XR integration complete, needs holster polish Shield Block/Bash 80% Core mechanics work, missing durability Melee Combat 75% Needs velocity-based damage, hit feedback Enemy Spawning 85% Wave system works, needs variety Enemy Navigation 70% Basic NavMesh, needs AI states Enemy Animations 40% Structure exists, animations needed Player Health 85% System complete, needs UI Player Levelling 60% Attributes exist, no progression curves Arena System 85% Waves work, needs modular setup Game Flow Manager 30% State enum exists, no logic Pause System 0% Not implemented Save System 85% Works, needs autosave triggers Loading Screens 50% Basic exists, needs polish UI - Menus 80% Start menu, settings complete UI - HUD 20% Enemy health bars only UI - Pause 0% Not implemented UI - Results 0% Not implemented UI - Wrist/Hand 0% Not implemented Shop System 0% Not implemented Economy/Upgrades 0% Not implemented Level Portals 30% Basic portal exists Roguelike Loop 10% Meta progression data exists"},{"location":"future/roadmap/#week-1-core-systems-foundation","title":"Week 1: Core Systems Foundation","text":"<p>Goal: Establish working game loop from hub to arena and back.</p>"},{"location":"future/roadmap/#game-flow-manager","title":"Game Flow Manager","text":"Task Priority Estimate Implement GameFlowManager state machine Critical 4h Add state transition methods Critical 2h Create GameStateEventChannel Critical 1h Integrate with scene loading High 2h Add pause state handling High 2h"},{"location":"future/roadmap/#pause-system","title":"Pause System","text":"Task Priority Estimate Create pause input binding High 1h Implement custom time management High 2h Create PausePanelView High 2h Create PausePanelHost High 1h Create PauseController High 2h"},{"location":"future/roadmap/#player-health-ui","title":"Player Health UI","text":"Task Priority Estimate Create PlayerHealthView High 2h Create PlayerHealthHost High 1h Position in VR space High 1h Add damage flash effect Medium 1h"},{"location":"future/roadmap/#week-2-arena-and-combat-polish","title":"Week 2: Arena and Combat Polish","text":"<p>Goal: Complete arena experience with proper enemy behavior.</p>"},{"location":"future/roadmap/#modular-arena-setup","title":"Modular Arena Setup","text":"Task Priority Estimate Extend ArenaData configuration High 2h Create ArenaLoader High 3h Implement spawn point initialization High 2h Add arena-specific wave configs High 2h Create arena completion detection High 2h Implement victory/defeat transitions High 2h"},{"location":"future/roadmap/#enemy-navigation-improvements","title":"Enemy Navigation Improvements","text":"Task Priority Estimate Implement EnemyAI state machine High 3h Add Idle/Patrol state Medium 1h Add Chase state High 2h Add Attack state High 2h Add Stagger state Medium 1h"},{"location":"future/roadmap/#improved-melee-combat","title":"Improved Melee Combat","text":"Task Priority Estimate Track weapon velocity High 2h Calculate velocity-based damage High 1h Set minimum velocity threshold High 1h Add hit stop effect Medium 2h Improve haptic feedback Medium 1h"},{"location":"future/roadmap/#week-3-user-interface","title":"Week 3: User Interface","text":"<p>Goal: Complete all in-game UI panels.</p>"},{"location":"future/roadmap/#arena-hud","title":"Arena HUD","text":"Task Priority Estimate Create ArenaHUDView High 2h Add wave counter High 1h Add enemies remaining High 1h Add elapsed time Medium 1h Position in VR space High 1h"},{"location":"future/roadmap/#arena-results-panel","title":"Arena Results Panel","text":"Task Priority Estimate Create ArenaResultsView High 3h Display final score High 1h Display gold/XP earned High 1h Add star rating Medium 2h Add continue button High 1h"},{"location":"future/roadmap/#week-4-economy-and-progression","title":"Week 4: Economy and Progression","text":"<p>Goal: Implement shop, upgrades, and meta-progression.</p>"},{"location":"future/roadmap/#shop-system","title":"Shop System","text":"Task Priority Estimate Create ShopItemData High 1h Create ShopDatabase High 1h Create ShopPanelView High 3h Create ShopController High 2h Implement purchase validation High 1h"},{"location":"future/roadmap/#player-levelling","title":"Player Levelling","text":"Task Priority Estimate Define XP threshold formula High 1h Create LevelProgressionData High 1h Implement level-up check High 2h Apply stat bonuses High 2h"},{"location":"future/roadmap/#backlog","title":"Backlog","text":"<p>Lower priority items planned for post-MVP:</p> <ul> <li>Leaderboard system</li> <li>Save slots UI</li> <li>Boss unique attack patterns</li> <li>Environmental hazards</li> <li>Combo system</li> <li>Achievement system</li> <li>Tutorial arena</li> </ul>"},{"location":"future/roadmap/#definition-of-done","title":"Definition of Done","text":"<p>A feature was considered complete when:</p> <ol> <li>Works correctly on Quest 2 device</li> <li>Maintains 72+ FPS</li> <li>Events properly subscribed/unsubscribed</li> <li>Pooled objects returned correctly</li> <li>Data saved/loaded correctly</li> <li>UI readable at VR distances</li> <li>Haptic feedback where appropriate</li> <li>No console errors or warnings</li> </ol>"},{"location":"systems/enemies/","title":"Enemy System","text":"<p>Modular enemy system with component-based architecture, object pooling, and data-driven configuration.</p>"},{"location":"systems/enemies/#architecture","title":"Architecture","text":"<pre><code>EnemyData (ScriptableObject)\n    \u2502\n    \u251c\u2500\u2500 EnemyDatabase (lookup)\n    \u2502\n    \u2514\u2500\u2500 EnemyController (MonoBehaviour coordinator)\n            \u2502\n            \u251c\u2500\u2500 EnemyHealth (damage, death)\n            \u251c\u2500\u2500 EnemyMovement (NavMesh navigation)\n            \u251c\u2500\u2500 EnemyAnimator (animation states)\n            \u251c\u2500\u2500 EnemyAttack (combat behavior)\n            \u2514\u2500\u2500 EnemyId (unique identifier)\n</code></pre>"},{"location":"systems/enemies/#enemydata","title":"EnemyData","text":"<p>ScriptableObject defining enemy configuration.</p> <pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Characters/Enemy Data\")]\npublic class EnemyData : ScriptableObject\n{\n    [Header(\"Identity\")]\n    public string enemyId;\n    public GameObject prefab;\n\n    [Header(\"Stats\")]\n    public int maxHealth;\n    public float moveSpeed;\n\n    [Header(\"Combat\")]\n    public WeaponData weapon;\n\n    [Header(\"Audio\")]\n    public WorldAudioData[] ambientSfx;\n    public WorldAudioData[] hitSfx;\n    public WorldAudioData[] deathSfx;\n\n    [Header(\"Effects\")]\n    public ParticleData deathVFX;\n\n    public WorldAudioData GetHitSfx()\n    {\n        if (hitSfx == null || hitSfx.Length == 0) return null;\n        return hitSfx[Random.Range(0, hitSfx.Length)];\n    }\n\n    public WorldAudioData GetDeathSfx()\n    {\n        if (deathSfx == null || deathSfx.Length == 0) return null;\n        return deathSfx[Random.Range(0, deathSfx.Length)];\n    }\n}\n</code></pre>"},{"location":"systems/enemies/#enemycontroller","title":"EnemyController","text":"<p>Main coordinator that manages all enemy components.</p> <pre><code>public class EnemyController : MonoBehaviour\n{\n    [SerializeField] private EnemyMovement movement;\n    [SerializeField] private EnemyAnimator animator;\n    [SerializeField] private EnemyHealth health;\n    [SerializeField] private EnemyAttack attack;\n    [SerializeField] private EnemyId enemyId;\n\n    private EnemyData _data;\n\n    public EnemyData Data =&gt; _data;\n    public EnemyMovement Movement =&gt; movement;\n    public EnemyAnimator Animator =&gt; animator;\n    public EnemyHealth Health =&gt; health;\n\n    public event Action OnDeath;\n\n    public void Initialize(EnemyData data)\n    {\n        _data = data;\n        health.Initialize(data.maxHealth);\n        movement.SetSpeed(data.moveSpeed);\n        attack.SetWeapon(data.weapon);\n    }\n\n    public void HandleEnemyDeath()\n    {\n        OnDeath?.Invoke();\n        SpawnDeathEffects();\n        GameEvents.OnEnemyDespawned.Raise(this);\n        ReturnToPool();\n    }\n\n    private void ReturnToPool()\n    {\n        GamePoolManager.Instance.ReturnEnemyPrefab(_data, gameObject);\n    }\n}\n</code></pre>"},{"location":"systems/enemies/#enemyhealth","title":"EnemyHealth","text":"<p>Health component implementing IDamageable.</p> <pre><code>public class EnemyHealth : HealthComponent\n{\n    [SerializeField] private EnemyHealthBar healthBar;\n    [SerializeField] private EnemyAnimator animator;\n\n    private EnemyData _data;\n\n    public float HealthBarValue =&gt; (float)CurrentHealth / MaxHealth;\n\n    public override void TakeDamage(int damage)\n    {\n        base.TakeDamage(damage);\n\n        healthBar?.UpdateValue(HealthBarValue);\n        animator?.PlayHitReaction();\n        PlayHitSound();\n\n        if (CurrentHealth &lt;= 0)\n        {\n            GetComponent&lt;EnemyController&gt;().HandleEnemyDeath();\n        }\n    }\n\n    private void PlayHitSound()\n    {\n        var sfx = _data?.GetHitSfx();\n        if (sfx != null)\n        {\n            GamePoolManager.Instance.GetWorldAudioPrefab(sfx, transform.position);\n        }\n    }\n}\n</code></pre>"},{"location":"systems/enemies/#enemymovement","title":"EnemyMovement","text":"<p>NavMesh-based navigation.</p> <pre><code>public class EnemyMovement : MonoBehaviour\n{\n    [SerializeField] private NavMeshAgent agent;\n    [SerializeField] private float pathUpdateInterval = 0.2f;\n\n    private Transform _target;\n    private float _lastPathUpdate;\n\n    public void SetTarget(Transform target)\n    {\n        _target = target;\n    }\n\n    public void SetSpeed(float speed)\n    {\n        agent.speed = speed;\n    }\n\n    private void Update()\n    {\n        if (_target == null) return;\n\n        if (Time.time &gt;= _lastPathUpdate + pathUpdateInterval)\n        {\n            _lastPathUpdate = Time.time;\n            agent.SetDestination(_target.position);\n        }\n    }\n}\n</code></pre>"},{"location":"systems/enemies/#enemyanimator","title":"EnemyAnimator","text":"<p>Animation state management.</p> <pre><code>public class EnemyAnimator : MonoBehaviour\n{\n    [SerializeField] private Animator animator;\n\n    private static readonly int IsMoving = Animator.StringToHash(\"IsMoving\");\n    private static readonly int Attack = Animator.StringToHash(\"Attack\");\n    private static readonly int Hit = Animator.StringToHash(\"Hit\");\n    private static readonly int Death = Animator.StringToHash(\"Death\");\n\n    public void SetMoving(bool moving)\n    {\n        animator.SetBool(IsMoving, moving);\n    }\n\n    public void PlayAttack()\n    {\n        animator.SetTrigger(Attack);\n    }\n\n    public void PlayHitReaction()\n    {\n        animator.SetTrigger(Hit);\n    }\n\n    public void PlayDeath()\n    {\n        animator.SetTrigger(Death);\n    }\n}\n</code></pre>"},{"location":"systems/enemies/#pooling-integration","title":"Pooling Integration","text":"<p>Enemies are spawned and returned via GamePoolManager.</p> <pre><code>// Spawn enemy\nvar enemyData = GameDatabases.EnemyDatabase.Get(enemyId);\nvar instance = GamePoolManager.Instance.GetEnemyPrefab(enemyData, spawnPoint.position, spawnPoint.rotation);\nvar controller = instance.GetComponent&lt;EnemyController&gt;();\ncontroller.Initialize(enemyData);\n\n// Return enemy (called on death)\nGamePoolManager.Instance.ReturnEnemyPrefab(enemyData, gameObject);\n</code></pre>"},{"location":"systems/enemies/#event-integration","title":"Event Integration","text":"<p>Enemies communicate through event channels.</p> <pre><code>// Raised when enemy spawns\nGameEvents.OnEnemySpawned.Raise(controller);\n\n// Raised when enemy dies\nGameEvents.OnEnemyDespawned.Raise(controller);\n\n// Subscribers\nwaveManager.Subscribe(GameEvents.OnEnemyDespawned, HandleEnemyDeath);\nscoreManager.Subscribe(GameEvents.OnEnemyDespawned, AwardPoints);\n</code></pre>"},{"location":"systems/enemies/#wave-spawning","title":"Wave Spawning","text":"<p>WaveSpawner creates enemies during arena combat.</p> <pre><code>public class WaveSpawner : MonoBehaviour\n{\n    [SerializeField] private Transform[] spawnPoints;\n    [SerializeField] private int maxActiveEnemies = 8;\n\n    public void SpawnWave(WaveData wave)\n    {\n        StartCoroutine(SpawnWaveCoroutine(wave));\n    }\n\n    private IEnumerator SpawnWaveCoroutine(WaveData wave)\n    {\n        foreach (var spawn in wave.spawns)\n        {\n            while (activeEnemies &gt;= maxActiveEnemies)\n                yield return null;\n\n            SpawnEnemy(spawn.enemyData, GetRandomSpawnPoint());\n            yield return new WaitForSeconds(spawn.delay);\n        }\n    }\n}\n</code></pre>"},{"location":"systems/enemies/#creating-new-enemies","title":"Creating New Enemies","text":"<ol> <li>Create EnemyData asset via Create menu</li> <li>Configure stats, audio, effects</li> <li>Create enemy prefab with:</li> <li>EnemyController</li> <li>EnemyHealth</li> <li>EnemyMovement (with NavMeshAgent)</li> <li>EnemyAnimator (with Animator)</li> <li>EnemyAttack</li> <li>Collider for damage detection</li> <li>Assign prefab to EnemyData</li> <li>Add to EnemyDatabase</li> <li>Add to wave configurations</li> </ol>"},{"location":"systems/save-data/","title":"Save Data System","text":"<p>Player persistence using ESave for JSON-based save files with event-driven architecture.</p>"},{"location":"systems/save-data/#architecture","title":"Architecture","text":"<pre><code>SaveFileManagerBase (abstract)\n    \u2502\n    \u251c\u2500\u2500 PlayerSaveFileManager (progression data)\n    \u2502\n    \u2514\u2500\u2500 SettingsSaveFileManager (user preferences)\n</code></pre>"},{"location":"systems/save-data/#savefilemanagerbase","title":"SaveFileManagerBase","text":"<p>Abstract base class for save file managers.</p> <pre><code>public abstract class SaveFileManagerBase : MonoBehaviour\n{\n    protected SaveFile saveFile;\n\n    protected virtual void Awake()\n    {\n        saveFile = GetComponent&lt;SaveFile&gt;();\n    }\n\n    protected abstract void HandleSaveRequested();\n    protected abstract void HandleSaveCompleted();\n    protected abstract void HandleLoadRequested();\n    protected abstract void HandleLoadCompleted();\n}\n</code></pre>"},{"location":"systems/save-data/#playersavefilemanager","title":"PlayerSaveFileManager","text":"<p>Manages player progression persistence.</p> <pre><code>public class PlayerSaveFileManager : SaveFileManagerBase\n{\n    [SerializeField] private MetaProgressionData metaProgression;\n    [SerializeField] private VoidEventChannel onSaveRequested;\n    [SerializeField] private VoidEventChannel onSaveCompleted;\n    [SerializeField] private VoidEventChannel onLoadRequested;\n    [SerializeField] private VoidEventChannel onLoadCompleted;\n\n    private void OnEnable()\n    {\n        onSaveRequested.Subscribe(HandleSaveRequested);\n        onLoadRequested.Subscribe(HandleLoadRequested);\n    }\n\n    private void OnDisable()\n    {\n        onSaveRequested.Unsubscribe(HandleSaveRequested);\n        onLoadRequested.Unsubscribe(HandleLoadRequested);\n    }\n\n    protected override void HandleSaveRequested()\n    {\n        saveFile.AddOrUpdateData(GameConstants.MetaProgressionKey, metaProgression);\n        saveFile.Save();\n    }\n\n    protected override void HandleLoadRequested()\n    {\n        if (saveFile.HasData(GameConstants.MetaProgressionKey))\n        {\n            var loaded = saveFile.GetData&lt;MetaProgressionData&gt;(GameConstants.MetaProgressionKey);\n            // Apply loaded data to metaProgression\n        }\n        onLoadCompleted.Raise();\n    }\n}\n</code></pre>"},{"location":"systems/save-data/#metaprogressiondata","title":"MetaProgressionData","text":"<p>ScriptableObject storing player progression.</p> <pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Progression/Meta Progression\")]\npublic class MetaProgressionData : ScriptableObject\n{\n    [Header(\"Currency\")]\n    public int gold;\n    public int gems;\n\n    [Header(\"Experience\")]\n    public int experience;\n    public int level;\n\n    [Header(\"Multipliers\")]\n    public float expGainMultiplier = 1f;\n    public float goldGainMultiplier = 1f;\n    public float healthMultiplier = 1f;\n    public float armorMultiplier = 1f;\n\n    [Header(\"Unlocks\")]\n    public List&lt;string&gt; unlockedWeapons;\n    public List&lt;string&gt; unlockedArenas;\n    public List&lt;string&gt; purchasedUpgrades;\n}\n</code></pre>"},{"location":"systems/save-data/#save-keys","title":"Save Keys","text":"<p>All save keys are defined in GameConstants.</p> <pre><code>public static class GameConstants\n{\n    public const string MetaProgressionKey = \"MetaProgression\";\n    public const string PlayerGoldKey = \"PlayerGold\";\n    public const string PlayerExperienceKey = \"PlayerExperience\";\n    public const string PlayerLevelKey = \"PlayerLevel\";\n    public const string SettingsKey = \"Settings\";\n}\n</code></pre>"},{"location":"systems/save-data/#save-triggers","title":"Save Triggers","text":""},{"location":"systems/save-data/#manual-save","title":"Manual Save","text":"<pre><code>GameEvents.OnSaveRequested.Raise();\n</code></pre>"},{"location":"systems/save-data/#automatic-save-points","title":"Automatic Save Points","text":"<p>Save occurs on:</p> <ul> <li>Arena completion (victory or defeat)</li> <li>Returning to hub</li> <li>Purchasing upgrades</li> <li>Application pause (headset removed)</li> </ul> <pre><code>private void OnApplicationPause(bool paused)\n{\n    if (paused)\n    {\n        GameEvents.OnSaveRequested.Raise();\n    }\n}\n</code></pre>"},{"location":"systems/save-data/#settings-save","title":"Settings Save","text":"<p>SettingsSaveFileManager handles user preferences separately from progression.</p> <pre><code>public class SettingsSaveFileManager : SaveFileManagerBase\n{\n    [SerializeField] private FloatAttribute masterVolume;\n    [SerializeField] private FloatAttribute musicVolume;\n    [SerializeField] private FloatAttribute sfxVolume;\n\n    protected override void HandleSaveRequested()\n    {\n        var settings = new SettingsData\n        {\n            masterVolume = masterVolume.Value,\n            musicVolume = musicVolume.Value,\n            sfxVolume = sfxVolume.Value\n        };\n\n        saveFile.AddOrUpdateData(GameConstants.SettingsKey, settings);\n        saveFile.Save();\n    }\n}\n</code></pre>"},{"location":"systems/save-data/#esave-api","title":"ESave API","text":"Method Purpose AddOrUpdateData(key, value) Store data by key GetData&lt;T&gt;(key) Retrieve typed data HasData(key) Check if key exists Save() Write to disk Load() Read from disk Delete(key) Remove specific key DeleteAll() Clear all data <p>File Locations:</p> <ul> <li>Windows: <code>%USERPROFILE%/AppData/LocalLow/[Company]/[Product]/</code></li> <li>Android: <code>/data/data/[package]/files/</code></li> </ul>"},{"location":"systems/save-data/#data-flow","title":"Data Flow","text":"<p>Save:</p> <ol> <li>Game event occurs (enemy killed, gold collected)</li> <li>PlayerAttributes updates IntAttribute values</li> <li>Event channels notify subscribers</li> <li>Save trigger fires (manual or automatic)</li> <li>SaveFileManager serializes data</li> <li>ESave writes to disk</li> </ol> <p>Load:</p> <ol> <li>Game starts or load requested</li> <li>SaveFileManager reads from ESave</li> <li>Data applied to ScriptableObjects/Attributes</li> <li>Event channels notify UI to refresh</li> </ol>"},{"location":"systems/save-data/#best-practices","title":"Best Practices","text":"Practice Reason Use constants for keys Prevents typos, enables refactoring Validate loaded data Handle missing or corrupted saves Save on significant events Don't lose player progress Separate settings from progression Settings apply globally, progression per-save Handle save failures gracefully Disk full, permissions, etc."},{"location":"systems/user-interface/","title":"User Interface System","text":"<p>The UI system uses Unity's UI Toolkit with a Factory-View-Host-Controller architecture for clean separation of concerns and memory safety.</p>"},{"location":"systems/user-interface/#architecture","title":"Architecture","text":"<pre><code>Controller (game logic)\n    \u2502\n    \u25bc\nHost (MonoBehaviour lifecycle, animations)\n    \u2502\n    \u25bc\nView (UI element creation, layout)\n    \u2502\n    \u25bc\nFactory (element builders, styling)\n</code></pre>"},{"location":"systems/user-interface/#components","title":"Components","text":""},{"location":"systems/user-interface/#uitoolkitfactory","title":"UIToolkitFactory","text":"<p>Static factory class that creates pre-configured UI Toolkit elements with consistent styling and localization.</p> Method Returns Purpose CreateElement&lt;T&gt;() T Generic element with class names CreateContainer() VisualElement Styled container CreateButton() Button Localized button with click handler CreateLabel() Label Localized label CreateBoundLabel() Label Data-bound label (auto-updates) CreateSlider() Slider Range input with callback CreateToggle() Toggle Boolean input CreateDropdown() DropdownField Selection input CreateHealthBar() HealthBarElements Container, background, fill <p>Fluent Extensions:</p> <pre><code>var panel = UIToolkitFactory.CreateContainer()\n    .WithClasses(UIToolkitStyles.PanelBody)\n    .WithPadding(20)\n    .WithMargin(10)\n    .WithFlexGrow(1);\n</code></pre>"},{"location":"systems/user-interface/#basepanelview","title":"BasePanelView","text":"<p>Abstract base class for all UI views. Views define visual structure only.</p> <pre><code>public abstract class BasePanelView : IDisposable\n{\n    public VisualElement Container { get; protected set; }\n\n    protected abstract void GenerateUI(VisualElement root);\n\n    public virtual void Dispose()\n    {\n        Container?.Clear();\n        Container?.RemoveFromHierarchy();\n        Container = null;\n    }\n}\n</code></pre> <p>View Responsibilities:</p> <ul> <li>Create UI element hierarchy using Factory</li> <li>Expose elements as properties for Host binding</li> <li>Expose events for user interactions</li> <li>Implement Dispose for cleanup</li> </ul> <p>View Restrictions:</p> <ul> <li>No game logic</li> <li>No external event subscriptions</li> <li>No references to game systems</li> </ul>"},{"location":"systems/user-interface/#basepanelhost","title":"BasePanelHost","text":"<p>MonoBehaviour that manages View lifecycle and animations.</p> <pre><code>public abstract class BasePanelHost : MonoBehaviour\n{\n    [SerializeField] protected UIDocument uiDocument;\n    [SerializeField] protected StyleSheet styleSheet;\n\n    protected VisualElement ContentRoot;\n    private ITweenable[] _tweenables;\n\n    public abstract void Generate();\n\n    public virtual void Show()\n    {\n        foreach (var tween in _tweenables)\n            tween.Show();\n    }\n\n    public virtual void Hide()\n    {\n        foreach (var tween in _tweenables)\n            tween.Hide();\n    }\n\n    protected virtual void Dispose()\n    {\n        // Override to cleanup View\n    }\n\n    private void OnDisable() =&gt; Dispose();\n}\n</code></pre> <p>Host Responsibilities:</p> <ul> <li>Create and destroy Views</li> <li>Subscribe to View events</li> <li>Forward events to Controllers</li> <li>Manage show/hide animations via ITweenable</li> </ul>"},{"location":"systems/user-interface/#controllers","title":"Controllers","text":"<p>MonoBehaviours that handle game logic in response to UI events.</p> <pre><code>public class StartMenuController : MonoBehaviour\n{\n    [SerializeField] private StartMenuPanelHost menuHost;\n    [SerializeField] private SettingsPanelHost settingsHost;\n\n    private void OnEnable()\n    {\n        menuHost.Generate();\n        menuHost.OnPlayClicked += HandlePlay;\n        menuHost.OnSettingsClicked += HandleSettings;\n    }\n\n    private void OnDisable()\n    {\n        menuHost.OnPlayClicked -= HandlePlay;\n        menuHost.OnSettingsClicked -= HandleSettings;\n    }\n\n    private void HandlePlay()\n    {\n        SceneManager.LoadScene(GameConstants.Hub);\n    }\n\n    private void HandleSettings()\n    {\n        settingsHost.Generate();\n        settingsHost.Show();\n    }\n}\n</code></pre>"},{"location":"systems/user-interface/#data-binding","title":"Data Binding","text":""},{"location":"systems/user-interface/#automatic-binding","title":"Automatic Binding","text":"<p>Use CreateBoundLabel for labels that auto-update when data changes.</p> <pre><code>var goldLabel = UIToolkitFactory.CreateBoundLabel(\n    playerGold,\n    nameof(playerGold.Value),\n    UIToolkitStyles.StatValue\n);\n</code></pre>"},{"location":"systems/user-interface/#manual-binding","title":"Manual Binding","text":"<p>For complex formatting or conditional display.</p> <pre><code>private void BindData()\n{\n    playerGold.OnValueChanged += UpdateGoldDisplay;\n    UpdateGoldDisplay(playerGold.Value);\n}\n\nprivate void UnbindData()\n{\n    playerGold.OnValueChanged -= UpdateGoldDisplay;\n}\n\nprivate void UpdateGoldDisplay(int value)\n{\n    goldLabel.text = value &gt;= 1000 ? $\"{value/1000f:F1}K\" : value.ToString();\n}\n</code></pre>"},{"location":"systems/user-interface/#event-handling-pattern","title":"Event Handling Pattern","text":"<p>Store callback references for proper unsubscription.</p> <pre><code>public class AudioSettingsPanelHost : BasePanelHost\n{\n    private Action _unbindAll;\n\n    public void BindViewSliders(AudioSettingsPanelView view)\n    {\n        _unbindAll = () =&gt; { };\n        _unbindAll += BindSlider(view.MasterVolume, masterVolume);\n        _unbindAll += BindSlider(view.MusicVolume, musicVolume);\n    }\n\n    private static Action BindSlider(Slider slider, FloatAttribute attribute)\n    {\n        EventCallback&lt;ChangeEvent&lt;float&gt;&gt; callback = e =&gt; attribute.Value = e.newValue;\n        slider.RegisterValueChangedCallback(callback);\n\n        return () =&gt; slider.UnregisterValueChangedCallback(callback);\n    }\n\n    protected override void Dispose()\n    {\n        _unbindAll?.Invoke();\n        _unbindAll = null;\n        base.Dispose();\n    }\n}\n</code></pre>"},{"location":"systems/user-interface/#animation-system","title":"Animation System","text":"<p>Hosts use ITweenable components for show/hide animations.</p> <pre><code>public class TweenTransform : MonoBehaviour, ITweenable\n{\n    [SerializeField] private float displayScale = 1f;\n    [SerializeField] private float displayStartScale = 0.75f;\n    [SerializeField] private float duration = 0.25f;\n\n    public void Show()\n    {\n        transform.localScale = Vector3.one * displayStartScale;\n        // Animate to displayScale with OutCubic easing\n    }\n\n    public void Hide()\n    {\n        // Animate to zero with InCubic easing\n    }\n}\n</code></pre>"},{"location":"systems/user-interface/#existing-panels","title":"Existing Panels","text":"Panel View Host Status Start Menu StartMenuPanelView StartMenuPanelHost Complete Settings SettingsPanelView SettingsPanelHost Complete Audio Settings AudioSettingsPanelView AudioSettingsPanelHost Complete Video Settings VideoSettingsPanelView VideoSettingsPanelHost Complete Loading Screen LoadingScreenView LoadingScreenHost Complete Arena Intro ArenaIntroView ArenaIntroHost Complete Boss Intro BossIntroView BossIntroHost Complete Enemy Health Bar - EnemyHealthBar Complete"},{"location":"systems/user-interface/#memory-safety-rules","title":"Memory Safety Rules","text":"Rule Implementation Always dispose Views Call Dispose in Host.OnDisable Unsubscribe all events Use _unbindAll pattern or explicit unsubscribe No lambda event handlers Store callback references for unsubscription Null check in callbacks View may be disposed when callback fires Dispose before regenerate Call Dispose before creating new View"},{"location":"systems/weapons/","title":"Weapon System","text":"<p>Data-driven weapon system for VR combat with XR Interaction Toolkit integration, modular modifiers, and object pooling.</p>"},{"location":"systems/weapons/#architecture","title":"Architecture","text":"<pre><code>WeaponData (ScriptableObject)\n    \u2502\n    \u251c\u2500\u2500 WeaponDatabase (lookup)\n    \u2502\n    \u2514\u2500\u2500 XRWeaponBase (MonoBehaviour)\n            \u2502\n            \u251c\u2500\u2500 MeleeXRWeapon\n            \u251c\u2500\u2500 BowXRWeapon\n            \u251c\u2500\u2500 StaffXRWeapon\n            \u251c\u2500\u2500 ShieldXRWeapon\n            \u2514\u2500\u2500 ThrowableXRWeapon\n</code></pre>"},{"location":"systems/weapons/#weapondata","title":"WeaponData","text":"<p>ScriptableObject defining all weapon properties.</p> <pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Weapons/Weapon Data\")]\npublic class WeaponData : ScriptableObject\n{\n    [Header(\"Identity\")]\n    public string weaponID;\n    public string displayName;\n    public WeaponCategory category;\n    public WeaponRarity rarity;\n    public GameObject weaponPrefab;\n    public Sprite icon;\n\n    [Header(\"Stats\")]\n    public int baseDamage;\n    public float attackCooldown;\n    public float range;\n    public int staminaCost;\n    public DamageType damageType;\n\n    [Header(\"VR Settings\")]\n    public Vector3 gripPositionOffset;\n    public Vector3 gripRotationOffset;\n    public float hapticStrength;\n    public float hapticDuration;\n\n    [Header(\"Effects\")]\n    public WorldAudioData[] hitSfx;\n    public ParticleData hitVFX;\n    public GameObject trailEffect;\n    public Color trailColor;\n\n    [Header(\"Modifiers\")]\n    public List&lt;WeaponModifierData&gt; activeModifiers;\n\n    [Header(\"Economy\")]\n    public int purchasePrice;\n    public int sellPrice;\n    public bool isPurchasable;\n\n    public int TotalDamage\n    {\n        get\n        {\n            int total = baseDamage;\n            foreach (var mod in activeModifiers)\n                total += mod.damageBonus;\n            return total;\n        }\n    }\n}\n</code></pre>"},{"location":"systems/weapons/#weaponmodifierdata","title":"WeaponModifierData","text":"<p>Stackable modifiers that enhance weapons.</p> <pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Weapons/Weapon Modifier\")]\npublic class WeaponModifierData : ScriptableObject\n{\n    [Header(\"Identity\")]\n    public string modifierId;\n    public string modifierName;\n\n    [Header(\"Damage\")]\n    public DamageType addedDamageType;\n    public int damageBonus;\n    public float damageMultiplier;\n\n    [Header(\"Speed\")]\n    public float speedBonus;\n    public float cooldownReduction;\n\n    [Header(\"Visual\")]\n    public GameObject visualEffect;\n    public Color trailColor;\n    public Color glowColor;\n    public float glowIntensity;\n\n    [Header(\"Hit Effects\")]\n    public ParticleData onHitVFX;\n    public WorldAudioData onHitSfx;\n}\n</code></pre>"},{"location":"systems/weapons/#xrweaponbase","title":"XRWeaponBase","text":"<p>Abstract base class for all VR weapons.</p> <pre><code>public abstract class XRWeaponBase : MonoBehaviour\n{\n    [SerializeField] protected WeaponData data;\n\n    protected XRGrabInteractable grabInteractable;\n    protected Rigidbody rb;\n\n    private float _lastAttackTime;\n    private bool _isHeld;\n\n    public WeaponData Data =&gt; data;\n    public bool IsActive =&gt; _isHeld;\n    public bool CanAttack =&gt; Time.time &gt;= _lastAttackTime + data.attackCooldown;\n\n    protected virtual void OnGrab(SelectEnterEventArgs args)\n    {\n        _isHeld = true;\n    }\n\n    protected virtual void OnRelease(SelectExitEventArgs args)\n    {\n        _isHeld = false;\n    }\n\n    public virtual void ProcessHit(IDamageable target, Vector3 hitPoint, Quaternion hitRotation)\n    {\n        if (!CanAttack) return;\n\n        _lastAttackTime = Time.time;\n\n        int damage = CalculateDamage();\n        target.TakeDamage(damage);\n\n        SpawnHitEffects(hitPoint, hitRotation);\n        SendHapticFeedback();\n    }\n\n    protected int CalculateDamage()\n    {\n        return data.TotalDamage;\n    }\n}\n</code></pre>"},{"location":"systems/weapons/#weapon-types","title":"Weapon Types","text":""},{"location":"systems/weapons/#meleexrweapon","title":"MeleeXRWeapon","text":"<p>Close-range weapons using physics-based hit detection.</p> <ul> <li>Uses WeaponHitbox for collision detection</li> <li>Damage scales with swing velocity</li> <li>Haptic feedback on hit</li> </ul>"},{"location":"systems/weapons/#bowxrweapon","title":"BowXRWeapon","text":"<p>Ranged weapon with projectile spawning.</p> <ul> <li>Pull string to draw</li> <li>Release to fire arrow projectile</li> <li>Projectiles pooled via GamePoolManager</li> </ul>"},{"location":"systems/weapons/#staffxrweapon","title":"StaffXRWeapon","text":"<p>Magic weapon with spell casting.</p> <ul> <li>Primary: Projectile spell</li> <li>Secondary: Area effect</li> </ul>"},{"location":"systems/weapons/#shieldxrweapon","title":"ShieldXRWeapon","text":"<p>Defensive weapon with blocking and bashing.</p> <pre><code>public class ShieldXRWeapon : XRWeaponBase\n{\n    [Header(\"Block Settings\")]\n    public float blockAngle = 60f;\n    public float damageReduction = 0.75f;\n\n    [Header(\"Parry Settings\")]\n    public float parryWindow = 0.2f;\n\n    [Header(\"Bash Settings\")]\n    public float bashCooldown = 1f;\n    public float bashDamage = 10f;\n    public float bashForce = 500f;\n    public float bashRadius = 1.5f;\n\n    public bool TryBlock(Vector3 attackDirection, out float reduction)\n    {\n        float angle = Vector3.Angle(transform.forward, -attackDirection);\n        if (angle &lt;= blockAngle)\n        {\n            reduction = damageReduction;\n            return true;\n        }\n        reduction = 0;\n        return false;\n    }\n}\n</code></pre>"},{"location":"systems/weapons/#throwablexrweapon","title":"ThrowableXRWeapon","text":"<p>Throwable weapons that return to pool on impact.</p> <ul> <li>Thrown on release</li> <li>Returns to pool after hit or timeout</li> <li>Can be recalled (boomerang behavior)</li> </ul>"},{"location":"systems/weapons/#weaponhitbox","title":"WeaponHitbox","text":"<p>Component for melee damage detection.</p> <pre><code>public class WeaponHitbox : MonoBehaviour\n{\n    private XRWeaponBase _weapon;\n\n    private void OnTriggerEnter(Collider other)\n    {\n        if (!_weapon.IsActive) return;\n\n        if (other.TryGetComponent&lt;IDamageable&gt;(out var target))\n        {\n            _weapon.ProcessHit(target, other.ClosestPoint(transform.position), transform.rotation);\n        }\n    }\n}\n</code></pre>"},{"location":"systems/weapons/#enums","title":"Enums","text":"<pre><code>public enum WeaponCategory\n{\n    Sword,\n    Bow,\n    Staff,\n    Axe,\n    Dagger,\n    Shield,\n    Throwable\n}\n\npublic enum WeaponRarity\n{\n    Common,\n    Uncommon,\n    Rare,\n    Epic,\n    Legendary\n}\n\npublic enum DamageType\n{\n    Physical,\n    Fire,\n    Frost,\n    Lightning,\n    Arcane,\n    Poison\n}\n</code></pre>"},{"location":"systems/weapons/#pooling-integration","title":"Pooling Integration","text":"<p>Weapons spawn effects through GamePoolManager.</p> <pre><code>// Spawn hit VFX\nGamePoolManager.Instance.GetParticlePrefab(data.hitVFX, hitPoint, hitRotation);\n\n// Spawn hit audio\nvar sfx = data.hitSfx[Random.Range(0, data.hitSfx.Length)];\nGamePoolManager.Instance.GetWorldAudioPrefab(sfx, hitPoint);\n</code></pre>"},{"location":"systems/weapons/#holster-system","title":"Holster System","text":"<p>WeaponHolsterController manages equipped weapons.</p> <pre><code>public class WeaponHolsterController : MonoBehaviour\n{\n    [SerializeField] private Transform leftHolster;\n    [SerializeField] private Transform rightHolster;\n    [SerializeField] private Transform backHolster;\n\n    public void EquipWeapon(WeaponData weapon, HolsterSlot slot);\n    public void UnequipWeapon(HolsterSlot slot);\n    public WeaponData GetEquippedWeapon(HolsterSlot slot);\n}\n</code></pre>"},{"location":"systems/weapons/#creating-new-weapons","title":"Creating New Weapons","text":"<ol> <li>Create WeaponData asset via Create menu</li> <li>Configure stats, VR settings, effects</li> <li>Create weapon prefab with:</li> <li>XRGrabInteractable</li> <li>Rigidbody</li> <li>Weapon component (MeleeXRWeapon, etc.)</li> <li>WeaponHitbox on striking surface</li> <li>Assign prefab to WeaponData</li> <li>Add to WeaponDatabase</li> </ol>"},{"location":"vr/bootstrap-loading/","title":"Bootstrap and Loading","text":"<p>Game initialization, loading screens, and async scene management for VR.</p>"},{"location":"vr/bootstrap-loading/#why-bootstrap-matters","title":"Why Bootstrap Matters","text":"<p>In VR, any frame drop causes:</p> <ul> <li>Tracking freeze</li> <li>Disorientation  </li> <li>Motion sickness</li> </ul> <p>Bootstrap ensures all systems initialize before gameplay, with loading screens covering any heavy operations.</p>"},{"location":"vr/bootstrap-loading/#scene-structure","title":"Scene Structure","text":"<pre><code>Build Index 0: Bootstrapper\n  - GameBootstrap (events, databases)\n  - Persistent managers\n  - Loading screen\n\nBuild Index 1: Hub\n  - Player spawn\n  - Shop/armory\n  - Arena portals\n\nBuild Index 2+: Arenas\n  - Loaded additively\n  - Unloaded on exit\n</code></pre>"},{"location":"vr/bootstrap-loading/#initialization-sequence","title":"Initialization Sequence","text":""},{"location":"vr/bootstrap-loading/#phase-1-core-systems-synchronous","title":"Phase 1: Core Systems (Synchronous)","text":"<ol> <li>Create singleton managers</li> <li>Initialize event channels (GameEvents)</li> <li>Load databases (GameDatabases)</li> <li>Initialize audio system</li> </ol>"},{"location":"vr/bootstrap-loading/#phase-2-user-data-may-be-async","title":"Phase 2: User Data (May be Async)","text":"<ol> <li>Load player settings</li> <li>Apply graphics/audio settings</li> <li>Load or create save file</li> <li>Initialize player attributes</li> </ol>"},{"location":"vr/bootstrap-loading/#phase-3-pre-loading-async-with-loading-screen","title":"Phase 3: Pre-loading (Async with Loading Screen)","text":"<ol> <li>Pre-warm object pools</li> <li>Load common assets</li> <li>Initialize XR systems</li> </ol>"},{"location":"vr/bootstrap-loading/#phase-4-ready","title":"Phase 4: Ready","text":"<ol> <li>Hide loading screen</li> <li>Enable input</li> <li>Start gameplay</li> </ol>"},{"location":"vr/bootstrap-loading/#gamebootstrap","title":"GameBootstrap","text":"<p>Initializes all static references on startup.</p> <pre><code>public class GameBootstrap : MonoBehaviour\n{\n    [SerializeField] private VoidEventChannel onGameSaved;\n    [SerializeField] private IntEventChannel onGoldChanged;\n    [SerializeField] private WeaponDatabase weaponDatabase;\n    [SerializeField] private EnemyDatabase enemyDatabase;\n\n    public void Initialize()\n    {\n        // Assign to static classes\n        GameEvents.OnGameSaved = onGameSaved;\n        GameEvents.OnGoldChanged = onGoldChanged;\n        GameDatabases.WeaponDatabase = weaponDatabase;\n        GameDatabases.EnemyDatabase = enemyDatabase;\n\n        // Build lookup dictionaries\n        weaponDatabase.BuildLookup();\n        enemyDatabase.BuildLookup();\n    }\n}\n</code></pre>"},{"location":"vr/bootstrap-loading/#loading-screen-requirements","title":"Loading Screen Requirements","text":""},{"location":"vr/bootstrap-loading/#must-have","title":"Must Have","text":"<ul> <li>Always visible (never black screen)</li> <li>Static or minimal movement</li> <li>Progress indicator</li> <li>Comfortable viewing distance</li> </ul>"},{"location":"vr/bootstrap-loading/#should-have","title":"Should Have","text":"<ul> <li>Fade transitions</li> <li>Loading tips</li> <li>Cancel option for long loads</li> </ul>"},{"location":"vr/bootstrap-loading/#avoid","title":"Avoid","text":"<ul> <li>Complex 3D scenes</li> <li>Rapid animations</li> <li>Small text</li> </ul>"},{"location":"vr/bootstrap-loading/#async-scene-loading","title":"Async Scene Loading","text":""},{"location":"vr/bootstrap-loading/#basic-pattern","title":"Basic Pattern","text":"<pre><code>public IEnumerator LoadSceneAsync(string sceneName)\n{\n    loadingScreen.Show();\n    loadingScreen.UpdateProgress(0, \"Loading...\");\n\n    yield return SceneManager.UnloadSceneAsync(currentScene);\n    yield return Resources.UnloadUnusedAssets();\n\n    var operation = SceneManager.LoadSceneAsync(sceneName, LoadSceneMode.Additive);\n    operation.allowSceneActivation = false;\n\n    while (operation.progress &lt; 0.9f)\n    {\n        loadingScreen.UpdateProgress(operation.progress, \"Loading...\");\n        yield return null;\n    }\n\n    operation.allowSceneActivation = true;\n    yield return operation;\n\n    loadingScreen.UpdateProgress(1, \"Ready!\");\n    yield return loadingScreen.FadeOut(0.3f);\n}\n</code></pre>"},{"location":"vr/bootstrap-loading/#key-points","title":"Key Points","text":"<ul> <li>Never block main thread</li> <li>Use allowSceneActivation for controlled activation</li> <li>Yield between heavy operations</li> <li>Show progress to player</li> </ul>"},{"location":"vr/bootstrap-loading/#pool-pre-warming","title":"Pool Pre-warming","text":"<p>Instantiate pooled objects during loading, not gameplay.</p> <pre><code>public IEnumerator PrewarmPools()\n{\n    int batchSize = 5;\n    int instantiated = 0;\n\n    foreach (var config in poolConfigs)\n    {\n        for (int i = 0; i &lt; config.count; i++)\n        {\n            Instantiate(config.prefab).SetActive(false);\n            instantiated++;\n\n            if (instantiated &gt;= batchSize)\n            {\n                instantiated = 0;\n                yield return null;\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"vr/bootstrap-loading/#persistent-objects","title":"Persistent Objects","text":"<p>Objects that survive scene loads:</p> <pre><code>void Awake()\n{\n    DontDestroyOnLoad(gameObject);\n}\n</code></pre> <p>Typical persistent objects:</p> <ul> <li>GameBootstrap</li> <li>AudioManager</li> <li>SaveDataManager</li> <li>XR Rig</li> <li>LoadingScreen</li> </ul>"},{"location":"vr/bootstrap-loading/#best-practices","title":"Best Practices","text":"Practice Reason Show loading for operations over 100ms Player knows game is responding Pre-warm pools during loading No instantiation spikes in gameplay Fade transitions Hide loading artifacts Keep XR Rig persistent Never lose tracking Test on device Editor performance differs"},{"location":"vr/comfort/","title":"VR Comfort Settings","text":"<p>Player comfort options for accessible VR gameplay.</p>"},{"location":"vr/comfort/#overview","title":"Overview","text":"<p>VR comfort varies significantly between players. Providing options allows more players to enjoy the game without motion sickness or discomfort.</p>"},{"location":"vr/comfort/#locomotion-options","title":"Locomotion Options","text":"Type Description Comfort Level Teleport Point and blink High Dash Quick move with brief fade Medium Smooth Continuous movement Low"},{"location":"vr/comfort/#teleport-implementation","title":"Teleport Implementation","text":"<pre><code>public class TeleportLocomotion : MonoBehaviour\n{\n    [SerializeField] private XRRayInteractor rayInteractor;\n    [SerializeField] private TeleportationProvider teleportProvider;\n\n    public void OnTeleportActivate(InputAction.CallbackContext context)\n    {\n        if (rayInteractor.TryGetCurrent3DRaycastHit(out var hit))\n        {\n            var request = new TeleportRequest\n            {\n                destinationPosition = hit.point,\n                destinationRotation = transform.rotation\n            };\n            teleportProvider.QueueTeleportRequest(request);\n        }\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#smooth-locomotion-with-vignette","title":"Smooth Locomotion with Vignette","text":"<pre><code>public class SmoothLocomotion : MonoBehaviour\n{\n    [SerializeField] private float moveSpeed = 2f;\n    [SerializeField] private TunnelingVignetteController vignette;\n\n    private void Update()\n    {\n        var input = moveAction.ReadValue&lt;Vector2&gt;();\n\n        if (input.magnitude &gt; 0.1f)\n        {\n            vignette.SetActive(true);\n            Move(input);\n        }\n        else\n        {\n            vignette.SetActive(false);\n        }\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#turning-options","title":"Turning Options","text":""},{"location":"vr/comfort/#snap-turn","title":"Snap Turn","text":"<p>Instant rotation by fixed degrees.</p> Preset Degrees Wide 45\u00b0 Normal 30\u00b0 Precise 15\u00b0 <pre><code>public class SnapTurnProvider : MonoBehaviour\n{\n    [SerializeField] private float turnAngle = 45f;\n    [SerializeField] private float debounceTime = 0.5f;\n\n    private float _lastTurnTime;\n\n    public void Turn(float direction)\n    {\n        if (Time.time - _lastTurnTime &lt; debounceTime) return;\n\n        var rotation = Quaternion.Euler(0, turnAngle * Mathf.Sign(direction), 0);\n        xrOrigin.RotateAroundCameraPosition(xrOrigin.transform.up, turnAngle * direction);\n        _lastTurnTime = Time.time;\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#smooth-turn","title":"Smooth Turn","text":"<p>Continuous rotation with variable speed.</p> <pre><code>public class SmoothTurnProvider : MonoBehaviour\n{\n    [SerializeField] private float turnSpeed = 60f;\n\n    private void Update()\n    {\n        var input = turnAction.ReadValue&lt;float&gt;();\n        if (Mathf.Abs(input) &gt; 0.1f)\n        {\n            xrOrigin.RotateAroundCameraPosition(xrOrigin.transform.up, input * turnSpeed * Time.deltaTime);\n        }\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#comfort-aids","title":"Comfort Aids","text":""},{"location":"vr/comfort/#tunneling-vignette","title":"Tunneling Vignette","text":"<p>Reduces peripheral vision during movement to reduce motion sickness.</p> <pre><code>public class TunnelingVignetteController : MonoBehaviour\n{\n    [SerializeField] private Material vignetteMaterial;\n    [SerializeField] private float transitionSpeed = 5f;\n    [SerializeField] private float maxVignetteStrength = 0.5f;\n\n    private float _targetStrength;\n    private float _currentStrength;\n\n    public void SetActive(bool active)\n    {\n        _targetStrength = active ? maxVignetteStrength : 0f;\n    }\n\n    private void Update()\n    {\n        _currentStrength = Mathf.Lerp(_currentStrength, _targetStrength, Time.deltaTime * transitionSpeed);\n        vignetteMaterial.SetFloat(\"_VignetteStrength\", _currentStrength);\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#seated-mode","title":"Seated Mode","text":"<p>Adjusts player height for seated play.</p> <pre><code>public class SeatedModeController : MonoBehaviour\n{\n    [SerializeField] private Transform xrOrigin;\n    [SerializeField] private float seatedHeightOffset = 0.5f;\n\n    public void EnableSeatedMode()\n    {\n        var currentY = xrOrigin.position.y;\n        xrOrigin.position = new Vector3(xrOrigin.position.x, currentY + seatedHeightOffset, xrOrigin.position.z);\n    }\n\n    public void RecalibrateHeight()\n    {\n        // Reset to floor level based on current head position\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#settings-data","title":"Settings Data","text":"<pre><code>[System.Serializable]\npublic class ComfortSettings\n{\n    public LocomotionType locomotionType = LocomotionType.Teleport;\n    public TurnType turnType = TurnType.Snap;\n    public float snapTurnAngle = 45f;\n    public float smoothTurnSpeed = 60f;\n    public bool vignetteEnabled = true;\n    public float vignetteStrength = 0.5f;\n    public bool seatedMode = false;\n    public Handedness dominantHand = Handedness.Right;\n}\n\npublic enum LocomotionType { Teleport, Dash, Smooth }\npublic enum TurnType { Snap, Smooth }\npublic enum Handedness { Left, Right }\n</code></pre>"},{"location":"vr/comfort/#ui-considerations","title":"UI Considerations","text":"<p>VR UI must be readable and comfortable:</p> Element Guideline Distance 1-2 meters from player Text size Minimum 16px body, 24px headers Button size Minimum 64x64 pixels Contrast High contrast for readability Motion Avoid rapid animations"},{"location":"vr/comfort/#best-practices","title":"Best Practices","text":"Practice Reason Default to highest comfort New players need gentle introduction Remember preferences Save and restore on next session Allow runtime changes Let players adjust during play Test on device Editor previews don't show comfort issues"},{"location":"vr/performance/","title":"VR Performance Guide","text":"<p>Performance targets, optimization techniques, and Quest-specific considerations.</p>"},{"location":"vr/performance/#performance-targets","title":"Performance Targets","text":""},{"location":"vr/performance/#frame-rate","title":"Frame Rate","text":"Platform Minimum Target Quest 2 72 FPS 90 FPS Quest 3 72 FPS 120 FPS <p>Frame budget at 72 FPS: 13.9ms per frame</p>"},{"location":"vr/performance/#resource-budgets","title":"Resource Budgets","text":"Resource Target Maximum Draw calls 100 150 Triangles 300k 500k Active enemies 6 8 Active VFX 15 20"},{"location":"vr/performance/#vr-specific-rules","title":"VR-Specific Rules","text":""},{"location":"vr/performance/#never-do","title":"Never Do","text":"Action Problem Move camera transform directly Causes motion sickness Change camera FOV VR FOV is fixed by hardware Disable head tracking Breaks spatial awareness Use Instantiate in gameplay Causes frame spikes Block main thread Tracking freezes"},{"location":"vr/performance/#always-do","title":"Always Do","text":"Action Reason Move XR Rig, not camera Maintains tracking Use Time.deltaTime Frame-rate independent Pool all spawned objects Avoids GC spikes Cache GetComponent results Reduces per-frame cost Unsubscribe events in OnDisable Prevents memory leaks"},{"location":"vr/performance/#optimization-techniques","title":"Optimization Techniques","text":""},{"location":"vr/performance/#rendering","title":"Rendering","text":"<ul> <li>Enable Single Pass Instanced stereo rendering</li> <li>Use GPU instancing for repeated meshes</li> <li>Enable foveated rendering on Quest</li> <li>Aggressive LOD groups</li> <li>Bake lighting where possible</li> <li>Limit real-time shadows</li> </ul>"},{"location":"vr/performance/#physics","title":"Physics","text":"<ul> <li>Use layer matrix to limit collision checks</li> <li>Prefer trigger colliders over continuous collision</li> <li>Update NavMesh paths at intervals (0.2s)</li> <li>Use OverlapSphereNonAlloc</li> </ul>"},{"location":"vr/performance/#scripts","title":"Scripts","text":"<ul> <li>Minimize Update() logic</li> <li>Use priority update system for enemies</li> <li>Cache all component references</li> <li>Avoid LINQ in hot paths</li> <li>Use StringBuilder for string operations</li> </ul>"},{"location":"vr/performance/#update-manager","title":"Update Manager","text":"<p>Centralized update system with priority-based throttling.</p> <pre><code>public class GameUpdateManager : MonoBehaviour\n{\n    private const float MediumPriorityInterval = 0.2f;\n    private const float LowPriorityInterval = 0.4f;\n\n    private List&lt;IUpdateable&gt; _highPriority;\n    private List&lt;IUpdateable&gt; _mediumPriority;\n    private List&lt;IUpdateable&gt; _lowPriority;\n\n    private void Update()\n    {\n        float deltaTime = Time.deltaTime;\n\n        // High priority: every frame\n        for (int i = 0; i &lt; _highPriority.Count; i++)\n            _highPriority[i].OnUpdate(deltaTime);\n\n        // Medium priority: every 0.2s\n        if (Time.time &gt;= _lastMediumUpdate + MediumPriorityInterval)\n        {\n            for (int i = 0; i &lt; _mediumPriority.Count; i++)\n                _mediumPriority[i].OnUpdate(MediumPriorityInterval);\n            _lastMediumUpdate = Time.time;\n        }\n\n        // Low priority: every 0.4s\n        if (Time.time &gt;= _lastLowUpdate + LowPriorityInterval)\n        {\n            for (int i = 0; i &lt; _lowPriority.Count; i++)\n                _lowPriority[i].OnUpdate(LowPriorityInterval);\n            _lastLowUpdate = Time.time;\n        }\n    }\n}\n</code></pre>"},{"location":"vr/performance/#object-pooling","title":"Object Pooling","text":"<p>All spawned objects use GamePoolManager to avoid runtime allocations.</p> <pre><code>public class GamePoolManager : MonoBehaviour\n{\n    private Dictionary&lt;EnemyData, ObjectPool&lt;GameObject&gt;&gt; _enemyPools;\n    private Dictionary&lt;ParticleData, ObjectPool&lt;GameObject&gt;&gt; _particlePools;\n\n    public GameObject GetEnemyPrefab(EnemyData data, Vector3 position, Quaternion rotation)\n    {\n        if (!_enemyPools.TryGetValue(data, out var pool))\n        {\n            pool = CreatePool(data.prefab);\n            _enemyPools[data] = pool;\n        }\n\n        var instance = pool.Get();\n        instance.transform.SetPositionAndRotation(position, rotation);\n        return instance;\n    }\n\n    public void ReturnEnemyPrefab(EnemyData data, GameObject instance)\n    {\n        instance.SetActive(false);\n        _enemyPools[data].Release(instance);\n    }\n}\n</code></pre>"},{"location":"vr/performance/#priority-routing","title":"Priority Routing","text":"<p>VFX and audio have priority systems to prevent overload.</p> <pre><code>if (!_vfxRouter.CanSpawn(data.Priority))\n    return null;\n</code></pre>"},{"location":"vr/performance/#quest-build-settings","title":"Quest Build Settings","text":""},{"location":"vr/performance/#player-settings","title":"Player Settings","text":"Setting Value Graphics API Vulkan Color Space Linear Scripting Backend IL2CPP Architecture ARM64 Managed Stripping Medium"},{"location":"vr/performance/#quality-settings","title":"Quality Settings","text":"Setting Value Pixel Light Count 1-2 Texture Quality Half Res Anti-Aliasing 4x MSAA Shadows Disabled or blob only"},{"location":"vr/performance/#xr-settings","title":"XR Settings","text":"Setting Value Stereo Rendering Single Pass Instanced Low Overhead Mode Enabled Phase Sync Enabled"},{"location":"vr/performance/#profiling","title":"Profiling","text":""},{"location":"vr/performance/#tools","title":"Tools","text":"Tool Purpose Unity Profiler CPU/GPU timing Frame Debugger Draw call analysis Memory Profiler Allocation tracking OVR Metrics Tool Quest-specific metrics"},{"location":"vr/performance/#key-metrics","title":"Key Metrics","text":"<ul> <li>GPU time per frame</li> <li>Draw call count</li> <li>SetPass calls</li> <li>GC allocations</li> <li>Memory usage</li> </ul>"},{"location":"vr/performance/#common-issues","title":"Common Issues","text":"Issue Solution Frame drops Profile GPU, reduce draw calls Tracking loss Never disable XR camera Motion sickness Add comfort options Memory growth Pool objects, unload unused Thermal throttling Reduce quality settings"},{"location":"vr/spacewarp/","title":"Application SpaceWarp","text":"<p>Implementation guide for Meta Application SpaceWarp (ASW) for Quest VR performance optimization.</p>"},{"location":"vr/spacewarp/#overview","title":"Overview","text":"<p>Application SpaceWarp allows rendering at half the native frame rate (36 FPS instead of 72 FPS) while maintaining smooth visuals through frame interpolation.</p> <pre><code>Normal Rendering (72 FPS):\nFrame 1 -&gt; Frame 2 -&gt; Frame 3 -&gt; Frame 4\n  13.9ms    13.9ms    13.9ms    13.9ms\n\nWith SpaceWarp (36 FPS rendered):\nFrame 1 -&gt; [Interpolated] -&gt; Frame 2 -&gt; [Interpolated]\n  27.8ms       Auto           27.8ms       Auto\n\nResult: Player sees 72 FPS, GPU renders 36 FPS\n</code></pre>"},{"location":"vr/spacewarp/#when-to-use","title":"When to Use","text":""},{"location":"vr/spacewarp/#good-use-cases","title":"Good Use Cases","text":"<ul> <li>Graphically intensive scenes</li> <li>Consistent frame budget scenarios</li> <li>Hub areas, menus, exploration</li> <li>Slower-paced gameplay</li> </ul>"},{"location":"vr/spacewarp/#avoid-when","title":"Avoid When","text":"<ul> <li>Fast-moving objects or particles</li> <li>Rapid UI animations</li> <li>Competitive/precision gameplay</li> <li>Inconsistent performance (can't maintain 36 FPS)</li> </ul>"},{"location":"vr/spacewarp/#hybrid-approach","title":"Hybrid Approach","text":"<p>Toggle dynamically based on game state:</p> <ul> <li>Enable during hub, menus, exploration</li> <li>Disable during intense combat</li> </ul>"},{"location":"vr/spacewarp/#prerequisites","title":"Prerequisites","text":""},{"location":"vr/spacewarp/#hardware","title":"Hardware","text":"<ul> <li>Meta Quest 2 or newer (Quest 1 not supported)</li> <li>Quest Runtime v39+</li> </ul>"},{"location":"vr/spacewarp/#software","title":"Software","text":"Requirement Version Unity 2021.3+ LTS URP 12.0+ Meta XR Core SDK 60.0+ Graphics API Vulkan (required)"},{"location":"vr/spacewarp/#project-settings","title":"Project Settings","text":"<p>Player Settings:</p> <ul> <li>Graphics API: Vulkan (not OpenGL ES)</li> <li>Color Space: Linear</li> <li>Scripting Backend: IL2CPP</li> <li>Target Architecture: ARM64</li> </ul> <p>Quality Settings:</p> <ul> <li>Anti-Aliasing: 4x MSAA (required)</li> </ul>"},{"location":"vr/spacewarp/#setup","title":"Setup","text":""},{"location":"vr/spacewarp/#xr-settings","title":"XR Settings","text":"<pre><code>Edit -&gt; Project Settings -&gt; XR Plug-in Management -&gt; Oculus:\n- Low Overhead Mode: Enabled\n- Phase Sync: Enabled\n- Application SpaceWarp: Enabled\n</code></pre>"},{"location":"vr/spacewarp/#urp-motion-vectors","title":"URP Motion Vectors","text":"<pre><code>URP Asset Settings:\n1. Select URP asset\n2. Enable \"Motion Vectors\" in Rendering section\n</code></pre>"},{"location":"vr/spacewarp/#vulkan-graphics-api","title":"Vulkan Graphics API","text":"<pre><code>Edit -&gt; Project Settings -&gt; Player -&gt; Other Settings:\n- Set Vulkan as first/only Graphics API\n- Remove OpenGL ES if present\n</code></pre>"},{"location":"vr/spacewarp/#implementation","title":"Implementation","text":""},{"location":"vr/spacewarp/#spacewarp-manager","title":"SpaceWarp Manager","text":"<pre><code>public class SpaceWarpManager : MonoBehaviour\n{\n    public static SpaceWarpManager Instance { get; private set; }\n\n    [SerializeField] private bool enableByDefault = false;\n\n    private bool _isEnabled;\n    private bool _isSupported;\n\n    public bool IsEnabled =&gt; _isEnabled;\n    public bool IsSupported =&gt; _isSupported;\n\n    private void Awake()\n    {\n        if (Instance != null) { Destroy(gameObject); return; }\n        Instance = this;\n        DontDestroyOnLoad(gameObject);\n\n        CheckSupport();\n        if (_isSupported &amp;&amp; enableByDefault)\n            EnableSpaceWarp();\n    }\n\n    private void CheckSupport()\n    {\n        #if UNITY_ANDROID &amp;&amp; !UNITY_EDITOR\n        _isSupported = SystemInfo.graphicsDeviceType == GraphicsDeviceType.Vulkan;\n        #else\n        _isSupported = false;\n        #endif\n    }\n\n    public void EnableSpaceWarp()\n    {\n        if (!_isSupported || _isEnabled) return;\n\n        #if UNITY_ANDROID &amp;&amp; !UNITY_EDITOR\n        Application.targetFrameRate = 36;\n        _isEnabled = true;\n        #endif\n    }\n\n    public void DisableSpaceWarp()\n    {\n        if (!_isEnabled) return;\n\n        #if UNITY_ANDROID &amp;&amp; !UNITY_EDITOR\n        Application.targetFrameRate = 72;\n        _isEnabled = false;\n        #endif\n    }\n\n    public void Toggle()\n    {\n        if (_isEnabled) DisableSpaceWarp();\n        else EnableSpaceWarp();\n    }\n}\n</code></pre>"},{"location":"vr/spacewarp/#game-integration","title":"Game Integration","text":"<pre><code>public class SpaceWarpGameIntegration : MonoBehaviour\n{\n    [SerializeField] private VoidEventChannel onArenaStarted;\n    [SerializeField] private VoidEventChannel onArenaEnded;\n    [SerializeField] private VoidEventChannel onHubEntered;\n\n    private void OnEnable()\n    {\n        onHubEntered?.Subscribe(OnHubEntered);\n        onArenaStarted?.Subscribe(OnArenaStarted);\n        onArenaEnded?.Subscribe(OnArenaEnded);\n    }\n\n    private void OnDisable()\n    {\n        onHubEntered?.Unsubscribe(OnHubEntered);\n        onArenaStarted?.Unsubscribe(OnArenaStarted);\n        onArenaEnded?.Unsubscribe(OnArenaEnded);\n    }\n\n    private void OnHubEntered()\n    {\n        SpaceWarpManager.Instance?.EnableSpaceWarp();\n    }\n\n    private void OnArenaStarted()\n    {\n        SpaceWarpManager.Instance?.DisableSpaceWarp();\n    }\n\n    private void OnArenaEnded()\n    {\n        SpaceWarpManager.Instance?.EnableSpaceWarp();\n    }\n}\n</code></pre>"},{"location":"vr/spacewarp/#motion-vectors","title":"Motion Vectors","text":"<p>Motion vectors are critical for SpaceWarp quality. Without them, moving objects have visible artifacts.</p>"},{"location":"vr/spacewarp/#enable-in-urp","title":"Enable in URP","text":"<ol> <li>Select Universal Render Pipeline Asset</li> <li>Find \"Rendering\" section</li> <li>Enable \"Motion Vectors\"</li> </ol>"},{"location":"vr/spacewarp/#per-object-motion-vectors","title":"Per-Object Motion Vectors","text":"<p>For skinned meshes and fast-moving objects:</p> <pre><code>[RequireComponent(typeof(Renderer))]\npublic class MotionVectorForcer : MonoBehaviour\n{\n    private Renderer _renderer;\n\n    private void Awake()\n    {\n        _renderer = GetComponent&lt;Renderer&gt;();\n    }\n\n    private void OnEnable()\n    {\n        _renderer.motionVectorGenerationMode = MotionVectorGenerationMode.Object;\n    }\n\n    private void OnDisable()\n    {\n        _renderer.motionVectorGenerationMode = MotionVectorGenerationMode.ForceNoMotion;\n    }\n}\n</code></pre>"},{"location":"vr/spacewarp/#common-issues","title":"Common Issues","text":"Issue Cause Solution Ghosting on moving objects Missing motion vectors Add MotionVectorForcer component UI appears blurry UI interpolated by SpaceWarp Use screen-space overlay or disable motion vectors on UI Frame rate unstable Scene too heavy Profile and optimize, or disable SpaceWarp SpaceWarp not activating Missing prerequisites Check Vulkan, MSAA, XR settings Edge artifacts Known limitation Add vignette during movement"},{"location":"vr/spacewarp/#best-practices","title":"Best Practices","text":"Do Don't Use in controlled scenarios Leave always on Test on device Trust editor previews Add motion vectors to movers Forget skinned mesh motion vectors Provide user toggle Force without option Use transitions when toggling Instantly switch state"},{"location":"vr/spacewarp/#user-settings","title":"User Settings","text":"<p>Provide player control:</p> <pre><code>public enum PerformanceMode\n{\n    Quality,      // 72 FPS, no SpaceWarp\n    Balanced,     // Dynamic based on load\n    Performance   // Always SpaceWarp (36 FPS interpolated)\n}\n</code></pre>"}]}