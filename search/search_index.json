{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Monsta Choppa VR","text":"<p>A VR roguelike arena combat game built with Unity's XR Interaction Toolkit. Fight waves of enemies, earn gold and experience, upgrade equipment, and progress through increasingly difficult challenges.</p>"},{"location":"#project-status","title":"Project Status","text":"<p>Project Shelved</p> <p>This portfolio project was shelved in January 2026. I started a new position working with Meta's native SDK rather than OpenXR, making context-switching between the two SDKs impractical for continued development.</p> <p>These Documents were also generated by Claude Opus 4.5 based off of my existing MD Files and the Code I made in the project. I don't usually do this but I wanted to clean up the documents before shelving and don't have the time to do it properly myself.   </p> <p>This project was worked on from December 15th 2025 to January 31st 2026.</p> <p>See Project Status for what was completed and what was planned next.</p>"},{"location":"#technical-highlights","title":"Technical Highlights","text":"<ul> <li> <p> Combat System</p> <p>Physics-based VR melee combat with velocity-based damage calculation, haptic feedback, and multiple weapon archetypes.</p> <p> Weapons</p> </li> <li> <p> Enemy System</p> <p>Component-based enemy architecture with NavMesh navigation, object pooling, and data-driven wave spawning.</p> <p> Enemies</p> </li> <li> <p> VR Performance</p> <p>Optimized for Quest 2/3 with 72+ FPS targets, priority-based update management, and Application SpaceWarp support.</p> <p> Performance</p> </li> <li> <p> Architecture</p> <p>ScriptableObject-driven design with decoupled event channels, generic database patterns, and factory systems.</p> <p> Architecture</p> </li> </ul>"},{"location":"#system-architecture","title":"System Architecture","text":"<p>The project uses a layered architecture separating presentation, gameplay, events, and data concerns.</p> <pre><code>flowchart TB\n    A[Presentation Layer] --&gt; B[Gameplay Layer]\n    B --&gt; C[Event Layer]\n    C --&gt; D[Data Layer]\n    D --&gt; E[VR Template Layer]\n\n    A --- A1[UI Hosts &amp; Views]\n    A --- A2[Audio &amp; VFX]\n\n    B --- B1[Weapons &amp; Combat]\n    B --- B2[Enemies &amp; AI]\n\n    C --- C1[GameplayEvents]\n    C --- C2[AudioEvents]\n\n    D --- D1[Databases]\n    D --- D2[Object Pooling]\n\n    E --- E1[XR Origin]\n    E --- E2[Controllers &amp; Input]</code></pre>"},{"location":"#core-design-patterns","title":"Core Design Patterns","text":"Pattern Implementation ScriptableObject Database Generic <code>DatabaseBase&lt;T&gt;</code> with O(1) lookups Event Bus Type-safe ScriptableObject event channels Object Pool Unity ObjectPool with priority routing Factory UIToolkitFactory for consistent UI creation Component Modular enemy and weapon components"},{"location":"#dependencies","title":"Dependencies","text":"Asset Purpose PrimeTween Allocation-free animation ESave Save file serialization XR Interaction Toolkit VR input and interaction Synty Dungeon Realms Environment art"},{"location":"#documentation","title":"Documentation","text":"Section Description Architecture System design, event channels, database patterns Game Systems Weapons, enemies, UI, save data VR Development Performance optimization, comfort, SpaceWarp Future Plans Roadmap and project status"},{"location":"architecture/constants/","title":"Constants System","text":"<p>Centralized string keys and configuration values to eliminate magic strings and improve maintainability.</p> <p>Source: <code>Assets/Scripts/Constants/</code></p>"},{"location":"architecture/constants/#overview","title":"Overview","text":"<p>All string literals used for lookups, save keys, and style classes are defined as constants. This provides compile-time checking and a single source of truth for values used across the codebase.</p> Benefit Explanation Compile-time checking Typos caught at build time, not runtime Refactoring safety Change value in one place Autocomplete support IDE suggests available constants Self-documenting Clear naming indicates purpose"},{"location":"architecture/constants/#constant-categories","title":"Constant Categories","text":""},{"location":"architecture/constants/#gameconstants","title":"GameConstants","text":"<p>Core game configuration and save data keys.</p> <p>Source: <code>GameConstants.cs</code></p> <pre><code>public static class GameConstants\n{\n    // Scene Names\n    public const string Bootstrapper = \"Bootstrapper\";\n    public const string StartMenu = \"StartMenu\";\n    public const string Hub = \"Hub\";\n    public const string GoblinCampDay = \"GoblinCampDay\";\n\n    // Save Keys\n    public const string MetaProgressionKey = \"MetaProgression\";\n    public const string AudioSettingsKey = \"AudioSettings\";\n    public const string VideoSettingsKey = \"VideoSettings\";\n\n    // Attribute Keys\n    public const string PlayerGoldKey = \"PlayerGold\";\n    public const string PlayerExperienceKey = \"PlayerExperience\";\n    public const string PlayerLevelKey = \"PlayerLevel\";\n\n    // Combat Settings\n    public const float DefaultMeleeAttackRange = 2.0f;\n    public const float MinSwingVelocity = 1.0f;\n    public const float MaxSwingVelocity = 5.0f;\n    public const float MinVelocityDamageMultiplier = 0.5f;\n    public const float MaxVelocityDamageMultiplier = 2.0f;\n    public const float InvincibilityDuration = 0.2f;\n\n    // Arena Properties\n    public const int PreludeDuration = 8;\n    public const int WaveIntermissionDuration = 6;\n    public const int BossIntermissionDuration = 6;\n}\n</code></pre>"},{"location":"architecture/constants/#audiokeys","title":"AudioKeys","text":"<p>Audio mixer groups and clip identifiers.</p> <p>Source: <code>AudioKeys.cs</code></p> <p><pre><code>public static class AudioKeys\n{\n    // Mixer Groups\n    public const string MixerMaster = \"Master\";\n    public const string MixerMusic = \"Music\";\n    public const string MixerSfx = \"SFX\";\n    public const string MixerUI = \"UI\";\n    public const string MixerAmbience = \"Ambience\";\n\n    // UI Sounds\n    public const string ButtonClick = \"button_click\";\n    public const string ButtonEnter = \"button_enter\";\n    public const string ButtonExit = \"button_exit\";\n    public const string Pop = \"pop\";\n\n    // Game Music\n    public const string GameIntroKey = \"Game_Intro_Music\";\n    public const string GameWonKey = \"Game_Won_Music\";\n    public const string GameOverKey = \"Game_Over_Music\";\n}\n</code></pre> <pre><code>### LocalizationKeys\n\nUI text localization keys.\n\n&gt; **Source**: [`LocalizationKeys.cs`](https://github.com/SBUplakankus/monsta-choppa-vr/blob/main/Assets/Scripts/Constants/LocalizationKeys.cs)\n\n```csharp\npublic static class LocalizationKeys\n{\n    public const string MainTable = \"MainGame\";\n\n    // Loading\n    public const string Initializing = \"initializing\";\n    public const string LoadingComplete = \"loading-complete\";\n\n    // Main Menu\n    public const string Play = \"play\";\n    public const string Settings = \"settings\";\n    public const string Quit = \"quit\";\n    public const string Resume = \"resume\";\n\n    // Settings\n    public const string AudioSettings = \"audio-settings\";\n    public const string VideoSettings = \"video-settings\";\n    public const string LanguageSettings = \"language-settings\";\n\n    // Audio\n    public const string Master = \"master\";\n    public const string Music = \"music\";\n    public const string SFX = \"sfx\";\n    public const string Ambience = \"ambience\";\n\n    // Stats\n    public const string Level = \"level\";\n    public const string Experience = \"experience\";\n    public const string Gold = \"gold\";\n}\n</code></pre></p>"},{"location":"architecture/constants/#uitoolkitstyles","title":"UIToolkitStyles","text":"<p>USS class names for UI Toolkit styling.</p> <p>Source: <code>UIToolkitStyles.cs</code></p> <p><pre><code>public static class UIToolkitStyles\n{\n    // Containers\n    public const string Container = \"container\";\n    public const string PanelBody = \"panel-body\";\n    public const string PanelHeader = \"panel-header\";\n    public const string PanelContent = \"panel-content\";\n\n    // Buttons\n    public const string MenuButton = \"menu-button\";\n    public const string ContinueButton = \"continue-button\";\n\n    // Health Bars\n    public const string HealthBarContainer = \"health-bar-container\";\n    public const string HealthBarBackground = \"health-bar-background\";\n    public const string HealthBarFill = \"health-bar-fill\";\n\n    // Loading Screen\n    public const string LoadingScreenContainer = \"loading-screen-container\";\n    public const string LoadingBarContainer = \"loading-bar-container\";\n    public const string LoadingBarFill = \"loading-bar-fill\";\n\n    // Settings\n    public const string SettingsSlider = \"settings-slider\";\n    public const string SettingsDropdown = \"settings-dropdown\";\n\n    // Tabs\n    public const string TabBar = \"tab-bar\";\n    public const string Tab = \"tab\";\n    public const string TabContent = \"tab-content\";\n}\n</code></pre> <pre><code>---\n\n## Usage\n\n### Scene Loading\n\n```csharp\nSceneManager.LoadScene(GameConstants.Hub);\n</code></pre></p>"},{"location":"architecture/constants/#save-data","title":"Save Data","text":"<pre><code>SaveFile.AddOrUpdateData(GameConstants.MetaProgressionKey, metaProgressionData);\nvar data = SaveFile.GetData&lt;MetaProgressionData&gt;(GameConstants.MetaProgressionKey);\n</code></pre>"},{"location":"architecture/constants/#audio","title":"Audio","text":"<pre><code>AudioEvents.SfxRequested.Raise(AudioKeys.ButtonClick);\naudioMixer.SetFloat(AudioKeys.MixerMaster, volume);\n</code></pre>"},{"location":"architecture/constants/#ui-styling","title":"UI Styling","text":"<pre><code>var button = UIToolkitFactory.CreateButton(\n    LocalizationKeys.Play,\n    HandlePlay,\n    UIToolkitStyles.MenuButton\n);\n</code></pre>"},{"location":"architecture/constants/#adding-new-constants","title":"Adding New Constants","text":"<ol> <li>Identify the category (Game, Audio, Localization, UI)</li> <li>Add to appropriate static class</li> <li>Use descriptive naming: <code>CategoryAction</code> or <code>CategoryItem</code></li> <li>Replace all magic string usages</li> </ol> <pre><code>public static class GameConstants\n{\n    // Existing keys...\n    public const string PlayerManaKey = \"PlayerMana\";  // New key\n}\n\n// Usage\nsaveFile.AddOrUpdateData(GameConstants.PlayerManaKey, manaValue);\n</code></pre>"},{"location":"architecture/database-pattern/","title":"Database Pattern","text":"<p>Generic ScriptableObject-based database pattern for storing and retrieving game data with O(1) lookups.</p> <p>Source: <code>Assets/Scripts/Databases/</code></p>"},{"location":"architecture/database-pattern/#overview","title":"Overview","text":"<p>Databases provide centralized access to game content (weapons, enemies, audio, particles) without hard-coded references or scene dependencies.</p> <pre><code>GameDatabases (static access)\n    \u2502\n    \u251c\u2500\u2500 WeaponDatabase  \u2192  WeaponData[]\n    \u251c\u2500\u2500 EnemyDatabase   \u2192  EnemyData[]\n    \u251c\u2500\u2500 AudioClipDatabase \u2192 AudioClipData[]\n    \u251c\u2500\u2500 WorldAudioDatabase \u2192 WorldAudioData[]\n    \u251c\u2500\u2500 ParticleDatabase \u2192 ParticleData[]\n    \u2514\u2500\u2500 ArenaDatabase \u2192 ArenaData[]\n</code></pre>"},{"location":"architecture/database-pattern/#databasebaset","title":"DatabaseBase&lt;T&gt;","text":"<p>Generic base class for all databases. Uses ordinal string comparison for better performance.</p> <p>Source: <code>DatabaseBase.cs</code></p> <pre><code>public abstract class DatabaseBase&lt;T&gt; : ScriptableObject\n{\n    [SerializeField] private T[] entries;\n\n    private Dictionary&lt;string, T&gt; _lookup;\n    private bool _isLookupBuilt;\n\n    public T[] Entries =&gt; entries;\n\n    protected abstract string GetKey(T entry);\n\n    private static string NormalizeKey(string id) =&gt; id.Trim().ToLowerInvariant();\n\n    private void BuildLookup()\n    {\n        if (_isLookupBuilt) return;\n\n        _lookup = new Dictionary&lt;string, T&gt;(entries.Length, StringComparer.Ordinal);\n\n        for (var i = 0; i &lt; entries.Length; i++)\n        {\n            var entry = entries[i];\n            var key = NormalizeKey(GetKey(entry));\n            _lookup[key] = entry;\n        }\n\n        _isLookupBuilt = true;\n    }\n\n    public bool TryGet(string id, out T entry)\n    {\n        if (!_isLookupBuilt) BuildLookup();\n        return _lookup.TryGetValue(NormalizeKey(id), out entry);\n    }\n\n    public T Get(string id)\n    {\n        if (!_isLookupBuilt) BuildLookup();\n        return _lookup[NormalizeKey(id)];\n    }\n}\n</code></pre>"},{"location":"architecture/database-pattern/#implementations","title":"Implementations","text":"<p>Source: <code>Assets/Scripts/Databases/</code></p>"},{"location":"architecture/database-pattern/#weapondatabase","title":"WeaponDatabase","text":"<pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Databases/Weapon\")]\npublic class WeaponDatabase : DatabaseBase&lt;WeaponData&gt;\n{\n    protected override string GetKey(WeaponData entry) =&gt; entry.WeaponID;\n}\n</code></pre>"},{"location":"architecture/database-pattern/#enemydatabase","title":"EnemyDatabase","text":"<pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Databases/Enemy\")]\npublic class EnemyDatabase : DatabaseBase&lt;EnemyData&gt;\n{\n    protected override string GetKey(EnemyData entry) =&gt; entry.EnemyId;\n}\n</code></pre>"},{"location":"architecture/database-pattern/#gamedatabases-static-access","title":"GameDatabases Static Access","text":"<p>Global access point for all databases. Assigned during bootstrap.</p> <p>Source: <code>GameDatabases.cs</code></p> <pre><code>public static class GameDatabases\n{\n    public static AudioClipDatabase AudioClipDatabase { get; internal set; }\n    public static WorldAudioDatabase WorldAudioDatabase { get; internal set; }\n    public static WeaponDatabase WeaponDatabase { get; internal set; }\n    public static EnemyDatabase EnemyDatabase { get; internal set; }\n    public static ParticleDatabase ParticleDatabase { get; internal set; }\n    public static UpgradeDatabase UpgradeDatabase { get; internal set; }\n    public static ArenaDatabase ArenaDatabase { get; internal set; }\n\n    public static void Clear()\n    {\n        AudioClipDatabase = null;\n        WorldAudioDatabase = null;\n        WeaponDatabase = null;\n        EnemyDatabase = null;\n        ParticleDatabase = null;\n        ArenaDatabase = null;\n        UpgradeDatabase = null;\n    }\n}\n</code></pre>"},{"location":"architecture/database-pattern/#usage","title":"Usage","text":""},{"location":"architecture/database-pattern/#safe-retrieval","title":"Safe Retrieval","text":"<pre><code>if (GameDatabases.WeaponDatabase.TryGet(\"sword_fire\", out var weapon))\n{\n    SpawnWeapon(weapon);\n}\n</code></pre>"},{"location":"architecture/database-pattern/#direct-retrieval","title":"Direct Retrieval","text":"<pre><code>// Note: Throws KeyNotFoundException if entry doesn't exist\nvar enemy = GameDatabases.EnemyDatabase.Get(\"goblin_melee\");\nSpawnEnemy(enemy);\n</code></pre>"},{"location":"architecture/database-pattern/#with-pooling","title":"With Pooling","text":"<pre><code>var enemyData = GameDatabases.EnemyDatabase.Get(enemyId);\nvar instance = GamePoolManager.Instance.GetEnemyPrefab(enemyData, position, rotation);\n</code></pre>"},{"location":"architecture/database-pattern/#data-flow","title":"Data Flow","text":"<ol> <li>Designer creates ScriptableObject asset (e.g., WeaponData)</li> <li>Asset added to database entries array</li> <li>Database builds lookup dictionary on first access</li> <li>Runtime systems query via GameDatabases static class</li> <li>Retrieved data used to configure pooled instances</li> </ol>"},{"location":"architecture/database-pattern/#adding-new-database-types","title":"Adding New Database Types","text":""},{"location":"architecture/database-pattern/#step-1-create-data-scriptableobject","title":"Step 1: Create Data ScriptableObject","text":"<pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Abilities/Ability Data\")]\npublic class AbilityData : ScriptableObject\n{\n    public string abilityId;\n    public string displayName;\n    public float cooldown;\n    public GameObject effectPrefab;\n}\n</code></pre>"},{"location":"architecture/database-pattern/#step-2-create-database-class","title":"Step 2: Create Database Class","text":"<pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Databases/Ability Database\")]\npublic class AbilityDatabase : DatabaseBase&lt;AbilityData&gt;\n{\n    protected override string GetKey(AbilityData entry) =&gt; entry.abilityId;\n}\n</code></pre>"},{"location":"architecture/database-pattern/#step-3-add-to-gamedatabases","title":"Step 3: Add to GameDatabases","text":"<pre><code>public static AbilityDatabase AbilityDatabase { get; set; }\n</code></pre>"},{"location":"architecture/database-pattern/#best-practices","title":"Best Practices","text":"Practice Reason Use TryGet over Get Handles missing entries gracefully Normalize keys (lowercase, trimmed) Prevents lookup failures from formatting Keep databases read-only at runtime Maintains data consistency Assign databases during bootstrap Ensures availability before gameplay"},{"location":"architecture/event-system/","title":"Event System","text":"<p>Lightweight publish/subscribe system for decoupled communication between game systems.</p> <p>Source: <code>Assets/Scripts/Events/</code></p>"},{"location":"architecture/event-system/#overview","title":"Overview","text":"<p>Event channels allow systems to communicate without direct references. A sender raises an event, and any number of subscribers receive it.</p> <pre><code>flowchart LR\n    A[Sender] --&gt; B[Event Channel]\n    B --&gt; C[Subscriber 1]\n    B --&gt; D[Subscriber 2]\n    B --&gt; E[Subscriber N]</code></pre>"},{"location":"architecture/event-system/#event-channel-classes","title":"Event Channel Classes","text":"<p>The project uses simple C# classes (not ScriptableObjects) for events.</p> <p>Source: <code>EventChannel.cs</code></p>"},{"location":"architecture/event-system/#eventchannelt","title":"EventChannel&lt;T&gt;","text":"<p>Generic event channel for typed events.</p> <pre><code>public class EventChannel&lt;T&gt;\n{\n    private event Action&lt;T&gt; Handlers;\n\n    public void Raise(T value) =&gt; Handlers?.Invoke(value);\n    public void Subscribe(Action&lt;T&gt; handler) =&gt; Handlers += handler;\n    public void Unsubscribe(Action&lt;T&gt; handler) =&gt; Handlers -= handler;\n    public void Clear() =&gt; Handlers = null;\n}\n</code></pre>"},{"location":"architecture/event-system/#eventchannel-void","title":"EventChannel (Void)","text":"<p>For events with no payload.</p> <pre><code>public class EventChannel\n{\n    private event Action Handlers;\n\n    public void Raise() =&gt; Handlers?.Invoke();\n    public void Subscribe(Action handler) =&gt; Handlers += handler;\n    public void Unsubscribe(Action handler) =&gt; Handlers -= handler;\n    public void Clear() =&gt; Handlers = null;\n}\n</code></pre>"},{"location":"architecture/event-system/#event-registries","title":"Event Registries","text":"<p>Events are organized into static registry classes by category.</p> <p>Source: <code>Assets/Scripts/Events/Registries/</code></p>"},{"location":"architecture/event-system/#gameplayevents","title":"GameplayEvents","text":"<pre><code>public static class GameplayEvents\n{\n    // Arena\n    public static readonly EventChannel&lt;int&gt; PlayerDamaged = new();\n    public static readonly EventChannel&lt;int&gt; PlayerHealed = new();\n    public static readonly EventChannel&lt;EnemyController&gt; EnemySpawned = new();\n    public static readonly EventChannel&lt;EnemyController&gt; EnemyDespawned = new();\n    public static readonly EventChannel ArenaDefeatSequenceRequested = new();\n    public static readonly EventChannel ArenaVictorySequenceRequested = new();\n\n    // Stats\n    public static readonly EventChannel&lt;int&gt; GoldChanged = new();\n    public static readonly EventChannel&lt;int&gt; ExperienceChanged = new();\n    public static readonly EventChannel&lt;int&gt; LevelChanged = new();\n\n    // State\n    public static readonly EventChannel GamePaused = new();\n    public static readonly EventChannel GameResumed = new();\n    public static readonly EventChannel&lt;GameState&gt; GameStateChanged = new();\n    public static readonly EventChannel&lt;ArenaState&gt; ArenaStateChanged = new();\n\n    public static void Clear() { /* clears all events */ }\n}\n</code></pre>"},{"location":"architecture/event-system/#audioevents","title":"AudioEvents","text":"<pre><code>public static class AudioEvents\n{\n    public static readonly EventChannel&lt;string&gt; MusicRequested = new();\n    public static readonly EventChannel&lt;string&gt; SfxRequested = new();\n    public static readonly EventChannel&lt;string&gt; UISfxRequested = new();\n    public static readonly EventChannel&lt;string&gt; AmbienceRequested = new();\n\n    public static void Clear() { /* clears all events */ }\n}\n</code></pre>"},{"location":"architecture/event-system/#systemevents","title":"SystemEvents","text":"<pre><code>public static class SystemEvents\n{\n    public static readonly EventChannel SettingsSaveRequested = new();\n    public static readonly EventChannel SettingsLoadRequested = new();\n    public static readonly EventChannel PlayerSaveRequested = new();\n    public static readonly EventChannel PlayerLoadRequested = new();\n    public static readonly EventChannel&lt;Locale&gt; LocaleChangeRequested = new();\n\n    public static void Clear() { /* clears all events */ }\n}\n</code></pre>"},{"location":"architecture/event-system/#usage-examples","title":"Usage Examples","text":""},{"location":"architecture/event-system/#subscribing-to-events","title":"Subscribing to Events","text":"<pre><code>public class GoldDisplay : MonoBehaviour\n{\n    private void OnEnable()\n    {\n        GameplayEvents.GoldChanged.Subscribe(UpdateDisplay);\n    }\n\n    private void OnDisable()\n    {\n        GameplayEvents.GoldChanged.Unsubscribe(UpdateDisplay);\n    }\n\n    private void UpdateDisplay(int newGold)\n    {\n        goldLabel.text = newGold.ToString();\n    }\n}\n</code></pre>"},{"location":"architecture/event-system/#raising-events","title":"Raising Events","text":"<pre><code>// When enemy dies\nGameplayEvents.EnemyDespawned.Raise(controller);\n\n// When gold changes\nGameplayEvents.GoldChanged.Raise(newGoldAmount);\n</code></pre>"},{"location":"architecture/event-system/#requesting-audio","title":"Requesting Audio","text":"<pre><code>AudioEvents.SfxRequested.Raise(\"sword_hit\");\nAudioEvents.MusicRequested.Raise(\"combat_theme\");\n</code></pre>"},{"location":"architecture/event-system/#best-practices","title":"Best Practices","text":"Rule Reason Always unsubscribe in OnDisable Prevents memory leaks and null reference errors Keep handlers lightweight Long handlers block other subscribers Match subscribe/unsubscribe methods Using different method references causes leaks"},{"location":"architecture/event-system/#correct-pattern-method-reference","title":"Correct Pattern: Method Reference","text":"<pre><code>// Correct - same method reference for subscribe and unsubscribe\nprivate void OnEnable() =&gt; GameplayEvents.GoldChanged.Subscribe(HandleGoldChanged);\nprivate void OnDisable() =&gt; GameplayEvents.GoldChanged.Unsubscribe(HandleGoldChanged);\nprivate void HandleGoldChanged(int gold) { /* ... */ }\n</code></pre>"},{"location":"architecture/event-system/#incorrect-pattern-memory-leak","title":"Incorrect Pattern (Memory Leak)","text":"<pre><code>// Lambda creates new delegate each time - cannot unsubscribe\nprivate void OnEnable() =&gt; GameplayEvents.GoldChanged.Subscribe(g =&gt; UpdateUI(g));\n// This will NOT work - different delegate instance\n</code></pre>"},{"location":"architecture/overview/","title":"Architecture Overview","text":"<p>This document describes the high-level architecture of the Monsta Choppa VR project. The system is built on Unity's XR Interaction Toolkit with custom layers for gameplay, data management, and UI.</p> <p>Source: <code>Assets/Scripts/</code></p>"},{"location":"architecture/overview/#core-design-principles","title":"Core Design Principles","text":"Principle Implementation Decoupled Systems Event channels for communication, no direct references Data-Driven Design ScriptableObjects define all game content VR Performance Object pooling, priority updates, minimal allocations Extensibility Generic base classes, factory patterns"},{"location":"architecture/overview/#system-layers","title":"System Layers","text":"<pre><code>flowchart TB\n    subgraph Presentation[\"Presentation Layer\"]\n        A1[UI Hosts]\n        A2[Views]\n        A3[Audio]\n        A4[Visual Effects]\n    end\n\n    subgraph Gameplay[\"Gameplay Layer\"]\n        B1[Weapons]\n        B2[Enemies]\n        B3[Combat]\n        B4[Arena Management]\n    end\n\n    subgraph Events[\"Event Layer\"]\n        C1[GameplayEvents]\n        C2[AudioEvents]\n        C3[SystemEvents]\n    end\n\n    subgraph Data[\"Data Layer\"]\n        D1[ScriptableObject Databases]\n        D2[Object Pooling]\n        D3[Constants]\n    end\n\n    subgraph VR[\"VR Template Layer\"]\n        E1[XR Origin]\n        E2[Controllers]\n        E3[Locomotion]\n    end\n\n    Presentation --&gt; Gameplay\n    Gameplay --&gt; Events\n    Events --&gt; Data\n    Data --&gt; VR</code></pre>"},{"location":"architecture/overview/#data-driven-scriptableobject-pattern","title":"Data-Driven ScriptableObject Pattern","text":"<p>The project uses a consistent pattern where ScriptableObjects define configuration and MonoBehaviours handle runtime logic.</p>"},{"location":"architecture/overview/#pattern-flow","title":"Pattern Flow","text":"<pre><code>flowchart LR\n    A[ScriptableObject Data] --&gt; B[MonoBehaviour Controller]\n    B --&gt; C[Components]\n\n    A1[WeaponData] --&gt; B1[XRWeaponBase]\n    A2[EnemyData] --&gt; B2[EnemyController]</code></pre>"},{"location":"architecture/overview/#benefits","title":"Benefits","text":"Benefit Explanation Designer-friendly Configure in Inspector without code changes Runtime immutable Data assets are read-only, no accidental modifications Easy balancing Tweak stats by editing assets, not code Pooling compatible Same data drives multiple pooled instances"},{"location":"architecture/overview/#key-system-relationships","title":"Key System Relationships","text":""},{"location":"architecture/overview/#weapon-system","title":"Weapon System","text":"<pre><code>graph TD\n    A[WeaponData] --&gt; B[WeaponDatabase]\n    A --&gt; C[XRWeaponBase]\n    C --&gt; D[MeleeXRWeapon]\n    C --&gt; E[ShieldXRWeapon]\n    C --&gt; F[BowXRWeapon]\n    D --&gt; G[WeaponHitbox]</code></pre>"},{"location":"architecture/overview/#enemy-system","title":"Enemy System","text":"<pre><code>graph TD\n    A[EnemyData] --&gt; B[EnemyDatabase]\n    A --&gt; C[EnemyController]\n    C --&gt; D[EnemyHealth]\n    C --&gt; E[EnemyMovement]\n    C --&gt; F[EnemyAnimator]\n    C --&gt; G[EnemyAttack]</code></pre>"},{"location":"architecture/overview/#object-pooling","title":"Object Pooling","text":"<p>Source: <code>GamePoolManager.cs</code></p> <pre><code>graph TD\n    A[GamePoolManager] --&gt; B[Enemy Pools]\n    A --&gt; C[Particle Pools]\n    A --&gt; D[WorldAudio Pools]\n    B --&gt; E[keyed by EnemyData]\n    C --&gt; F[keyed by ParticleData]\n    D --&gt; G[keyed by WorldAudioData]</code></pre> <p>Usage: <pre><code>// Spawn\nvar enemy = GamePoolManager.Instance.GetEnemyPrefab(enemyData, position, rotation);\n\n// Return\nGamePoolManager.Instance.ReturnEnemyPrefab(enemyController);\n</code></pre></p>"},{"location":"architecture/overview/#static-access-layer","title":"Static Access Layer","text":"<p>Global access to databases and events through static classes:</p> <pre><code>// GameDatabases - centralized database access\nGameDatabases.WeaponDatabase.TryGet(\"sword_fire\", out var weapon);\nGameDatabases.EnemyDatabase.Get(\"goblin_melee\");\n\n// Event Registries - centralized event access\nGameplayEvents.GoldChanged.Raise(newGold);\nGameplayEvents.EnemySpawned.Subscribe(HandleEnemySpawn);\nAudioEvents.SfxRequested.Raise(\"hit_sound\");\n</code></pre>"},{"location":"architecture/overview/#best-practices","title":"Best Practices","text":"Rule Reason Always unsubscribe in OnDisable Prevents memory leaks and null references Never modify ScriptableObjects at runtime Breaks data consistency Use TryGet for database lookups Handles missing entries gracefully Pool all instantiated objects Avoids GC spikes in VR Keep Update logic minimal VR requires consistent 72+ FPS"},{"location":"architecture/overview/#file-organization","title":"File Organization","text":"<pre><code>Assets/Scripts/\n\u251c\u2500\u2500 Attributes/            # FloatAttribute, IntAttribute\n\u251c\u2500\u2500 Audio/                 # Audio controllers\n\u251c\u2500\u2500 Characters/            # Base and Enemy components\n\u2502   \u251c\u2500\u2500 Base/             # HealthComponent, AnimatorComponent\n\u2502   \u2514\u2500\u2500 Enemies/          # EnemyController, EnemyHealth, etc.\n\u251c\u2500\u2500 Constants/            # GameConstants, AudioKeys, etc.\n\u251c\u2500\u2500 Data/                 # ScriptableObject data classes\n\u2502   \u251c\u2500\u2500 Core/             # EnemyData, ParticleData\n\u2502   \u251c\u2500\u2500 Progression/      # MetaProgressionData\n\u2502   \u2514\u2500\u2500 Weapons/          # WeaponData, WeaponModifierData\n\u251c\u2500\u2500 Databases/            # DatabaseBase&lt;T&gt;, GameDatabases\n\u251c\u2500\u2500 Events/               # Event channels and registries\n\u2502   \u251c\u2500\u2500 Channels/         # EventChannel&lt;T&gt;\n\u2502   \u2514\u2500\u2500 Registries/       # GameplayEvents, AudioEvents\n\u251c\u2500\u2500 Factories/            # UIToolkitFactory\n\u251c\u2500\u2500 Interfaces/           # IDamageable, IUpdateable\n\u251c\u2500\u2500 Pooling/              # GamePoolManager\n\u251c\u2500\u2500 Saves/                # SaveFileManagerBase\n\u251c\u2500\u2500 Systems/              # Arena, Hub systems\n\u2502   \u2514\u2500\u2500 Arena/            # WaveSpawner, EnemyManager\n\u251c\u2500\u2500 UI/                   # Views, Hosts, Controllers\n\u2502   \u251c\u2500\u2500 Views/            # BasePanelView\n\u2502   \u2514\u2500\u2500 Hosts/            # BasePanelHost\n\u2514\u2500\u2500 Weapons/              # Weapon components\n</code></pre>"},{"location":"development/game-design/","title":"Game Design","text":"<p>Overview of game flow, progression systems, and VR-specific design considerations.</p>"},{"location":"development/game-design/#game-loop","title":"Game Loop","text":"<pre><code>HUB WORLD\n  - Shop: Buy/sell items\n  - Armory: Equip weapons\n  - Portals: Select arena\n        |\n        v\nARENA\n  - Wave 1 -&gt; Wave 2 -&gt; ... -&gt; Boss\n  - Collect: Gold, Experience\n        |\n        v\nRESULTS\n  - Score, Rewards\n  - Save Progress\n  - Return to Hub\n</code></pre>"},{"location":"development/game-design/#game-states","title":"Game States","text":"State Description Transitions To StartMenu Initial menu Loading, Hub Hub Player base, shops, portals Arena, Settings Arena Active combat Victory, Defeat, Paused ArenaPaused Combat suspended Arena, Hub ArenaVictory Completed all waves Results, Hub ArenaDefeat Player died Results, Hub"},{"location":"development/game-design/#progression-systems","title":"Progression Systems","text":""},{"location":"development/game-design/#player-level","title":"Player Level","text":"<p>Experience earned from combat increases player level.</p> <p>Level thresholds use polynomial scaling:</p> <ul> <li>Level 1 to 2: 100 XP</li> <li>Level 2 to 3: 400 XP</li> <li>Level N to N+1: 100 * N\u00b2 XP</li> </ul> <p>Level rewards:</p> <ul> <li>Stat bonuses (health, damage)</li> <li>Unlock new arenas</li> <li>Unlock shop items</li> </ul>"},{"location":"development/game-design/#gold-economy","title":"Gold Economy","text":"<p>Sources:</p> <ul> <li>Basic enemy kill: 5-10 gold</li> <li>Elite enemy kill: 20-30 gold</li> <li>Boss kill: 100+ gold</li> <li>Wave completion: 25 gold</li> <li>Arena completion: 100-500 gold</li> </ul> <p>Expenses:</p> <ul> <li>Basic weapon: 100-300 gold</li> <li>Rare weapon: 500-1000 gold</li> <li>Stat upgrade: 50-200 gold</li> <li>Arena unlock: 200-500 gold</li> </ul>"},{"location":"development/game-design/#meta-progression","title":"Meta Progression","text":"<p>Permanent upgrades that persist across runs:</p> <ul> <li>Stat multipliers (health, damage, gold gain)</li> <li>Weapon unlocks</li> <li>Arena unlocks</li> <li>Starting loadout options</li> </ul>"},{"location":"development/game-design/#arena-design","title":"Arena Design","text":""},{"location":"development/game-design/#wave-structure","title":"Wave Structure","text":"<p>Each arena contains multiple waves of enemies, culminating in a boss wave.</p> <p>Wave configuration:</p> <ul> <li>Enemy types and counts</li> <li>Spawn delays</li> <li>Intermission time between waves</li> </ul>"},{"location":"development/game-design/#difficulty-scaling","title":"Difficulty Scaling","text":"Arena Enemies Health Recommended Level Tutorial 3-5 50% 1 Easy 5-8 100% 1-3 Normal 8-12 100% 4-6 Hard 12-15 125% 7-10 Nightmare 15-20 150% 11+"},{"location":"development/game-design/#save-system","title":"Save System","text":""},{"location":"development/game-design/#auto-save-triggers","title":"Auto-save Triggers","text":"<ul> <li>Arena completion</li> <li>Returning to hub</li> <li>Purchasing items</li> <li>Application pause</li> <li>Timer (every 5 minutes in hub)</li> </ul>"},{"location":"development/game-design/#saved-data","title":"Saved Data","text":"<ul> <li>Player level and experience</li> <li>Gold and currency</li> <li>Purchased upgrades</li> <li>Unlocked content</li> <li>Arena completion records</li> <li>Equipment loadout</li> <li>Settings</li> </ul>"},{"location":"development/game-design/#performance-targets","title":"Performance Targets","text":"Metric Target Maximum Frame Rate 72 FPS - Active Enemies 6 8 Draw Calls 100 150 Frame Budget 11ms 13.9ms"},{"location":"development/ui-toolkit/","title":"UI Toolkit Best Practices","text":"<p>Memory-safe patterns for creating UI panels in VR using Unity's UI Toolkit.</p> <p>See User Interface for full architecture details.</p>"},{"location":"development/ui-toolkit/#architecture-summary","title":"Architecture Summary","text":"<pre><code>graph TD\n    A[Controller] --&gt;|game logic| B[Host]\n    B --&gt;|lifecycle| C[View]\n    C --&gt;|elements| D[Factory]</code></pre>"},{"location":"development/ui-toolkit/#memory-leak-prevention","title":"Memory Leak Prevention","text":""},{"location":"development/ui-toolkit/#common-leak-sources","title":"Common Leak Sources","text":"Source Problem Solution Lambda event handlers Cannot unsubscribe Use method references Missing unsubscribe Handler keeps reference Always unsubscribe in OnDisable View not disposed Elements remain in tree Call Dispose before regenerate Data bindings Source holds reference Clear dataSource in Dispose"},{"location":"development/ui-toolkit/#correct-event-pattern","title":"Correct Event Pattern","text":"<pre><code>private EventCallback&lt;ChangeEvent&lt;float&gt;&gt; _sliderCallback;\n\nvoid Bind()\n{\n    _sliderCallback = evt =&gt; OnValueChanged(evt.newValue);\n    slider.RegisterValueChangedCallback(_sliderCallback);\n}\n\nvoid Unbind()\n{\n    slider.UnregisterValueChangedCallback(_sliderCallback);\n}\n</code></pre>"},{"location":"development/ui-toolkit/#cleanup-checklist","title":"Cleanup Checklist","text":"<p>In Host.Dispose() or OnDisable():</p> <ol> <li>Unsubscribe from View events</li> <li>Unsubscribe from external events (Event Channels)</li> <li>Unregister UI callbacks</li> <li>Dispose the View</li> <li>Null out references</li> </ol> <pre><code>protected override void Dispose()\n{\n    // External events\n    GameplayEvents.GoldChanged.Unsubscribe(HandleGoldChanged);\n\n    // View events\n    if (_view != null)\n        _view.OnButtonClicked -= HandleButton;\n\n    // UI callbacks\n    _unbindAll?.Invoke();\n\n    // View\n    _view?.Dispose();\n    _view = null;\n}\n</code></pre>"},{"location":"development/ui-toolkit/#unbind-pattern","title":"Unbind Pattern","text":"<p>Compose unbind actions for clean disposal:</p> <pre><code>private Action _unbindAll;\n\nvoid BindControls()\n{\n    _unbindAll = () =&gt; { };\n    _unbindAll += BindSlider(view.Volume, volumeAttribute);\n    _unbindAll += BindToggle(view.Mute, muteAttribute);\n}\n\nstatic Action BindSlider(Slider slider, FloatAttribute attr)\n{\n    EventCallback&lt;ChangeEvent&lt;float&gt;&gt; cb = e =&gt; attr.Value = e.newValue;\n    slider.RegisterValueChangedCallback(cb);\n    return () =&gt; slider.UnregisterValueChangedCallback(cb);\n}\n\nvoid Dispose()\n{\n    _unbindAll?.Invoke();\n    _unbindAll = null;\n}\n</code></pre>"},{"location":"development/ui-toolkit/#view-disposal","title":"View Disposal","text":"<p>Always dispose before regenerating:</p> <pre><code>public override void Generate()\n{\n    Dispose();\n\n    _view = new MyPanelView(root, styleSheet);\n    BindEvents();\n    Show();\n}\n</code></pre> <p>BasePanelView.Dispose():</p> <pre><code>public virtual void Dispose()\n{\n    Container?.Clear();\n    Container?.RemoveFromHierarchy();\n    Container = null;\n}\n</code></pre>"},{"location":"development/ui-toolkit/#vr-specific-ui","title":"VR-Specific UI","text":""},{"location":"development/ui-toolkit/#hit-targets","title":"Hit Targets","text":"<ul> <li>Minimum button size: 64x64 pixels</li> <li>Slider handle: 48x48 minimum</li> <li>Generous padding between controls</li> </ul>"},{"location":"development/ui-toolkit/#text-readability","title":"Text Readability","text":"<ul> <li>Headers: 24-32px</li> <li>Body: 16-20px</li> <li>Never smaller than 12px</li> <li>High contrast colors</li> </ul>"},{"location":"development/ui-toolkit/#world-space-setup","title":"World Space Setup","text":"<ul> <li>Scale: 0.001 (1 pixel = 1mm)</li> <li>Distance: 1-2 meters from player</li> <li>Avoid rapid animations</li> <li>Test on actual headset</li> </ul>"},{"location":"development/ui-toolkit/#common-mistakes","title":"Common Mistakes","text":"Mistake Fix View regenerated without Dispose Always Dispose first Double event subscription Unsubscribe before subscribe External events not cleaned Unsubscribe in OnDisable Controller references View elements Only communicate through Host Null check missing in callback Always check _view != null"},{"location":"development/ui-toolkit/#quick-reference","title":"Quick Reference","text":"<pre><code>private void OnEnable()\n{\n    GameplayEvents.GoldChanged.Subscribe(HandleGold);\n}\n\nprivate void OnDisable()\n{\n    GameplayEvents.GoldChanged.Unsubscribe(HandleGold);\n}\n\nprivate void HandleGold(int value)\n{\n    if (_view?.GoldLabel != null)\n        _view.GoldLabel.text = value.ToString();\n}\n</code></pre>"},{"location":"future/project-status/","title":"Project Status","text":"<p>This document explains the current state of the project, why development was paused, and what lessons were learned.</p>"},{"location":"future/project-status/#why-the-project-was-shelved","title":"Why the Project Was Shelved","text":"<p>In January 2026, I started a new position working with Meta's native SDK rather than OpenXR. The two SDKs have fundamentally different approaches:</p> Aspect OpenXR (This Project) Meta Native SDK (Work) Input System XR Interaction Toolkit OVRInput Controller Handling XRController + Action Maps OVRCameraRig Hand Tracking XR Hands OVRHand Passthrough OpenXR Extensions OVRPassthroughLayer Performance APIs Standard Unity OVRManager + OVRMetrics <p>Context-switching between these two paradigms became impractical. Rather than produce subpar work in both contexts, I chose to pause this portfolio project.</p>"},{"location":"future/project-status/#what-was-completed","title":"What Was Completed","text":""},{"location":"future/project-status/#architecture-complete","title":"Architecture (Complete)","text":"<ul> <li>ScriptableObject-driven data layer</li> <li>Generic database pattern with O(1) lookups</li> <li>Type-safe event channel system</li> <li>Centralized static access (GameEvents, GameDatabases)</li> <li>Object pooling with priority routing</li> </ul>"},{"location":"future/project-status/#vr-foundation-complete","title":"VR Foundation (Complete)","text":"<ul> <li>XR Rig setup with locomotion options</li> <li>Teleport, smooth locomotion, snap/smooth turn</li> <li>Controller input mappings</li> <li>Haptic feedback system</li> </ul>"},{"location":"future/project-status/#combat-system-75","title":"Combat System (75%)","text":"<ul> <li>Weapon base classes and inheritance hierarchy</li> <li>Melee, bow, staff, shield, throwable weapon types</li> <li>WeaponData ScriptableObjects</li> <li>WeaponHitbox collision detection</li> <li>XR grab integration</li> </ul> <p>Missing: Velocity-based damage calculation, hit feedback polish</p>"},{"location":"future/project-status/#enemy-system-70","title":"Enemy System (70%)","text":"<ul> <li>Component-based architecture (Controller, Health, Movement, Animator, Attack)</li> <li>EnemyData ScriptableObjects</li> <li>NavMesh navigation</li> <li>Wave spawning system</li> <li>Object pooling integration</li> </ul> <p>Missing: AI state machine, animation polish, variety</p>"},{"location":"future/project-status/#ui-system-60","title":"UI System (60%)","text":"<ul> <li>UI Toolkit integration</li> <li>Factory-View-Host architecture</li> <li>Start menu, settings panels</li> <li>Loading screen</li> <li>Enemy health bars</li> </ul> <p>Missing: Pause menu, arena HUD, results screen, wrist UI</p>"},{"location":"future/project-status/#save-system-85","title":"Save System (85%)","text":"<ul> <li>ESave integration</li> <li>MetaProgressionData structure</li> <li>Event-driven save/load</li> <li>Settings persistence</li> </ul> <p>Missing: Autosave triggers, save indicator UI</p>"},{"location":"future/project-status/#what-was-not-started","title":"What Was Not Started","text":"<ul> <li>Shop system</li> <li>Equipment selection UI</li> <li>Player levelling with progression curves</li> <li>Roguelike meta-progression loop</li> <li>Leaderboards</li> <li>Tutorial</li> </ul>"},{"location":"future/project-status/#technical-highlights","title":"Technical Highlights","text":""},{"location":"future/project-status/#strong-points","title":"Strong Points","text":"<p>The architecture demonstrates professional Unity development practices:</p> <ol> <li> <p>Decoupled Systems - Event channels allow systems to communicate without direct references, making the codebase modular and testable.</p> </li> <li> <p>Data-Driven Design - ScriptableObjects define all game content, enabling rapid iteration without code changes.</p> </li> <li> <p>VR Performance Awareness - Object pooling, priority-based updates, and non-allocating physics queries keep frame rates stable.</p> </li> <li> <p>Memory Safety - UI Toolkit patterns with proper subscription management prevent memory leaks.</p> </li> <li> <p>Clean Code Organization - Consistent folder structure, namespaces, and naming conventions.</p> </li> </ol>"},{"location":"future/project-status/#lessons-learned","title":"Lessons Learned","text":"<ol> <li> <p>Scope Management - The original scope was too ambitious for a solo portfolio project. Should have focused on a complete vertical slice rather than breadth.</p> </li> <li> <p>SDK Lock-in - Building on OpenXR was the right choice for portability, but made transitioning to Meta's ecosystem more difficult.</p> </li> <li> <p>Documentation First - Writing documentation while building forced clearer thinking about architecture decisions.</p> </li> <li> <p>VR Playtesting - More frequent on-device testing would have caught comfort and usability issues earlier.</p> </li> </ol>"},{"location":"future/project-status/#code-quality-assessment","title":"Code Quality Assessment","text":"<p>Based on self-review:</p> Category Grade Notes Architecture A Excellent layering, proper patterns Code Organization A- Great structure, minor namespace inconsistencies Documentation A XML docs, markdown documentation VR Best Practices A Non-allocating physics, pooling, update throttling Completeness C+ Many systems incomplete Ship Readiness C Core loop exists but incomplete"},{"location":"future/project-status/#if-development-resumed","title":"If Development Resumed","text":"<p>Priority order for completing the project:</p> <ol> <li>Game Flow Manager - Complete state machine to enable full gameplay loop</li> <li>Pause System - Critical for VR usability</li> <li>Results Screen - Provide player feedback after combat</li> <li>Player Health UI - Essential gameplay information</li> <li>Simplified Shop - Core progression mechanic</li> <li>Polish Pass - Combat feedback, animations, audio</li> </ol> <p>Estimated time to MVP: 4-6 weeks of focused development.</p>"},{"location":"future/project-status/#repository-contents","title":"Repository Contents","text":"<pre><code>Assets/\n\u251c\u2500\u2500 Scripts/           # C# source code (documented)\n\u251c\u2500\u2500 Data/              # ScriptableObject assets\n\u251c\u2500\u2500 Prefabs/           # Weapon, enemy, UI prefabs\n\u251c\u2500\u2500 Scenes/            # Bootstrapper, Hub, Arena scenes\n\u2514\u2500\u2500 UI/                # USS stylesheets\n\nDocs/                  # This documentation\n</code></pre> <p>The codebase is clean and well-documented, suitable for review or continuation by another developer.</p>"},{"location":"future/roadmap/","title":"Development Roadmap","text":"<p>Tasks that were planned for completion before the project was shelved in January 2026. Organized by priority and system.</p>"},{"location":"future/roadmap/#implementation-status","title":"Implementation Status","text":"System Completion Notes Weapon Grab/Select 90% XR integration complete, needs holster polish Shield Block/Bash 80% Core mechanics work, missing durability Melee Combat 75% Needs velocity-based damage, hit feedback Enemy Spawning 85% Wave system works, needs variety Enemy Navigation 70% Basic NavMesh, needs AI states Enemy Animations 40% Structure exists, animations needed Player Health 85% System complete, needs UI Player Levelling 60% Attributes exist, no progression curves Arena System 85% Waves work, needs modular setup Game Flow Manager 30% State enum exists, no logic Pause System 0% Not implemented Save System 85% Works, needs autosave triggers Loading Screens 50% Basic exists, needs polish UI - Menus 80% Start menu, settings complete UI - HUD 20% Enemy health bars only UI - Pause 0% Not implemented UI - Results 0% Not implemented UI - Wrist/Hand 0% Not implemented Shop System 0% Not implemented Economy/Upgrades 0% Not implemented Level Portals 30% Basic portal exists Roguelike Loop 10% Meta progression data exists"},{"location":"future/roadmap/#week-1-core-systems-foundation","title":"Week 1: Core Systems Foundation","text":"<p>Goal: Establish working game loop from hub to arena and back.</p>"},{"location":"future/roadmap/#game-flow-manager","title":"Game Flow Manager","text":"Task Priority Estimate Implement GameFlowManager state machine Critical 4h Add state transition methods Critical 2h Create GameStateEventChannel Critical 1h Integrate with scene loading High 2h Add pause state handling High 2h"},{"location":"future/roadmap/#pause-system","title":"Pause System","text":"Task Priority Estimate Create pause input binding High 1h Implement custom time management High 2h Create PausePanelView High 2h Create PausePanelHost High 1h Create PauseController High 2h"},{"location":"future/roadmap/#player-health-ui","title":"Player Health UI","text":"Task Priority Estimate Create PlayerHealthView High 2h Create PlayerHealthHost High 1h Position in VR space High 1h Add damage flash effect Medium 1h"},{"location":"future/roadmap/#week-2-arena-and-combat-polish","title":"Week 2: Arena and Combat Polish","text":"<p>Goal: Complete arena experience with proper enemy behavior.</p>"},{"location":"future/roadmap/#modular-arena-setup","title":"Modular Arena Setup","text":"Task Priority Estimate Extend ArenaData configuration High 2h Create ArenaLoader High 3h Implement spawn point initialization High 2h Add arena-specific wave configs High 2h Create arena completion detection High 2h Implement victory/defeat transitions High 2h"},{"location":"future/roadmap/#enemy-navigation-improvements","title":"Enemy Navigation Improvements","text":"Task Priority Estimate Implement EnemyAI state machine High 3h Add Idle/Patrol state Medium 1h Add Chase state High 2h Add Attack state High 2h Add Stagger state Medium 1h"},{"location":"future/roadmap/#improved-melee-combat","title":"Improved Melee Combat","text":"Task Priority Estimate Track weapon velocity High 2h Calculate velocity-based damage High 1h Set minimum velocity threshold High 1h Add hit stop effect Medium 2h Improve haptic feedback Medium 1h"},{"location":"future/roadmap/#week-3-user-interface","title":"Week 3: User Interface","text":"<p>Goal: Complete all in-game UI panels.</p>"},{"location":"future/roadmap/#arena-hud","title":"Arena HUD","text":"Task Priority Estimate Create ArenaHUDView High 2h Add wave counter High 1h Add enemies remaining High 1h Add elapsed time Medium 1h Position in VR space High 1h"},{"location":"future/roadmap/#arena-results-panel","title":"Arena Results Panel","text":"Task Priority Estimate Create ArenaResultsView High 3h Display final score High 1h Display gold/XP earned High 1h Add star rating Medium 2h Add continue button High 1h"},{"location":"future/roadmap/#week-4-economy-and-progression","title":"Week 4: Economy and Progression","text":"<p>Goal: Implement shop, upgrades, and meta-progression.</p>"},{"location":"future/roadmap/#shop-system","title":"Shop System","text":"Task Priority Estimate Create ShopItemData High 1h Create ShopDatabase High 1h Create ShopPanelView High 3h Create ShopController High 2h Implement purchase validation High 1h"},{"location":"future/roadmap/#player-levelling","title":"Player Levelling","text":"Task Priority Estimate Define XP threshold formula High 1h Create LevelProgressionData High 1h Implement level-up check High 2h Apply stat bonuses High 2h"},{"location":"future/roadmap/#backlog","title":"Backlog","text":"<p>Lower priority items planned for post-MVP:</p> <ul> <li>Leaderboard system</li> <li>Save slots UI</li> <li>Boss unique attack patterns</li> <li>Environmental hazards</li> <li>Combo system</li> <li>Achievement system</li> <li>Tutorial arena</li> </ul>"},{"location":"future/roadmap/#definition-of-done","title":"Definition of Done","text":"<p>A feature was considered complete when:</p> <ol> <li>Works correctly on Quest 2 device</li> <li>Maintains 72+ FPS</li> <li>Events properly subscribed/unsubscribed</li> <li>Pooled objects returned correctly</li> <li>Data saved/loaded correctly</li> <li>UI readable at VR distances</li> <li>Haptic feedback where appropriate</li> <li>No console errors or warnings</li> </ol>"},{"location":"systems/enemies/","title":"Enemy System","text":"<p>Modular enemy system with component-based architecture, object pooling, and data-driven configuration.</p> <p>Source: <code>Assets/Scripts/Characters/Enemies/</code></p>"},{"location":"systems/enemies/#architecture","title":"Architecture","text":"<pre><code>graph TD\n    A[EnemyData] --&gt; B[EnemyDatabase]\n    A --&gt; C[EnemyController]\n    C --&gt; D[EnemyHealth]\n    C --&gt; E[EnemyMovement]\n    C --&gt; F[EnemyAnimator]\n    C --&gt; G[EnemyAttack]\n    C --&gt; H[EnemyId]</code></pre>"},{"location":"systems/enemies/#enemydata","title":"EnemyData","text":"<p>ScriptableObject defining enemy configuration.</p> <p>Source: <code>EnemyData.cs</code></p> <p><pre><code>[CreateAssetMenu(fileName = \"EnemyData\", menuName = \"Scriptable Objects/Data/Core/Enemy\")]\npublic class EnemyData : ScriptableObject\n{\n    [Header(\"Identity\")]\n    [SerializeField] private string enemyId;\n\n    [Header(\"Stats\")]\n    [SerializeField] private int maxHealth = 100;\n    [SerializeField] private float moveSpeed = 3.5f;\n\n    [Header(\"Presentation\")]\n    [SerializeField] private GameObject prefab;\n    [SerializeField] private WorldAudioData[] ambientSfx;\n    [SerializeField] private WorldAudioData[] hitSfx;\n    [SerializeField] private WorldAudioData[] deathSfx;\n    [SerializeField] private ParticleData deathVFX;\n\n    [Header(\"Combat\")] \n    [SerializeField] private WeaponData weapon;\n\n    // Properties\n    public string EnemyId =&gt; enemyId;\n    public int MaxHealth =&gt; maxHealth;\n    public float MoveSpeed =&gt; moveSpeed;\n    public GameObject Prefab =&gt; prefab;\n    public WeaponData Weapon =&gt; weapon;\n    public WorldAudioData HitSfx =&gt; GetHitSfx();  // Returns random SFX\n    public WorldAudioData DeathSfx =&gt; GetDeathSfx();\n    public ParticleData DeathVFX =&gt; deathVFX;\n}\n</code></pre> <pre><code>---\n\n## EnemyController\n\nMain coordinator that manages all enemy components.\n\n&gt; **Source**: [`EnemyController.cs`](https://github.com/SBUplakankus/monsta-choppa-vr/blob/main/Assets/Scripts/Characters/Enemies/EnemyController.cs)\n\n```csharp\npublic class EnemyController : MonoBehaviour\n{\n    [SerializeField] private EnemyData enemyData;\n\n    private EnemyMovement _enemyMovement;\n    private EnemyAnimator _enemyAnimator;\n    private EnemyHealth _enemyHealth;\n    private EnemyAttack _enemyAttack;\n    private EnemyId _enemyId;\n\n    public EnemyData Data { get =&gt; enemyData; set =&gt; enemyData = value; }\n    public Action OnDeath { get; set; }\n    public EnemyAnimator Animator =&gt; _enemyAnimator;\n    public EnemyMovement Movement =&gt; _enemyMovement;\n\n    public void OnSpawn(EnemyData data)\n    {\n        enemyData = data;\n        _enemyId.ID = enemyData.EnemyId;\n        _enemyHealth.OnSpawn(enemyData.MaxHealth, HandleEnemyDeath);\n        _enemyHealth.DeathVFX = enemyData.DeathVFX;\n        _enemyAnimator.OnSpawn();\n        _enemyMovement.OnSpawn(enemyData.MoveSpeed, _enemyAnimator);\n        _enemyAttack?.InitAttack(enemyData.Weapon, _enemyAnimator, _enemyMovement);\n        GameplayEvents.EnemySpawned.Raise(this);\n    }\n\n    public void OnDespawn()\n    {\n        _enemyAnimator.OnDespawn();\n        _enemyMovement.OnDespawn();\n        _enemyAttack?.ResetAttack();\n        _enemyHealth.OnDespawn(HandleEnemyDeath);\n        GameplayEvents.EnemyDespawned.Raise(this);\n    }\n\n    private void HandleEnemyDeath()\n    {\n        _enemyMovement.SetDead();\n        _enemyAttack.ResetAttack();\n        GamePoolManager.Instance.ReturnEnemyPrefab(this);\n        GamePoolManager.Instance.GetWorldAudioPrefab(enemyData?.DeathSfx, transform.position);\n        OnDeath?.Invoke();\n    }\n\n    public void HighPriorityUpdate()\n    {\n        _enemyMovement?.UpdateAI();\n        if (_enemyMovement &amp;&amp; _enemyMovement.IsInAttackRange)\n            TryAttack();\n    }\n}\n</code></pre> <pre><code>---\n\n## EnemyHealth\n\nHealth component implementing IDamageable with VR-optimized effects.\n\n&gt; **Source**: [`EnemyHealth.cs`](https://github.com/SBUplakankus/monsta-choppa-vr/blob/main/Assets/Scripts/Characters/Enemies/EnemyHealth.cs)\n\n```csharp\npublic class EnemyHealth : HealthComponent\n{\n    [SerializeField] private EnemyHealthBar healthBar;\n    [SerializeField] private ParticleData hitVFX;\n\n    private EnemyAnimator _animator;\n\n    public ParticleData DeathVFX { get; set; }\n\n    private void OnEnable()\n    {\n        OnDeath += HandleDeath;\n        OnDamageTaken += HandleDamageTaken;\n        OnDamageTakenWithDirection += HandleDirectionalDamage;\n    }\n\n    private void HandleDamageTaken()\n    {\n        healthBar?.UpdateHealthBarValue(HealthBarValue);\n    }\n\n    private void HandleDirectionalDamage(Vector3 hitDirection)\n    {\n        _animator?.PlayHitReaction(hitDirection);\n\n        if (hitVFX != null)\n        {\n            var hitPosition = transform.position + Vector3.up;\n            GamePoolManager.Instance?.GetParticlePrefab(hitVFX, hitPosition, \n                Quaternion.LookRotation(-hitDirection));\n        }\n    }\n\n    private void HandleDeath()\n    {\n        if (DeathVFX != null)\n            GamePoolManager.Instance?.GetParticlePrefab(DeathVFX, transform.position, \n                transform.rotation);\n    }\n}\n</code></pre> <pre><code>---\n\n## EnemyMovement\n\nNavMesh-based navigation with AI state machine.\n\n&gt; **Source**: [`EnemyMovement.cs`](https://github.com/SBUplakankus/monsta-choppa-vr/blob/main/Assets/Scripts/Characters/Enemies/EnemyMovement.cs)\n\n```csharp\npublic enum EnemyAIState { Idle, Chasing, Attacking, Dead }\n\n[RequireComponent(typeof(NavMeshAgent), typeof(Rigidbody))]\npublic class EnemyMovement : MonoBehaviour\n{\n    [SerializeField] private float attackRange = GameConstants.DefaultMeleeAttackRange;\n    [SerializeField] private float stoppingDistance = 1.5f;\n    [SerializeField] private float pathUpdateInterval = 0.2f;\n\n    private NavMeshAgent _navMeshAgent;\n    private EnemyAIState _currentState = EnemyAIState.Idle;\n    private Transform _target;\n\n    public EnemyAIState CurrentState =&gt; _currentState;\n    public bool IsInAttackRange =&gt; _target &amp;&amp; \n        Vector3.Distance(transform.position, _target.position) &lt;= attackRange;\n\n    public void OnSpawn(float speed, EnemyAnimator animator)\n    {\n        _navMeshAgent.enabled = true;\n        _navMeshAgent.speed = speed;\n        _currentState = EnemyAIState.Idle;\n        FindTarget();\n    }\n\n    public void UpdateAI()\n    {\n        if (_currentState == EnemyAIState.Dead) return;\n\n        if (IsInAttackRange)\n        {\n            SetState(EnemyAIState.Attacking);\n            StopMovement();\n            RotateTowardsTarget();\n        }\n        else\n        {\n            SetState(EnemyAIState.Chasing);\n            ChaseTarget();\n        }\n    }\n\n    public void SetDead()\n    {\n        SetState(EnemyAIState.Dead);\n        StopMovement();\n    }\n}\n</code></pre> <pre><code>---\n\n## EnemyAnimator\n\nAnimation state management using layered approach for combat and locomotion.\n\n&gt; **Source**: [`EnemyAnimator.cs`](https://github.com/SBUplakankus/monsta-choppa-vr/blob/main/Assets/Scripts/Characters/Enemies/EnemyAnimator.cs)\n\n```csharp\npublic class EnemyAnimator : AnimatorComponent\n{\n    [SerializeField] private int upperBodyLayerIndex = 1;\n\n    public bool IsAttacking =&gt; Animator &amp;&amp; Animator.GetBool(IsAttackingHash);\n\n    public void OnSpawn()\n    {\n        Animator.enabled = true;\n        Animator.Rebind();\n        // Set up layer weights for Mixamo combat animations\n        if (Animator.layerCount &gt; upperBodyLayerIndex)\n            Animator.SetLayerWeight(upperBodyLayerIndex, 1f);\n    }\n\n    public void UpdateMovementSpeed(float normalizedSpeed)\n    {\n        SetSpeed(normalizedSpeed);\n        SetBool(IsMovingHash, normalizedSpeed &gt; 0.01f);\n    }\n\n    public void PlayLightAttack()\n    {\n        Animator.SetInteger(LightAttackIndexHash, Random.Range(0, 3));\n        Animator.SetBool(IsAttackingHash, true);\n        Animator.SetTrigger(LightAttackHash);\n    }\n\n    public void PlayHitReaction(Vector3 hitDirection)\n    {\n        var localDir = transform.InverseTransformDirection(hitDirection);\n\n        if (localDir.x &lt; -0.3f)\n            Animator.SetTrigger(HitLeftHash);\n        else if (localDir.x &gt; 0.3f)\n            Animator.SetTrigger(HitRightHash);\n        else\n            Animator.SetTrigger(HitFrontHash);\n    }\n}\n</code></pre> <pre><code>---\n\n## Pooling Integration\n\nEnemies are spawned and returned via GamePoolManager.\n\n&gt; **Source**: [`GamePoolManager.cs`](https://github.com/SBUplakankus/monsta-choppa-vr/blob/main/Assets/Scripts/Pooling/GamePoolManager.cs)\n\n```csharp\n// Spawn enemy\nvar enemyData = GameDatabases.EnemyDatabase.Get(enemyId);\nvar instance = GamePoolManager.Instance.GetEnemyPrefab(enemyData, spawnPoint.position, spawnPoint.rotation);\n\n// Return enemy (called on death via EnemyController)\nGamePoolManager.Instance.ReturnEnemyPrefab(enemyController);\n</code></pre></p>"},{"location":"systems/enemies/#event-integration","title":"Event Integration","text":"<p>Enemies communicate through event channels.</p> <pre><code>// Raised when enemy spawns (in EnemyController.OnSpawn)\nGameplayEvents.EnemySpawned.Raise(this);\n\n// Raised when enemy despawns (in EnemyController.OnDespawn)\nGameplayEvents.EnemyDespawned.Raise(this);\n</code></pre>"},{"location":"systems/enemies/#wave-spawning","title":"Wave Spawning","text":"<p>WaveSpawner creates enemies during arena combat.</p> <p>Source: <code>WaveSpawner.cs</code></p> <pre><code>[RequireComponent(typeof(EnemyManager))]\npublic class WaveSpawner : MonoBehaviour\n{\n    [SerializeField] private Transform[] spawnPoints;\n    [SerializeField] private Transform bossSpawnPoint;\n    [SerializeField] private int maxEnemies = 6;\n\n    public event Action OnWaveEnemiesDefeated;\n    public event Action OnBossDefeated;\n\n    public void SpawnWave(WaveData waveData)\n    {\n        _waveType = WaveType.Main;\n        _enemiesRemaining = waveData.EnemyCount;\n        StartCoroutine(SpawnEnemies(waveData));\n    }\n\n    private IEnumerator SpawnEnemies(WaveData waveData)\n    {\n        foreach (var enemyData in waveData.Wave)\n        {\n            for (var i = 0; i &lt; enemyData.spawnAmount; i++)\n            {\n                while (_enemyManager.ActiveEnemiesCount &gt;= maxEnemies)\n                    yield return null;\n\n                var spawnPoint = GetRandomSpawnPoint();\n                _gamePoolManager.GetEnemyPrefab(enemyData.enemy, \n                    spawnPoint.position, spawnPoint.rotation);\n\n                yield return new WaitForSeconds(enemyData.spawnInterval);\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"systems/enemies/#creating-new-enemies","title":"Creating New Enemies","text":"<ol> <li>Create EnemyData asset via Create menu</li> <li>Configure stats, audio, effects</li> <li>Create enemy prefab with:</li> <li>EnemyController</li> <li>EnemyHealth</li> <li>EnemyMovement (with NavMeshAgent)</li> <li>EnemyAnimator (with Animator)</li> <li>EnemyAttack</li> <li>EnemyId</li> <li>Collider for damage detection</li> <li>Assign prefab to EnemyData</li> <li>Add to EnemyDatabase</li> <li>Add to wave configurations</li> </ol>"},{"location":"systems/save-data/","title":"Save Data System","text":"<p>Player persistence using ESave for JSON-based save files with event-driven architecture.</p> <p>Source: <code>Assets/Scripts/Saves/</code></p>"},{"location":"systems/save-data/#architecture","title":"Architecture","text":"<pre><code>graph TD\n    A[SaveFileManagerBase] --&gt; B[PlayerSaveFileManager]\n    A --&gt; C[SettingsSaveFileManager]\n    D[SystemEvents] --&gt; B\n    D --&gt; C</code></pre>"},{"location":"systems/save-data/#savefilemanagerbase","title":"SaveFileManagerBase","text":"<p>Abstract base class for save file managers.</p> <p>Source: <code>SaveFileManagerBase.cs</code></p> <pre><code>[RequireComponent(typeof(SaveFileSetup))]\npublic abstract class SaveFileManagerBase : MonoBehaviour\n{\n    private SaveFileSetup _saveFileSetup;\n    protected SaveFile SaveFile;\n\n    protected abstract void HandleSaveRequested();\n    protected abstract void HandleSaveCompleted();\n    protected abstract void HandleLoadRequested();\n    protected abstract void HandleLoadCompleted();\n\n    protected void GetSaveFile()\n    { \n        _saveFileSetup = GetComponent&lt;SaveFileSetup&gt;();\n        SaveFile = _saveFileSetup.GetSaveFile();\n    }\n}\n</code></pre>"},{"location":"systems/save-data/#playersavefilemanager","title":"PlayerSaveFileManager","text":"<p>Manages player progression persistence.</p> <p>Source: <code>PlayerSaveFileManager.cs</code></p> <p><pre><code>public class PlayerSaveFileManager : SaveFileManagerBase\n{\n    [SerializeField] private MetaProgressionData metaProgressionData;\n\n    private void OnEnable()\n    {\n        SystemEvents.PlayerSaveRequested.Subscribe(HandleSaveRequested);\n        SystemEvents.PlayerLoadRequested.Subscribe(HandleLoadRequested);\n    }\n\n    private void OnDisable()\n    {\n        SystemEvents.PlayerSaveRequested.Unsubscribe(HandleSaveRequested);\n        SystemEvents.PlayerLoadRequested.Unsubscribe(HandleLoadRequested);\n    }\n\n    protected override void HandleSaveRequested()\n    {\n        SaveFile.AddOrUpdateData(GameConstants.MetaProgressionKey, metaProgressionData);\n        HandleSaveCompleted();\n    }\n\n    protected override void HandleLoadRequested()\n    {\n        if(SaveFile.HasData(GameConstants.MetaProgressionKey))\n            metaProgressionData = SaveFile.GetData&lt;MetaProgressionData&gt;(\n                GameConstants.MetaProgressionKey);\n\n        HandleLoadCompleted();\n    }\n}\n</code></pre> <pre><code>---\n\n## MetaProgressionData\n\nScriptableObject storing player progression multipliers.\n\n&gt; **Source**: [`MetaProgressionData.cs`](https://github.com/SBUplakankus/monsta-choppa-vr/blob/main/Assets/Scripts/Data/Progression/MetaProgressionData.cs)\n\n```csharp\n[CreateAssetMenu(menuName = \"Scriptable Objects/Data/Progression/Meta Progression\")]\npublic class MetaProgressionData : ScriptableObject\n{\n    [Header(\"Meta Progression Attributes\")] \n    [SerializeField] private FloatAttribute expGain;\n    [SerializeField] private FloatAttribute goldGain;\n    [SerializeField] private FloatAttribute health;\n    [SerializeField] private FloatAttribute armour;\n\n    public float ExpGain =&gt; expGain.Value;\n    public float GoldGain =&gt; goldGain.Value;\n    public int Health =&gt; (int)health.Value;\n    public float Armour =&gt; armour.Value;\n}\n</code></pre></p>"},{"location":"systems/save-data/#save-keys","title":"Save Keys","text":"<p>All save keys are defined in GameConstants.</p> <p>Source: <code>GameConstants.cs</code></p> <p><pre><code>public static class GameConstants\n{\n    // Save Keys\n    public const string MetaProgressionKey = \"MetaProgression\";\n    public const string AudioSettingsKey = \"AudioSettings\";\n    public const string VideoSettingsKey = \"VideoSettings\";\n    public const string LocalizationSettingsKey = \"LocalizationSettings\";\n\n    // Attribute Keys\n    public const string PlayerGoldKey = \"PlayerGold\";\n    public const string PlayerExperienceKey = \"PlayerExperience\";\n    public const string PlayerLevelKey = \"PlayerLevel\";\n}\n</code></pre> <pre><code>---\n\n## Save Triggers\n\n### Manual Save\n\n```csharp\nSystemEvents.PlayerSaveRequested.Raise();\n</code></pre></p>"},{"location":"systems/save-data/#automatic-save-points","title":"Automatic Save Points","text":"<p>Save occurs on:</p> <ul> <li>Arena completion (victory or defeat)</li> <li>Returning to hub</li> <li>Purchasing upgrades</li> <li>Application pause (headset removed)</li> </ul> <pre><code>private void OnApplicationPause(bool paused)\n{\n    if (paused)\n    {\n        SystemEvents.PlayerSaveRequested.Raise();\n    }\n}\n</code></pre>"},{"location":"systems/save-data/#esave-api","title":"ESave API","text":"Method Purpose AddOrUpdateData(key, value) Store data by key GetData&lt;T&gt;(key) Retrieve typed data HasData(key) Check if key exists Save() Write to disk <p>File Locations:</p> <ul> <li>Windows: <code>%USERPROFILE%/AppData/LocalLow/[Company]/[Product]/</code></li> <li>Android: <code>/data/data/[package]/files/</code></li> </ul>"},{"location":"systems/save-data/#best-practices","title":"Best Practices","text":"Practice Reason Use constants for keys Prevents typos, enables refactoring Validate loaded data Handle missing or corrupted saves Save on significant events Don't lose player progress Separate settings from progression Settings apply globally, progression per-save"},{"location":"systems/user-interface/","title":"User Interface System","text":"<p>The UI system uses Unity's UI Toolkit with a Factory-View-Host architecture for clean separation of concerns and memory safety.</p> <p>Source: <code>Assets/Scripts/UI/</code></p>"},{"location":"systems/user-interface/#architecture","title":"Architecture","text":"<pre><code>graph TD\n    A[Controller] --&gt;|game logic| B[Host]\n    B --&gt;|lifecycle, animations| C[View]\n    C --&gt;|element creation| D[UIToolkitFactory]</code></pre>"},{"location":"systems/user-interface/#components","title":"Components","text":""},{"location":"systems/user-interface/#uitoolkitfactory","title":"UIToolkitFactory","text":"<p>Static factory class that creates pre-configured UI Toolkit elements with consistent styling and localization.</p> <p>Source: <code>UIToolkitFactory.cs</code></p> Method Returns Purpose CreateElement&lt;T&gt;() T Generic element with CSS classes CreateContainer() VisualElement Styled container CreateButton() Button Localized button with click handler CreateLabel() Label Localized label CreateBoundLabel() Label Data-bound label (auto-updates) CreateSlider() Slider Range input with callback CreateToggle() Toggle Boolean input CreateDropdown() DropdownField Selection input CreateHealthBar() BarElements Container, background, fill <p>Fluent Extensions:</p> <pre><code>var panel = UIToolkitFactory.CreateContainer()\n    .WithClasses(UIToolkitStyles.PanelBody)\n    .WithPadding(20)\n    .WithMargin(10)\n    .WithFlexGrow(1);\n</code></pre>"},{"location":"systems/user-interface/#basepanelview","title":"BasePanelView","text":"<p>Abstract base class for all UI views. Views define visual structure only.</p> <p>Source: <code>BasePanelView.cs</code></p> <pre><code>public abstract class BasePanelView : IDisposable\n{\n    protected VisualElement Container;\n\n    protected virtual void GenerateUI(VisualElement root) {}\n\n    public virtual void Dispose()\n    {\n        Container?.Clear();\n        Container?.RemoveFromHierarchy();\n        Container = null;\n    }\n}\n</code></pre> <p>View Responsibilities:</p> <ul> <li>Create UI element hierarchy using Factory</li> <li>Expose elements as properties for Host binding</li> <li>Expose events for user interactions</li> <li>Implement Dispose for cleanup</li> </ul> <p>View Restrictions:</p> <ul> <li>No game logic</li> <li>No external event subscriptions</li> <li>No references to game systems</li> </ul>"},{"location":"systems/user-interface/#basepanelhost","title":"BasePanelHost","text":"<p>MonoBehaviour that manages View lifecycle and animations.</p> <p>Source: <code>BasePanelHost.cs</code></p> <pre><code>public abstract class BasePanelHost : MonoBehaviour\n{\n    [SerializeField] protected UIDocument uiDocument;\n    [SerializeField] protected StyleSheet styleSheet;\n\n    protected VisualElement ContentRoot;\n    private ITweenable[] _tweenables;\n\n    public abstract void Generate();\n    protected abstract void Dispose();\n\n    public void Show()\n    {\n        if(_tweenables == null) return;\n        foreach (var tween in _tweenables)\n            tween?.Show();\n    }\n\n    public void Hide()\n    {\n        if(_tweenables == null) return;\n        foreach (var tween in _tweenables)\n            tween?.Hide();\n    }\n\n    private void Awake() =&gt; _tweenables = GetComponents&lt;ITweenable&gt;();\n    private void OnDisable() =&gt; Dispose();\n}\n</code></pre> <p>Host Responsibilities:</p> <ul> <li>Create and destroy Views</li> <li>Subscribe to View events</li> <li>Forward events to Controllers</li> <li>Manage show/hide animations via ITweenable</li> </ul>"},{"location":"systems/user-interface/#controllers","title":"Controllers","text":"<p>MonoBehaviours that handle game logic in response to UI events.</p> <pre><code>public class StartMenuController : MonoBehaviour\n{\n    [SerializeField] private StartMenuPanelHost menuHost;\n    [SerializeField] private SettingsPanelHost settingsHost;\n\n    private void OnEnable()\n    {\n        menuHost.Generate();\n        menuHost.OnPlayClicked += HandlePlay;\n        menuHost.OnSettingsClicked += HandleSettings;\n    }\n\n    private void OnDisable()\n    {\n        menuHost.OnPlayClicked -= HandlePlay;\n        menuHost.OnSettingsClicked -= HandleSettings;\n    }\n\n    private void HandlePlay()\n    {\n        SceneManager.LoadScene(GameConstants.Hub);\n    }\n\n    private void HandleSettings()\n    {\n        settingsHost.Generate();\n        settingsHost.Show();\n    }\n}\n</code></pre>"},{"location":"systems/user-interface/#data-binding","title":"Data Binding","text":""},{"location":"systems/user-interface/#automatic-binding","title":"Automatic Binding","text":"<p>Use CreateBoundLabel for labels that auto-update when data changes.</p> <pre><code>var goldLabel = UIToolkitFactory.CreateBoundLabel(\n    playerGold,\n    nameof(playerGold.Value),\n    UIToolkitStyles.StatValue\n);\n</code></pre>"},{"location":"systems/user-interface/#manual-binding","title":"Manual Binding","text":"<p>For complex formatting or conditional display.</p> <pre><code>private void BindData()\n{\n    playerGold.OnValueChanged += UpdateGoldDisplay;\n    UpdateGoldDisplay(playerGold.Value);\n}\n\nprivate void UnbindData()\n{\n    playerGold.OnValueChanged -= UpdateGoldDisplay;\n}\n\nprivate void UpdateGoldDisplay(int value)\n{\n    goldLabel.text = value &gt;= 1000 ? $\"{value/1000f:F1}K\" : value.ToString();\n}\n</code></pre>"},{"location":"systems/user-interface/#event-handling-pattern","title":"Event Handling Pattern","text":"<p>Store callback references for proper unsubscription.</p> <pre><code>public class AudioSettingsPanelHost : BasePanelHost\n{\n    private Action _unbindAll;\n\n    public void BindViewSliders(AudioSettingsPanelView view)\n    {\n        _unbindAll = () =&gt; { };\n        _unbindAll += BindSlider(view.MasterVolume, masterVolume);\n        _unbindAll += BindSlider(view.MusicVolume, musicVolume);\n    }\n\n    private static Action BindSlider(Slider slider, FloatAttribute attribute)\n    {\n        EventCallback&lt;ChangeEvent&lt;float&gt;&gt; callback = e =&gt; attribute.Value = e.newValue;\n        slider.RegisterValueChangedCallback(callback);\n\n        return () =&gt; slider.UnregisterValueChangedCallback(callback);\n    }\n\n    protected override void Dispose()\n    {\n        _unbindAll?.Invoke();\n        _unbindAll = null;\n        base.Dispose();\n    }\n}\n</code></pre>"},{"location":"systems/user-interface/#animation-system","title":"Animation System","text":"<p>Hosts use ITweenable components for show/hide animations.</p> <pre><code>public class TweenTransform : MonoBehaviour, ITweenable\n{\n    [SerializeField] private float displayScale = 1f;\n    [SerializeField] private float displayStartScale = 0.75f;\n    [SerializeField] private float duration = 0.25f;\n\n    public void Show()\n    {\n        transform.localScale = Vector3.one * displayStartScale;\n        // Animate to displayScale with OutCubic easing\n    }\n\n    public void Hide()\n    {\n        // Animate to zero with InCubic easing\n    }\n}\n</code></pre>"},{"location":"systems/user-interface/#existing-panels","title":"Existing Panels","text":"Panel View Host Status Start Menu StartMenuPanelView StartMenuPanelHost Complete Settings SettingsPanelView SettingsPanelHost Complete Audio Settings AudioSettingsPanelView AudioSettingsPanelHost Complete Video Settings VideoSettingsPanelView VideoSettingsPanelHost Complete Loading Screen LoadingScreenView LoadingScreenHost Complete Arena Intro ArenaIntroView ArenaIntroHost Complete Boss Intro BossIntroView BossIntroHost Complete Enemy Health Bar - EnemyHealthBar Complete"},{"location":"systems/user-interface/#memory-safety-rules","title":"Memory Safety Rules","text":"Rule Implementation Always dispose Views Call Dispose in Host.OnDisable Unsubscribe all events Use _unbindAll pattern or explicit unsubscribe No lambda event handlers Store callback references for unsubscription Null check in callbacks View may be disposed when callback fires Dispose before regenerate Call Dispose before creating new View"},{"location":"systems/weapons/","title":"Weapon System","text":"<p>Data-driven weapon system for VR combat with XR Interaction Toolkit integration, modular modifiers, and object pooling.</p> <p>Source: <code>Assets/Scripts/Weapons/</code> and <code>Assets/Scripts/Data/Weapons/</code></p>"},{"location":"systems/weapons/#architecture","title":"Architecture","text":"<pre><code>graph TD\n    A[WeaponData] --&gt; B[WeaponDatabase]\n    A --&gt; C[XRWeaponBase]\n    C --&gt; D[MeleeXRWeapon]\n    C --&gt; E[BowXRWeapon]\n    C --&gt; F[StaffXRWeapon]\n    C --&gt; G[ShieldXRWeapon]\n    C --&gt; H[ThrowableXRWeapon]</code></pre>"},{"location":"systems/weapons/#weapondata","title":"WeaponData","text":"<p>ScriptableObject defining all weapon properties.</p> <p>Source: <code>WeaponData.cs</code></p> <pre><code>[CreateAssetMenu(fileName = \"WeaponData\", menuName = \"Scriptable Objects/Data/Weapons/Weapon\")]\npublic class WeaponData : ScriptableObject\n{\n    [Header(\"Identity\")]\n    [SerializeField] private string weaponID;\n    [SerializeField] private string displayName;\n    [SerializeField] private WeaponCategory category;\n    [SerializeField] private WeaponRarity rarity;\n    [SerializeField] private GameObject weaponPrefab;\n    [SerializeField] private Sprite icon;\n\n    [Header(\"Base Stats\")]\n    [SerializeField] private int baseDamage = 10;\n    [SerializeField] private float attackCooldown = 1f;\n    [SerializeField] private float range = 2;\n    [SerializeField] private int staminaCost = 10;\n    [SerializeField] private DamageType damageType;\n\n    [Header(\"VR Settings\")]\n    [SerializeField] private Vector3 gripPositionOffset;\n    [SerializeField] private Vector3 gripRotationOffset;\n    [SerializeField] private float hapticStrength = 0.5f;\n    [SerializeField] private float hapticDuration = 0.1f;\n\n    [Header(\"Visual / Audio\")]\n    [SerializeField] private WorldAudioData[] hitSfx;\n    [SerializeField] private ParticleData hitVFX;\n    [SerializeField] private GameObject trailEffect;\n    [SerializeField] private Color trailColor = Color.white;\n\n    [Header(\"Modifiers\")]\n    [SerializeField] private List&lt;WeaponModifierData&gt; activeModifiers = new();\n\n    [Header(\"Economy\")]\n    [SerializeField] private int purchasePrice = 100;\n    [SerializeField] private int sellPrice = 50;\n    [SerializeField] private bool isPurchasable = true;\n\n    // Properties expose serialized fields\n    public string WeaponID =&gt; weaponID;\n    public int BaseDamage =&gt; baseDamage;\n    public float AttackCooldown =&gt; attackCooldown;\n    // ... other properties\n\n    public int TotalDamage\n    {\n        get\n        {\n            int total = baseDamage;\n            float multiplier = 1f;\n\n            if (activeModifiers != null)\n            {\n                foreach (var mod in activeModifiers)\n                {\n                    if (mod == null) continue;\n                    total += mod.damageBonus;\n                    multiplier += mod.damageMultiplier;\n                }\n            }\n            return Mathf.RoundToInt(total * multiplier);\n        }\n    }\n}\n</code></pre>"},{"location":"systems/weapons/#weaponmodifierdata","title":"WeaponModifierData","text":"<p>Stackable modifiers that enhance weapons.</p> <pre><code>[CreateAssetMenu(menuName = \"Scriptable Objects/Weapons/Weapon Modifier\")]\npublic class WeaponModifierData : ScriptableObject\n{\n    [Header(\"Identity\")]\n    public string modifierId;\n    public string modifierName;\n\n    [Header(\"Damage\")]\n    public DamageType addedDamageType;\n    public int damageBonus;\n    public float damageMultiplier;\n\n    [Header(\"Speed\")]\n    public float speedBonus;\n    public float cooldownReduction;\n\n    [Header(\"Visual\")]\n    public GameObject visualEffect;\n    public Color trailColor;\n    public Color glowColor;\n    public float glowIntensity;\n\n    [Header(\"Hit Effects\")]\n    public ParticleData onHitVFX;\n    public WorldAudioData onHitSfx;\n}\n</code></pre>"},{"location":"systems/weapons/#xrweaponbase","title":"XRWeaponBase","text":"<p>Abstract base class for all VR weapons.</p> <p>Source: <code>XRWeaponBase.cs</code></p> <pre><code>[RequireComponent(typeof(XRGrabInteractable))]\npublic abstract class XRWeaponBase : MonoBehaviour\n{\n    [SerializeField] protected WeaponData data;\n    [SerializeField] protected bool enableHaptics = true;\n\n    private XRGrabInteractable _grab;\n    private XRBaseInteractor _currentInteractor;\n    protected bool IsHeld;\n    private float _lastAttackTime;\n\n    public WeaponData Data =&gt; data;\n    public bool IsActive =&gt; IsHeld;\n    public bool CanAttack =&gt; Time.time &gt;= _lastAttackTime + data.AttackCooldown;\n\n    protected virtual void OnGrab(SelectEnterEventArgs args)\n    {\n        IsHeld = true;\n        _currentInteractor = args.interactorObject as XRBaseInteractor;\n        OnEquipped();\n    }\n\n    protected virtual void OnRelease(SelectExitEventArgs args)\n    {\n        IsHeld = false;\n        _currentInteractor = null;\n        OnUnequipped();\n    }\n\n    public void ProcessHit(IDamageable target, Vector3 hitPoint, \n                           Quaternion hitRotation, float damageMultiplier = 1f)\n    {\n        if (!CanAttack) return;\n\n        _lastAttackTime = Time.time;\n\n        var finalDamage = Mathf.RoundToInt(data.TotalDamage * damageMultiplier);\n        finalDamage = Mathf.Max(1, finalDamage);\n        target.TakeDamage(finalDamage);\n\n        // Spawn VFX and audio via pool\n        if (data.HitVFX != null)\n            GamePoolManager.Instance?.GetParticlePrefab(data.HitVFX, hitPoint, hitRotation);\n        if (data.HitSfx != null)\n            GamePoolManager.Instance?.GetWorldAudioPrefab(data.HitSfx, hitPoint);\n\n        TriggerHapticFeedback();\n    }\n\n    public abstract void PrimaryAction();\n    public abstract void SecondaryAction();\n    protected virtual void OnEquipped() { }\n    protected virtual void OnUnequipped() { }\n}\n</code></pre>"},{"location":"systems/weapons/#weapon-types","title":"Weapon Types","text":""},{"location":"systems/weapons/#meleexrweapon","title":"MeleeXRWeapon","text":"<p>Close-range weapons using physics-based hit detection.</p> <ul> <li>Uses WeaponHitbox for collision detection</li> <li>Damage scales with swing velocity</li> <li>Haptic feedback on hit</li> </ul>"},{"location":"systems/weapons/#bowxrweapon","title":"BowXRWeapon","text":"<p>Ranged weapon with projectile spawning.</p> <ul> <li>Pull string to draw</li> <li>Release to fire arrow projectile</li> <li>Projectiles pooled via GamePoolManager</li> </ul>"},{"location":"systems/weapons/#staffxrweapon","title":"StaffXRWeapon","text":"<p>Magic weapon with spell casting.</p> <ul> <li>Primary: Projectile spell</li> <li>Secondary: Area effect</li> </ul>"},{"location":"systems/weapons/#shieldxrweapon","title":"ShieldXRWeapon","text":"<p>Defensive weapon with blocking and bashing.</p> <p>Source: <code>ShieldXRWeapon.cs</code></p> <pre><code>public class ShieldXRWeapon : XRWeaponBase\n{\n    [Header(\"Shield Settings\")]\n    [SerializeField] private float blockAngle = 60f;\n    [SerializeField] private float blockDamageReduction = 0.75f;\n    [SerializeField] private float perfectBlockWindow = 0.2f;\n\n    [Header(\"Shield Bash\")]\n    [SerializeField] private float bashDamage = 10f;\n    [SerializeField] private float bashCooldown = 1f;\n    [SerializeField] private float bashForce = 500f;\n    [SerializeField] private float bashRadius = 0.5f;\n\n    // Pre-allocated buffer for non-allocating physics\n    private readonly Collider[] _bashBuffer = new Collider[4];\n\n    public bool CanBlockAttack(Vector3 attackDirection)\n    {\n        if (!_isBlocking) return false;\n        var angle = Vector3.Angle(-attackDirection, transform.forward);\n        return angle &lt;= blockAngle;\n    }\n\n    public void ShieldBash()\n    {\n        if (!CanBash) return;\n\n        var bashPoint = transform.position + transform.forward * 0.5f;\n        var hitCount = Physics.OverlapSphereNonAlloc(bashPoint, bashRadius, _bashBuffer);\n\n        for (int i = 0; i &lt; hitCount; i++)\n        {\n            if (_bashBuffer[i].TryGetComponent&lt;IDamageable&gt;(out var target))\n                target.TakeDamage(Mathf.RoundToInt(bashDamage));\n        }\n    }\n}\n</code></pre>"},{"location":"systems/weapons/#throwablexrweapon","title":"ThrowableXRWeapon","text":"<p>Throwable weapons that return to pool on impact.</p> <ul> <li>Thrown on release</li> <li>Returns to pool after hit or timeout</li> <li>Can be recalled (boomerang behavior)</li> </ul>"},{"location":"systems/weapons/#weaponhitbox","title":"WeaponHitbox","text":"<p>Component for melee damage detection with velocity-based multipliers.</p> <p>Source: <code>WeaponHitbox.cs</code></p> <pre><code>public class WeaponHitbox : MonoBehaviour\n{\n    [SerializeField] private XRWeaponBase weapon;\n    [SerializeField] private float hitCooldown = 0.2f;\n\n    private float _lastHitTime;\n    private Collider _lastHitCollider;\n\n    private void OnTriggerEnter(Collider other)\n    {\n        ProcessHit(other);\n    }\n\n    private void ProcessHit(Collider other)\n    {\n        if (!weapon || !weapon.IsActive || !weapon.CanAttack)\n            return;\n\n        if (!other.TryGetComponent&lt;IDamageable&gt;(out var target))\n            return;\n\n        var hitPoint = other.ClosestPoint(transform.position);\n        var hitDirection = CalculateHitDirection(other.transform);\n\n        // Get velocity-based damage multiplier for melee weapons\n        var damageMultiplier = 1f;\n        if (weapon is MeleeXRWeapon melee)\n            damageMultiplier = melee.VelocityDamageMultiplier;\n\n        weapon.ProcessHit(target, hitPoint, Quaternion.LookRotation(hitDirection), damageMultiplier);\n\n        _lastHitTime = Time.time;\n        _lastHitCollider = other;\n    }\n}\n</code></pre>"},{"location":"systems/weapons/#enums","title":"Enums","text":"<pre><code>public enum WeaponCategory\n{\n    Sword,\n    Bow,\n    Staff,\n    Axe,\n    Dagger,\n    Shield,\n    Throwable\n}\n\npublic enum WeaponRarity\n{\n    Common,\n    Uncommon,\n    Rare,\n    Epic,\n    Legendary\n}\n\npublic enum DamageType\n{\n    Physical,\n    Fire,\n    Frost,\n    Lightning,\n    Arcane,\n    Poison\n}\n</code></pre>"},{"location":"systems/weapons/#pooling-integration","title":"Pooling Integration","text":"<p>Weapons spawn effects through GamePoolManager.</p> <pre><code>// Spawn hit VFX\nGamePoolManager.Instance.GetParticlePrefab(data.hitVFX, hitPoint, hitRotation);\n\n// Spawn hit audio\nvar sfx = data.hitSfx[Random.Range(0, data.hitSfx.Length)];\nGamePoolManager.Instance.GetWorldAudioPrefab(sfx, hitPoint);\n</code></pre>"},{"location":"systems/weapons/#holster-system","title":"Holster System","text":"<p>WeaponHolsterController manages equipped weapons.</p> <pre><code>public class WeaponHolsterController : MonoBehaviour\n{\n    [SerializeField] private Transform leftHolster;\n    [SerializeField] private Transform rightHolster;\n    [SerializeField] private Transform backHolster;\n\n    public void EquipWeapon(WeaponData weapon, HolsterSlot slot);\n    public void UnequipWeapon(HolsterSlot slot);\n    public WeaponData GetEquippedWeapon(HolsterSlot slot);\n}\n</code></pre>"},{"location":"systems/weapons/#creating-new-weapons","title":"Creating New Weapons","text":"<ol> <li>Create WeaponData asset via Create menu</li> <li>Configure stats, VR settings, effects</li> <li>Create weapon prefab with:</li> <li>XRGrabInteractable</li> <li>Rigidbody</li> <li>Weapon component (MeleeXRWeapon, etc.)</li> <li>WeaponHitbox on striking surface</li> <li>Assign prefab to WeaponData</li> <li>Add to WeaponDatabase</li> </ol>"},{"location":"vr/bootstrap-loading/","title":"Bootstrap and Loading","text":"<p>Game initialization, loading screens, and async scene management for VR.</p>"},{"location":"vr/bootstrap-loading/#why-bootstrap-matters","title":"Why Bootstrap Matters","text":"<p>In VR, any frame drop causes:</p> <ul> <li>Tracking freeze</li> <li>Disorientation  </li> <li>Motion sickness</li> </ul> <p>Bootstrap ensures all systems initialize before gameplay, with loading screens covering any heavy operations.</p>"},{"location":"vr/bootstrap-loading/#scene-structure","title":"Scene Structure","text":"<pre><code>Build Index 0: Bootstrapper\n  - GameBootstrap (events, databases)\n  - Persistent managers\n  - Loading screen\n\nBuild Index 1: Hub\n  - Player spawn\n  - Shop/armory\n  - Arena portals\n\nBuild Index 2+: Arenas\n  - Loaded additively\n  - Unloaded on exit\n</code></pre>"},{"location":"vr/bootstrap-loading/#initialization-sequence","title":"Initialization Sequence","text":""},{"location":"vr/bootstrap-loading/#phase-1-core-systems-synchronous","title":"Phase 1: Core Systems (Synchronous)","text":"<ol> <li>Create singleton managers</li> <li>Initialize event channels (GameEvents)</li> <li>Load databases (GameDatabases)</li> <li>Initialize audio system</li> </ol>"},{"location":"vr/bootstrap-loading/#phase-2-user-data-may-be-async","title":"Phase 2: User Data (May be Async)","text":"<ol> <li>Load player settings</li> <li>Apply graphics/audio settings</li> <li>Load or create save file</li> <li>Initialize player attributes</li> </ol>"},{"location":"vr/bootstrap-loading/#phase-3-pre-loading-async-with-loading-screen","title":"Phase 3: Pre-loading (Async with Loading Screen)","text":"<ol> <li>Pre-warm object pools</li> <li>Load common assets</li> <li>Initialize XR systems</li> </ol>"},{"location":"vr/bootstrap-loading/#phase-4-ready","title":"Phase 4: Ready","text":"<ol> <li>Hide loading screen</li> <li>Enable input</li> <li>Start gameplay</li> </ol>"},{"location":"vr/bootstrap-loading/#gamebootstrap","title":"GameBootstrap","text":"<p>Initializes all static references on startup.</p> <pre><code>public class GameBootstrap : MonoBehaviour\n{\n    [SerializeField] private VoidEventChannel onGameSaved;\n    [SerializeField] private IntEventChannel onGoldChanged;\n    [SerializeField] private WeaponDatabase weaponDatabase;\n    [SerializeField] private EnemyDatabase enemyDatabase;\n\n    public void Initialize()\n    {\n        // Assign to static classes\n        GameEvents.OnGameSaved = onGameSaved;\n        GameEvents.OnGoldChanged = onGoldChanged;\n        GameDatabases.WeaponDatabase = weaponDatabase;\n        GameDatabases.EnemyDatabase = enemyDatabase;\n\n        // Build lookup dictionaries\n        weaponDatabase.BuildLookup();\n        enemyDatabase.BuildLookup();\n    }\n}\n</code></pre>"},{"location":"vr/bootstrap-loading/#loading-screen-requirements","title":"Loading Screen Requirements","text":""},{"location":"vr/bootstrap-loading/#must-have","title":"Must Have","text":"<ul> <li>Always visible (never black screen)</li> <li>Static or minimal movement</li> <li>Progress indicator</li> <li>Comfortable viewing distance</li> </ul>"},{"location":"vr/bootstrap-loading/#should-have","title":"Should Have","text":"<ul> <li>Fade transitions</li> <li>Loading tips</li> <li>Cancel option for long loads</li> </ul>"},{"location":"vr/bootstrap-loading/#avoid","title":"Avoid","text":"<ul> <li>Complex 3D scenes</li> <li>Rapid animations</li> <li>Small text</li> </ul>"},{"location":"vr/bootstrap-loading/#async-scene-loading","title":"Async Scene Loading","text":""},{"location":"vr/bootstrap-loading/#basic-pattern","title":"Basic Pattern","text":"<pre><code>public IEnumerator LoadSceneAsync(string sceneName)\n{\n    loadingScreen.Show();\n    loadingScreen.UpdateProgress(0, \"Loading...\");\n\n    yield return SceneManager.UnloadSceneAsync(currentScene);\n    yield return Resources.UnloadUnusedAssets();\n\n    var operation = SceneManager.LoadSceneAsync(sceneName, LoadSceneMode.Additive);\n    operation.allowSceneActivation = false;\n\n    while (operation.progress &lt; 0.9f)\n    {\n        loadingScreen.UpdateProgress(operation.progress, \"Loading...\");\n        yield return null;\n    }\n\n    operation.allowSceneActivation = true;\n    yield return operation;\n\n    loadingScreen.UpdateProgress(1, \"Ready!\");\n    yield return loadingScreen.FadeOut(0.3f);\n}\n</code></pre>"},{"location":"vr/bootstrap-loading/#key-points","title":"Key Points","text":"<ul> <li>Never block main thread</li> <li>Use allowSceneActivation for controlled activation</li> <li>Yield between heavy operations</li> <li>Show progress to player</li> </ul>"},{"location":"vr/bootstrap-loading/#pool-pre-warming","title":"Pool Pre-warming","text":"<p>Instantiate pooled objects during loading, not gameplay.</p> <pre><code>public IEnumerator PrewarmPools()\n{\n    int batchSize = 5;\n    int instantiated = 0;\n\n    foreach (var config in poolConfigs)\n    {\n        for (int i = 0; i &lt; config.count; i++)\n        {\n            Instantiate(config.prefab).SetActive(false);\n            instantiated++;\n\n            if (instantiated &gt;= batchSize)\n            {\n                instantiated = 0;\n                yield return null;\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"vr/bootstrap-loading/#persistent-objects","title":"Persistent Objects","text":"<p>Objects that survive scene loads:</p> <pre><code>void Awake()\n{\n    DontDestroyOnLoad(gameObject);\n}\n</code></pre> <p>Typical persistent objects:</p> <ul> <li>GameBootstrap</li> <li>AudioManager</li> <li>SaveDataManager</li> <li>XR Rig</li> <li>LoadingScreen</li> </ul>"},{"location":"vr/bootstrap-loading/#best-practices","title":"Best Practices","text":"Practice Reason Show loading for operations over 100ms Player knows game is responding Pre-warm pools during loading No instantiation spikes in gameplay Fade transitions Hide loading artifacts Keep XR Rig persistent Never lose tracking Test on device Editor performance differs"},{"location":"vr/comfort/","title":"VR Comfort Settings","text":"<p>Player comfort options for accessible VR gameplay.</p>"},{"location":"vr/comfort/#overview","title":"Overview","text":"<p>VR comfort varies significantly between players. Providing options allows more players to enjoy the game without motion sickness or discomfort.</p>"},{"location":"vr/comfort/#locomotion-options","title":"Locomotion Options","text":"Type Description Comfort Level Teleport Point and blink High Dash Quick move with brief fade Medium Smooth Continuous movement Low"},{"location":"vr/comfort/#teleport-implementation","title":"Teleport Implementation","text":"<pre><code>public class TeleportLocomotion : MonoBehaviour\n{\n    [SerializeField] private XRRayInteractor rayInteractor;\n    [SerializeField] private TeleportationProvider teleportProvider;\n\n    public void OnTeleportActivate(InputAction.CallbackContext context)\n    {\n        if (rayInteractor.TryGetCurrent3DRaycastHit(out var hit))\n        {\n            var request = new TeleportRequest\n            {\n                destinationPosition = hit.point,\n                destinationRotation = transform.rotation\n            };\n            teleportProvider.QueueTeleportRequest(request);\n        }\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#smooth-locomotion-with-vignette","title":"Smooth Locomotion with Vignette","text":"<pre><code>public class SmoothLocomotion : MonoBehaviour\n{\n    [SerializeField] private float moveSpeed = 2f;\n    [SerializeField] private TunnelingVignetteController vignette;\n\n    private void Update()\n    {\n        var input = moveAction.ReadValue&lt;Vector2&gt;();\n\n        if (input.magnitude &gt; 0.1f)\n        {\n            vignette.SetActive(true);\n            Move(input);\n        }\n        else\n        {\n            vignette.SetActive(false);\n        }\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#turning-options","title":"Turning Options","text":""},{"location":"vr/comfort/#snap-turn","title":"Snap Turn","text":"<p>Instant rotation by fixed degrees.</p> Preset Degrees Wide 45\u00b0 Normal 30\u00b0 Precise 15\u00b0 <pre><code>public class SnapTurnProvider : MonoBehaviour\n{\n    [SerializeField] private float turnAngle = 45f;\n    [SerializeField] private float debounceTime = 0.5f;\n\n    private float _lastTurnTime;\n\n    public void Turn(float direction)\n    {\n        if (Time.time - _lastTurnTime &lt; debounceTime) return;\n\n        var rotation = Quaternion.Euler(0, turnAngle * Mathf.Sign(direction), 0);\n        xrOrigin.RotateAroundCameraPosition(xrOrigin.transform.up, turnAngle * direction);\n        _lastTurnTime = Time.time;\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#smooth-turn","title":"Smooth Turn","text":"<p>Continuous rotation with variable speed.</p> <pre><code>public class SmoothTurnProvider : MonoBehaviour\n{\n    [SerializeField] private float turnSpeed = 60f;\n\n    private void Update()\n    {\n        var input = turnAction.ReadValue&lt;float&gt;();\n        if (Mathf.Abs(input) &gt; 0.1f)\n        {\n            xrOrigin.RotateAroundCameraPosition(xrOrigin.transform.up, input * turnSpeed * Time.deltaTime);\n        }\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#comfort-aids","title":"Comfort Aids","text":""},{"location":"vr/comfort/#tunneling-vignette","title":"Tunneling Vignette","text":"<p>Reduces peripheral vision during movement to reduce motion sickness.</p> <pre><code>public class TunnelingVignetteController : MonoBehaviour\n{\n    [SerializeField] private Material vignetteMaterial;\n    [SerializeField] private float transitionSpeed = 5f;\n    [SerializeField] private float maxVignetteStrength = 0.5f;\n\n    private float _targetStrength;\n    private float _currentStrength;\n\n    public void SetActive(bool active)\n    {\n        _targetStrength = active ? maxVignetteStrength : 0f;\n    }\n\n    private void Update()\n    {\n        _currentStrength = Mathf.Lerp(_currentStrength, _targetStrength, Time.deltaTime * transitionSpeed);\n        vignetteMaterial.SetFloat(\"_VignetteStrength\", _currentStrength);\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#seated-mode","title":"Seated Mode","text":"<p>Adjusts player height for seated play.</p> <pre><code>public class SeatedModeController : MonoBehaviour\n{\n    [SerializeField] private Transform xrOrigin;\n    [SerializeField] private float seatedHeightOffset = 0.5f;\n\n    public void EnableSeatedMode()\n    {\n        var currentY = xrOrigin.position.y;\n        xrOrigin.position = new Vector3(xrOrigin.position.x, currentY + seatedHeightOffset, xrOrigin.position.z);\n    }\n\n    public void RecalibrateHeight()\n    {\n        // Reset to floor level based on current head position\n    }\n}\n</code></pre>"},{"location":"vr/comfort/#settings-data","title":"Settings Data","text":"<pre><code>[System.Serializable]\npublic class ComfortSettings\n{\n    public LocomotionType locomotionType = LocomotionType.Teleport;\n    public TurnType turnType = TurnType.Snap;\n    public float snapTurnAngle = 45f;\n    public float smoothTurnSpeed = 60f;\n    public bool vignetteEnabled = true;\n    public float vignetteStrength = 0.5f;\n    public bool seatedMode = false;\n    public Handedness dominantHand = Handedness.Right;\n}\n\npublic enum LocomotionType { Teleport, Dash, Smooth }\npublic enum TurnType { Snap, Smooth }\npublic enum Handedness { Left, Right }\n</code></pre>"},{"location":"vr/comfort/#ui-considerations","title":"UI Considerations","text":"<p>VR UI must be readable and comfortable:</p> Element Guideline Distance 1-2 meters from player Text size Minimum 16px body, 24px headers Button size Minimum 64x64 pixels Contrast High contrast for readability Motion Avoid rapid animations"},{"location":"vr/comfort/#best-practices","title":"Best Practices","text":"Practice Reason Default to highest comfort New players need gentle introduction Remember preferences Save and restore on next session Allow runtime changes Let players adjust during play Test on device Editor previews don't show comfort issues"},{"location":"vr/performance/","title":"VR Performance Guide","text":"<p>Performance targets, optimization techniques, and Quest-specific considerations.</p>"},{"location":"vr/performance/#performance-targets","title":"Performance Targets","text":""},{"location":"vr/performance/#frame-rate","title":"Frame Rate","text":"Platform Minimum Target Quest 2 72 FPS 90 FPS Quest 3 72 FPS 120 FPS <p>Frame budget at 72 FPS: 13.9ms per frame</p>"},{"location":"vr/performance/#resource-budgets","title":"Resource Budgets","text":"Resource Target Maximum Draw calls 100 150 Triangles 300k 500k Active enemies 6 8 Active VFX 15 20"},{"location":"vr/performance/#vr-specific-rules","title":"VR-Specific Rules","text":""},{"location":"vr/performance/#never-do","title":"Never Do","text":"Action Problem Move camera transform directly Causes motion sickness Change camera FOV VR FOV is fixed by hardware Disable head tracking Breaks spatial awareness Use Instantiate in gameplay Causes frame spikes Block main thread Tracking freezes"},{"location":"vr/performance/#always-do","title":"Always Do","text":"Action Reason Move XR Rig, not camera Maintains tracking Use Time.deltaTime Frame-rate independent Pool all spawned objects Avoids GC spikes Cache GetComponent results Reduces per-frame cost Unsubscribe events in OnDisable Prevents memory leaks"},{"location":"vr/performance/#optimization-techniques","title":"Optimization Techniques","text":""},{"location":"vr/performance/#rendering","title":"Rendering","text":"<ul> <li>Enable Single Pass Instanced stereo rendering</li> <li>Use GPU instancing for repeated meshes</li> <li>Enable foveated rendering on Quest</li> <li>Aggressive LOD groups</li> <li>Bake lighting where possible</li> <li>Limit real-time shadows</li> </ul>"},{"location":"vr/performance/#physics","title":"Physics","text":"<ul> <li>Use layer matrix to limit collision checks</li> <li>Prefer trigger colliders over continuous collision</li> <li>Update NavMesh paths at intervals (0.2s)</li> <li>Use OverlapSphereNonAlloc</li> </ul>"},{"location":"vr/performance/#scripts","title":"Scripts","text":"<ul> <li>Minimize Update() logic</li> <li>Use priority update system for enemies</li> <li>Cache all component references</li> <li>Avoid LINQ in hot paths</li> <li>Use StringBuilder for string operations</li> </ul>"},{"location":"vr/performance/#update-manager","title":"Update Manager","text":"<p>Centralized update system with priority-based throttling.</p> <p>Source: <code>GameUpdateManager.cs</code></p> <pre><code>public enum UpdatePriority { High, Medium, Low }\n\n[DefaultExecutionOrder(-99)]\npublic class GameUpdateManager : MonoBehaviour\n{\n    public static GameUpdateManager Instance { get; private set; }\n\n    private readonly List&lt;IUpdateable&gt; _highPriorityUpdates = new();\n    private readonly List&lt;IUpdateable&gt; _mediumPriorityUpdates = new(); \n    private readonly List&lt;IUpdateable&gt; _lowPriorityUpdates = new();\n\n    private const float MediumPriorityInterval = 0.2f;\n    private const float LowPriorityInterval = 0.4f;\n\n    private void Update()\n    {\n        UpdateHighPriority();    // Every frame\n        UpdateMediumPriority();  // Every 0.2s\n        UpdateLowPriority();     // Every 0.4s\n    }\n\n    public void Register(IUpdateable updateable, UpdatePriority priority)\n    {\n        switch (priority)\n        {\n            case UpdatePriority.High:\n                _highPriorityUpdates.Add(updateable);\n                break;\n            case UpdatePriority.Medium:\n                _mediumPriorityUpdates.Add(updateable);\n                break;\n            case UpdatePriority.Low:\n                _lowPriorityUpdates.Add(updateable);\n                break;\n        }\n    }\n\n    public void Unregister(IUpdateable updateable)\n    {\n        if (_highPriorityUpdates.Remove(updateable)) return;\n        if (_mediumPriorityUpdates.Remove(updateable)) return;\n        _lowPriorityUpdates.Remove(updateable);\n    }\n}\n</code></pre>"},{"location":"vr/performance/#object-pooling","title":"Object Pooling","text":"<p>All spawned objects use GamePoolManager to avoid runtime allocations.</p> <p>Source: <code>GamePoolManager.cs</code></p> <pre><code>public class GamePoolManager : MonoBehaviour\n{\n    public static GamePoolManager Instance { get; private set; }\n\n    private readonly Dictionary&lt;EnemyData, ObjectPool&lt;GameObject&gt;&gt; _enemyPoolDictionary = new();\n    private readonly Dictionary&lt;ParticleData, ObjectPool&lt;GameObject&gt;&gt; _particlePoolDictionary = new();\n\n    public GameObject GetEnemyPrefab(EnemyData data, Vector3 position, Quaternion rotation)\n    {\n        if (!_enemyPoolDictionary.TryGetValue(data, out var pool))\n            return null;\n\n        var obj = pool.Get();\n        obj.transform.SetPositionAndRotation(position, rotation);\n        obj.GetComponent&lt;EnemyController&gt;()?.OnSpawn(data);\n        obj.SetActive(true);\n        return obj;\n    }\n\n    public void ReturnEnemyPrefab(EnemyController enemy)\n    {\n        if (!enemy) return;\n\n        if (_enemyPoolDictionary.TryGetValue(enemy.Data, out var pool))\n            pool.Release(enemy.gameObject);\n        else\n            Destroy(enemy.gameObject);\n    }\n}\n</code></pre>"},{"location":"vr/performance/#priority-routing","title":"Priority Routing","text":"<p>VFX and audio have priority systems to prevent overload.</p> <pre><code>if (!_vfxRouter.CanSpawn(data.Priority))\n    return null;\n</code></pre>"},{"location":"vr/performance/#quest-build-settings","title":"Quest Build Settings","text":""},{"location":"vr/performance/#player-settings","title":"Player Settings","text":"Setting Value Graphics API Vulkan Color Space Linear Scripting Backend IL2CPP Architecture ARM64 Managed Stripping Medium"},{"location":"vr/performance/#quality-settings","title":"Quality Settings","text":"Setting Value Pixel Light Count 1-2 Texture Quality Half Res Anti-Aliasing 4x MSAA Shadows Disabled or blob only"},{"location":"vr/performance/#xr-settings","title":"XR Settings","text":"Setting Value Stereo Rendering Single Pass Instanced Low Overhead Mode Enabled Phase Sync Enabled"},{"location":"vr/performance/#profiling","title":"Profiling","text":""},{"location":"vr/performance/#tools","title":"Tools","text":"Tool Purpose Unity Profiler CPU/GPU timing Frame Debugger Draw call analysis Memory Profiler Allocation tracking OVR Metrics Tool Quest-specific metrics"},{"location":"vr/performance/#key-metrics","title":"Key Metrics","text":"<ul> <li>GPU time per frame</li> <li>Draw call count</li> <li>SetPass calls</li> <li>GC allocations</li> <li>Memory usage</li> </ul>"},{"location":"vr/performance/#common-issues","title":"Common Issues","text":"Issue Solution Frame drops Profile GPU, reduce draw calls Tracking loss Never disable XR camera Motion sickness Add comfort options Memory growth Pool objects, unload unused Thermal throttling Reduce quality settings"},{"location":"vr/spacewarp/","title":"Application SpaceWarp","text":"<p>Implementation guide for Meta Application SpaceWarp (ASW) for Quest VR performance optimization.</p>"},{"location":"vr/spacewarp/#overview","title":"Overview","text":"<p>Application SpaceWarp allows rendering at half the native frame rate (36 FPS instead of 72 FPS) while maintaining smooth visuals through frame interpolation.</p> <pre><code>Normal Rendering (72 FPS):\nFrame 1 -&gt; Frame 2 -&gt; Frame 3 -&gt; Frame 4\n  13.9ms    13.9ms    13.9ms    13.9ms\n\nWith SpaceWarp (36 FPS rendered):\nFrame 1 -&gt; [Interpolated] -&gt; Frame 2 -&gt; [Interpolated]\n  27.8ms       Auto           27.8ms       Auto\n\nResult: Player sees 72 FPS, GPU renders 36 FPS\n</code></pre>"},{"location":"vr/spacewarp/#when-to-use","title":"When to Use","text":""},{"location":"vr/spacewarp/#good-use-cases","title":"Good Use Cases","text":"<ul> <li>Graphically intensive scenes</li> <li>Consistent frame budget scenarios</li> <li>Hub areas, menus, exploration</li> <li>Slower-paced gameplay</li> </ul>"},{"location":"vr/spacewarp/#avoid-when","title":"Avoid When","text":"<ul> <li>Fast-moving objects or particles</li> <li>Rapid UI animations</li> <li>Competitive/precision gameplay</li> <li>Inconsistent performance (can't maintain 36 FPS)</li> </ul>"},{"location":"vr/spacewarp/#hybrid-approach","title":"Hybrid Approach","text":"<p>Toggle dynamically based on game state:</p> <ul> <li>Enable during hub, menus, exploration</li> <li>Disable during intense combat</li> </ul>"},{"location":"vr/spacewarp/#prerequisites","title":"Prerequisites","text":""},{"location":"vr/spacewarp/#hardware","title":"Hardware","text":"<ul> <li>Meta Quest 2 or newer (Quest 1 not supported)</li> <li>Quest Runtime v39+</li> </ul>"},{"location":"vr/spacewarp/#software","title":"Software","text":"Requirement Version Unity 2021.3+ LTS URP 12.0+ Meta XR Core SDK 60.0+ Graphics API Vulkan (required)"},{"location":"vr/spacewarp/#project-settings","title":"Project Settings","text":"<p>Player Settings:</p> <ul> <li>Graphics API: Vulkan (not OpenGL ES)</li> <li>Color Space: Linear</li> <li>Scripting Backend: IL2CPP</li> <li>Target Architecture: ARM64</li> </ul> <p>Quality Settings:</p> <ul> <li>Anti-Aliasing: 4x MSAA (required)</li> </ul>"},{"location":"vr/spacewarp/#setup","title":"Setup","text":""},{"location":"vr/spacewarp/#xr-settings","title":"XR Settings","text":"<pre><code>Edit -&gt; Project Settings -&gt; XR Plug-in Management -&gt; Oculus:\n- Low Overhead Mode: Enabled\n- Phase Sync: Enabled\n- Application SpaceWarp: Enabled\n</code></pre>"},{"location":"vr/spacewarp/#urp-motion-vectors","title":"URP Motion Vectors","text":"<pre><code>URP Asset Settings:\n1. Select URP asset\n2. Enable \"Motion Vectors\" in Rendering section\n</code></pre>"},{"location":"vr/spacewarp/#vulkan-graphics-api","title":"Vulkan Graphics API","text":"<pre><code>Edit -&gt; Project Settings -&gt; Player -&gt; Other Settings:\n- Set Vulkan as first/only Graphics API\n- Remove OpenGL ES if present\n</code></pre>"},{"location":"vr/spacewarp/#implementation","title":"Implementation","text":""},{"location":"vr/spacewarp/#spacewarp-manager","title":"SpaceWarp Manager","text":"<pre><code>public class SpaceWarpManager : MonoBehaviour\n{\n    public static SpaceWarpManager Instance { get; private set; }\n\n    [SerializeField] private bool enableByDefault = false;\n\n    private bool _isEnabled;\n    private bool _isSupported;\n\n    public bool IsEnabled =&gt; _isEnabled;\n    public bool IsSupported =&gt; _isSupported;\n\n    private void Awake()\n    {\n        if (Instance != null) { Destroy(gameObject); return; }\n        Instance = this;\n        DontDestroyOnLoad(gameObject);\n\n        CheckSupport();\n        if (_isSupported &amp;&amp; enableByDefault)\n            EnableSpaceWarp();\n    }\n\n    private void CheckSupport()\n    {\n        #if UNITY_ANDROID &amp;&amp; !UNITY_EDITOR\n        _isSupported = SystemInfo.graphicsDeviceType == GraphicsDeviceType.Vulkan;\n        #else\n        _isSupported = false;\n        #endif\n    }\n\n    public void EnableSpaceWarp()\n    {\n        if (!_isSupported || _isEnabled) return;\n\n        #if UNITY_ANDROID &amp;&amp; !UNITY_EDITOR\n        Application.targetFrameRate = 36;\n        _isEnabled = true;\n        #endif\n    }\n\n    public void DisableSpaceWarp()\n    {\n        if (!_isEnabled) return;\n\n        #if UNITY_ANDROID &amp;&amp; !UNITY_EDITOR\n        Application.targetFrameRate = 72;\n        _isEnabled = false;\n        #endif\n    }\n\n    public void Toggle()\n    {\n        if (_isEnabled) DisableSpaceWarp();\n        else EnableSpaceWarp();\n    }\n}\n</code></pre>"},{"location":"vr/spacewarp/#game-integration","title":"Game Integration","text":"<pre><code>public class SpaceWarpGameIntegration : MonoBehaviour\n{\n    [SerializeField] private VoidEventChannel onArenaStarted;\n    [SerializeField] private VoidEventChannel onArenaEnded;\n    [SerializeField] private VoidEventChannel onHubEntered;\n\n    private void OnEnable()\n    {\n        onHubEntered?.Subscribe(OnHubEntered);\n        onArenaStarted?.Subscribe(OnArenaStarted);\n        onArenaEnded?.Subscribe(OnArenaEnded);\n    }\n\n    private void OnDisable()\n    {\n        onHubEntered?.Unsubscribe(OnHubEntered);\n        onArenaStarted?.Unsubscribe(OnArenaStarted);\n        onArenaEnded?.Unsubscribe(OnArenaEnded);\n    }\n\n    private void OnHubEntered()\n    {\n        SpaceWarpManager.Instance?.EnableSpaceWarp();\n    }\n\n    private void OnArenaStarted()\n    {\n        SpaceWarpManager.Instance?.DisableSpaceWarp();\n    }\n\n    private void OnArenaEnded()\n    {\n        SpaceWarpManager.Instance?.EnableSpaceWarp();\n    }\n}\n</code></pre>"},{"location":"vr/spacewarp/#motion-vectors","title":"Motion Vectors","text":"<p>Motion vectors are critical for SpaceWarp quality. Without them, moving objects have visible artifacts.</p>"},{"location":"vr/spacewarp/#enable-in-urp","title":"Enable in URP","text":"<ol> <li>Select Universal Render Pipeline Asset</li> <li>Find \"Rendering\" section</li> <li>Enable \"Motion Vectors\"</li> </ol>"},{"location":"vr/spacewarp/#per-object-motion-vectors","title":"Per-Object Motion Vectors","text":"<p>For skinned meshes and fast-moving objects:</p> <pre><code>[RequireComponent(typeof(Renderer))]\npublic class MotionVectorForcer : MonoBehaviour\n{\n    private Renderer _renderer;\n\n    private void Awake()\n    {\n        _renderer = GetComponent&lt;Renderer&gt;();\n    }\n\n    private void OnEnable()\n    {\n        _renderer.motionVectorGenerationMode = MotionVectorGenerationMode.Object;\n    }\n\n    private void OnDisable()\n    {\n        _renderer.motionVectorGenerationMode = MotionVectorGenerationMode.ForceNoMotion;\n    }\n}\n</code></pre>"},{"location":"vr/spacewarp/#common-issues","title":"Common Issues","text":"Issue Cause Solution Ghosting on moving objects Missing motion vectors Add MotionVectorForcer component UI appears blurry UI interpolated by SpaceWarp Use screen-space overlay or disable motion vectors on UI Frame rate unstable Scene too heavy Profile and optimize, or disable SpaceWarp SpaceWarp not activating Missing prerequisites Check Vulkan, MSAA, XR settings Edge artifacts Known limitation Add vignette during movement"},{"location":"vr/spacewarp/#best-practices","title":"Best Practices","text":"Do Don't Use in controlled scenarios Leave always on Test on device Trust editor previews Add motion vectors to movers Forget skinned mesh motion vectors Provide user toggle Force without option Use transitions when toggling Instantly switch state"},{"location":"vr/spacewarp/#user-settings","title":"User Settings","text":"<p>Provide player control:</p> <pre><code>public enum PerformanceMode\n{\n    Quality,      // 72 FPS, no SpaceWarp\n    Balanced,     // Dynamic based on load\n    Performance   // Always SpaceWarp (36 FPS interpolated)\n}\n</code></pre>"}]}